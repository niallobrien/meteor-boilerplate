{"version":3,"sources":["meteor://ðŸ’»app/packages/kadira_blaze-layout/packages/kadira_blaze-layout.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0F","file":"/packages/kadira_blaze-layout.js","sourcesContent":["(function () {\n\n///////////////////////////////////////////////////////////////////////////////\n//                                                                           //\n// packages/kadira:blaze-layout/lib/client/namespace.js                      //\n//                                                                           //\n///////////////////////////////////////////////////////////////////////////////\n                                                                             //\nBlazeLayout = {};                                                            // 1\n///////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n///////////////////////////////////////////////////////////////////////////////\n//                                                                           //\n// packages/kadira:blaze-layout/lib/client/layout.js                         //\n//                                                                           //\n///////////////////////////////////////////////////////////////////////////////\n                                                                             //\nvar currentLayoutName = null;                                                // 1\nvar currentLayout = null;                                                    // 2\nvar currentRegions = new ReactiveDict();                                     // 3\nvar currentData;                                                             // 4\nvar _isReady = false;                                                        // 5\n                                                                             // 6\nBlazeLayout.setRoot = function(root) {                                       // 7\n  BlazeLayout._root = root;                                                  // 8\n};                                                                           // 9\n                                                                             // 10\nBlazeLayout.render = function render(layout, regions) {                      // 11\n  regions = regions || {};                                                   // 12\n  Meteor.startup(function() {                                                // 13\n    // To make sure dom is loaded before we do rendering layout.             // 14\n    // Related to issue #25                                                  // 15\n    if(!_isReady) {                                                          // 16\n      Meteor.defer(function() {                                              // 17\n        _isReady = true;                                                     // 18\n        BlazeLayout._render(layout, regions)                                 // 19\n      });                                                                    // 20\n    } else {                                                                 // 21\n      BlazeLayout._render(layout, regions);                                  // 22\n    }                                                                        // 23\n  });                                                                        // 24\n};                                                                           // 25\n                                                                             // 26\nBlazeLayout.reset = function reset() {                                       // 27\n  var layout = currentLayout;                                                // 28\n  if(layout) {                                                               // 29\n    if(layout._domrange) {                                                   // 30\n      // if it's rendered let's remove it right away                         // 31\n      Blaze.remove(layout);                                                  // 32\n    } else {                                                                 // 33\n      // if not let's remove it when it rendered                             // 34\n      layout.onViewReady(function() {                                        // 35\n        Blaze.remove(layout);                                                // 36\n      });                                                                    // 37\n    }                                                                        // 38\n                                                                             // 39\n    currentLayout = null;                                                    // 40\n    currentLayoutName = null;                                                // 41\n    currentRegions = new ReactiveDict();                                     // 42\n  }                                                                          // 43\n};                                                                           // 44\n                                                                             // 45\nBlazeLayout._regionsToData = function _regionsToData(regions, data) {        // 46\n  data = data || {};                                                         // 47\n  _.each(regions, function(value, key) {                                     // 48\n    currentRegions.set(key, value);                                          // 49\n    data[key] = BlazeLayout._buildRegionGetter(key);                         // 50\n  });                                                                        // 51\n                                                                             // 52\n  return data;                                                               // 53\n};                                                                           // 54\n                                                                             // 55\nBlazeLayout._updateRegions = function _updateRegions(regions) {              // 56\n  var needsRerender = false;                                                 // 57\n  // unset removed regions from the exiting data                             // 58\n  _.each(currentData, function(value, key) {                                 // 59\n    if(regions[key] === undefined) {                                         // 60\n      currentRegions.set(key, undefined);                                    // 61\n      delete currentData[key];                                               // 62\n    }                                                                        // 63\n  });                                                                        // 64\n                                                                             // 65\n  _.each(regions, function(value, key) {                                     // 66\n    // if this key does not yet exist then blaze                             // 67\n    // has no idea about this key and it won't get the value of this key     // 68\n    // so, we need to force a re-render                                      // 69\n    if(currentData && currentData[key] === undefined) {                      // 70\n      needsRerender = true;                                                  // 71\n      // and, add the data function for this new key                         // 72\n      currentData[key] = BlazeLayout._buildRegionGetter(key);                // 73\n    }                                                                        // 74\n    currentRegions.set(key, value);                                          // 75\n  });                                                                        // 76\n                                                                             // 77\n  // force re-render if we need to                                           // 78\n  if(currentLayout && needsRerender) {                                       // 79\n    currentLayout.dataVar.dep.changed();                                     // 80\n  }                                                                          // 81\n};                                                                           // 82\n                                                                             // 83\nBlazeLayout._getRootDomNode = function _getRootDomNode() {                   // 84\n  var root = BlazeLayout._root                                               // 85\n  if(!root) {                                                                // 86\n    root = $('<div id=\"__blaze-root\"></div>');                               // 87\n    $('body').append(root);                                                  // 88\n    BlazeLayout.setRoot(root);                                               // 89\n  }                                                                          // 90\n                                                                             // 91\n  // We need to use $(root) here because when calling BlazeLayout.setRoot(), // 92\n  // there won't have any available DOM elements                             // 93\n  // So, we need to defer that.                                              // 94\n  var domNode = $(root).get(0);                                              // 95\n  if(!domNode) {                                                             // 96\n    throw new Error(\"Root element does not exist\");                          // 97\n  }                                                                          // 98\n                                                                             // 99\n  return domNode;                                                            // 100\n};                                                                           // 101\n                                                                             // 102\nBlazeLayout._buildRegionGetter = function _buildRegionGetter(key) {          // 103\n  return function() {                                                        // 104\n    return currentRegions.get(key);                                          // 105\n  };                                                                         // 106\n};                                                                           // 107\n                                                                             // 108\nBlazeLayout._render = function _render(layout, regions) {                    // 109\n  var rootDomNode = BlazeLayout._getRootDomNode();                           // 110\n  if(currentLayoutName != layout) {                                          // 111\n    // remove old view                                                       // 112\n    BlazeLayout.reset();                                                     // 113\n    currentData = BlazeLayout._regionsToData(regions);                       // 114\n                                                                             // 115\n    currentLayout = Blaze._TemplateWith(currentData, function() {            // 116\n      return Spacebars.include(Template[layout]);                            // 117\n    });                                                                      // 118\n                                                                             // 119\n    Blaze.render(currentLayout, rootDomNode);                                // 120\n    currentLayoutName = layout;                                              // 121\n  } else {                                                                   // 122\n    BlazeLayout._updateRegions(regions);                                     // 123\n  }                                                                          // 124\n};                                                                           // 125\n///////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n"]}