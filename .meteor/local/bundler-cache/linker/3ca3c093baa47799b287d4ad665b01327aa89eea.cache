[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar _ = Package.underscore._;\nvar Tracker = Package.tracker.Tracker;\nvar Deps = Package.tracker.Deps;\nvar ReactiveDict = Package['reactive-dict'].ReactiveDict;\nvar ReactiveVar = Package['reactive-var'].ReactiveVar;\n\n/* Package-scope variables */\nvar page, qs, Triggers, Router, Group, Route, FlowRouter;\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/kadira_flow-router/packages/kadira_flow-router.js                                                         //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n(function () {                                                                                                        // 1\n                                                                                                                      // 2\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/kadira:flow-router/client.browserify.js                                                                   //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// shim for using process in browser                                                                                  // 10\n                                                                                                                      // 11\nvar process = module.exports = {};                                                                                    // 12\nvar queue = [];                                                                                                       // 13\nvar draining = false;                                                                                                 // 14\nvar currentQueue;                                                                                                     // 15\nvar queueIndex = -1;                                                                                                  // 16\n                                                                                                                      // 17\nfunction cleanUpNextTick() {                                                                                          // 18\n    draining = false;                                                                                                 // 19\n    if (currentQueue.length) {                                                                                        // 20\n        queue = currentQueue.concat(queue);                                                                           // 21\n    } else {                                                                                                          // 22\n        queueIndex = -1;                                                                                              // 23\n    }                                                                                                                 // 24\n    if (queue.length) {                                                                                               // 25\n        drainQueue();                                                                                                 // 26\n    }                                                                                                                 // 27\n}                                                                                                                     // 28\n                                                                                                                      // 29\nfunction drainQueue() {                                                                                               // 30\n    if (draining) {                                                                                                   // 31\n        return;                                                                                                       // 32\n    }                                                                                                                 // 33\n    var timeout = setTimeout(cleanUpNextTick);                                                                        // 34\n    draining = true;                                                                                                  // 35\n                                                                                                                      // 36\n    var len = queue.length;                                                                                           // 37\n    while(len) {                                                                                                      // 38\n        currentQueue = queue;                                                                                         // 39\n        queue = [];                                                                                                   // 40\n        while (++queueIndex < len) {                                                                                  // 41\n            currentQueue[queueIndex].run();                                                                           // 42\n        }                                                                                                             // 43\n        queueIndex = -1;                                                                                              // 44\n        len = queue.length;                                                                                           // 45\n    }                                                                                                                 // 46\n    currentQueue = null;                                                                                              // 47\n    draining = false;                                                                                                 // 48\n    clearTimeout(timeout);                                                                                            // 49\n}                                                                                                                     // 50\n                                                                                                                      // 51\nprocess.nextTick = function (fun) {                                                                                   // 52\n    var args = new Array(arguments.length - 1);                                                                       // 53\n    if (arguments.length > 1) {                                                                                       // 54\n        for (var i = 1; i < arguments.length; i++) {                                                                  // 55\n            args[i - 1] = arguments[i];                                                                               // 56\n        }                                                                                                             // 57\n    }                                                                                                                 // 58\n    queue.push(new Item(fun, args));                                                                                  // 59\n    if (queue.length === 1 && !draining) {                                                                            // 60\n        setTimeout(drainQueue, 0);                                                                                    // 61\n    }                                                                                                                 // 62\n};                                                                                                                    // 63\n                                                                                                                      // 64\n// v8 likes predictible objects                                                                                       // 65\nfunction Item(fun, array) {                                                                                           // 66\n    this.fun = fun;                                                                                                   // 67\n    this.array = array;                                                                                               // 68\n}                                                                                                                     // 69\nItem.prototype.run = function () {                                                                                    // 70\n    this.fun.apply(null, this.array);                                                                                 // 71\n};                                                                                                                    // 72\nprocess.title = 'browser';                                                                                            // 73\nprocess.browser = true;                                                                                               // 74\nprocess.env = {};                                                                                                     // 75\nprocess.argv = [];                                                                                                    // 76\nprocess.version = ''; // empty string to avoid regexp issues                                                          // 77\nprocess.versions = {};                                                                                                // 78\n                                                                                                                      // 79\nfunction noop() {}                                                                                                    // 80\n                                                                                                                      // 81\nprocess.on = noop;                                                                                                    // 82\nprocess.addListener = noop;                                                                                           // 83\nprocess.once = noop;                                                                                                  // 84\nprocess.off = noop;                                                                                                   // 85\nprocess.removeListener = noop;                                                                                        // 86\nprocess.removeAllListeners = noop;                                                                                    // 87\nprocess.emit = noop;                                                                                                  // 88\n                                                                                                                      // 89\nprocess.binding = function (name) {                                                                                   // 90\n    throw new Error('process.binding is not supported');                                                              // 91\n};                                                                                                                    // 92\n                                                                                                                      // 93\n// TODO(shtylman)                                                                                                     // 94\nprocess.cwd = function () { return '/' };                                                                             // 95\nprocess.chdir = function (dir) {                                                                                      // 96\n    throw new Error('process.chdir is not supported');                                                                // 97\n};                                                                                                                    // 98\nprocess.umask = function() { return 0; };                                                                             // 99\n                                                                                                                      // 100\n},{}],2:[function(require,module,exports){                                                                            // 101\n(function (process){                                                                                                  // 102\n  /* globals require, module */                                                                                       // 103\n                                                                                                                      // 104\n  'use strict';                                                                                                       // 105\n                                                                                                                      // 106\n  /**                                                                                                                 // 107\n   * Module dependencies.                                                                                             // 108\n   */                                                                                                                 // 109\n                                                                                                                      // 110\n  var pathtoRegexp = require('path-to-regexp');                                                                       // 111\n                                                                                                                      // 112\n  /**                                                                                                                 // 113\n   * Module exports.                                                                                                  // 114\n   */                                                                                                                 // 115\n                                                                                                                      // 116\n  module.exports = page;                                                                                              // 117\n                                                                                                                      // 118\n  /**                                                                                                                 // 119\n   * Detect click event                                                                                               // 120\n   */                                                                                                                 // 121\n  var clickEvent = ('undefined' !== typeof document) && document.ontouchstart ? 'touchstart' : 'click';               // 122\n                                                                                                                      // 123\n  /**                                                                                                                 // 124\n   * To work properly with the URL                                                                                    // 125\n   * history.location generated polyfill in https://github.com/devote/HTML5-History-API                               // 126\n   */                                                                                                                 // 127\n                                                                                                                      // 128\n  var location = ('undefined' !== typeof window) && (window.history.location || window.location);                     // 129\n                                                                                                                      // 130\n  /**                                                                                                                 // 131\n   * Perform initial dispatch.                                                                                        // 132\n   */                                                                                                                 // 133\n                                                                                                                      // 134\n  var dispatch = true;                                                                                                // 135\n                                                                                                                      // 136\n                                                                                                                      // 137\n  /**                                                                                                                 // 138\n   * Decode URL components (query string, pathname, hash).                                                            // 139\n   * Accommodates both regular percent encoding and x-www-form-urlencoded format.                                     // 140\n   */                                                                                                                 // 141\n  var decodeURLComponents = true;                                                                                     // 142\n                                                                                                                      // 143\n  /**                                                                                                                 // 144\n   * Base path.                                                                                                       // 145\n   */                                                                                                                 // 146\n                                                                                                                      // 147\n  var base = '';                                                                                                      // 148\n                                                                                                                      // 149\n  /**                                                                                                                 // 150\n   * Running flag.                                                                                                    // 151\n   */                                                                                                                 // 152\n                                                                                                                      // 153\n  var running;                                                                                                        // 154\n                                                                                                                      // 155\n  /**                                                                                                                 // 156\n   * HashBang option                                                                                                  // 157\n   */                                                                                                                 // 158\n                                                                                                                      // 159\n  var hashbang = false;                                                                                               // 160\n                                                                                                                      // 161\n  /**                                                                                                                 // 162\n   * Previous context, for capturing                                                                                  // 163\n   * page exit events.                                                                                                // 164\n   */                                                                                                                 // 165\n                                                                                                                      // 166\n  var prevContext;                                                                                                    // 167\n                                                                                                                      // 168\n  /**                                                                                                                 // 169\n   * Register `path` with callback `fn()`,                                                                            // 170\n   * or route `path`, or redirection,                                                                                 // 171\n   * or `page.start()`.                                                                                               // 172\n   *                                                                                                                  // 173\n   *   page(fn);                                                                                                      // 174\n   *   page('*', fn);                                                                                                 // 175\n   *   page('/user/:id', load, user);                                                                                 // 176\n   *   page('/user/' + user.id, { some: 'thing' });                                                                   // 177\n   *   page('/user/' + user.id);                                                                                      // 178\n   *   page('/from', '/to')                                                                                           // 179\n   *   page();                                                                                                        // 180\n   *                                                                                                                  // 181\n   * @param {String|Function} path                                                                                    // 182\n   * @param {Function} fn...                                                                                          // 183\n   * @api public                                                                                                      // 184\n   */                                                                                                                 // 185\n                                                                                                                      // 186\n  function page(path, fn) {                                                                                           // 187\n    // <callback>                                                                                                     // 188\n    if ('function' === typeof path) {                                                                                 // 189\n      return page('*', path);                                                                                         // 190\n    }                                                                                                                 // 191\n                                                                                                                      // 192\n    // route <path> to <callback ...>                                                                                 // 193\n    if ('function' === typeof fn) {                                                                                   // 194\n      var route = new Route(path);                                                                                    // 195\n      for (var i = 1; i < arguments.length; ++i) {                                                                    // 196\n        page.callbacks.push(route.middleware(arguments[i]));                                                          // 197\n      }                                                                                                               // 198\n      // show <path> with [state]                                                                                     // 199\n    } else if ('string' === typeof path) {                                                                            // 200\n      page['string' === typeof fn ? 'redirect' : 'show'](path, fn);                                                   // 201\n      // start [options]                                                                                              // 202\n    } else {                                                                                                          // 203\n      page.start(path);                                                                                               // 204\n    }                                                                                                                 // 205\n  }                                                                                                                   // 206\n                                                                                                                      // 207\n  /**                                                                                                                 // 208\n   * Callback functions.                                                                                              // 209\n   */                                                                                                                 // 210\n                                                                                                                      // 211\n  page.callbacks = [];                                                                                                // 212\n  page.exits = [];                                                                                                    // 213\n                                                                                                                      // 214\n  /**                                                                                                                 // 215\n   * Current path being processed                                                                                     // 216\n   * @type {String}                                                                                                   // 217\n   */                                                                                                                 // 218\n  page.current = '';                                                                                                  // 219\n                                                                                                                      // 220\n  /**                                                                                                                 // 221\n   * Number of pages navigated to.                                                                                    // 222\n   * @type {number}                                                                                                   // 223\n   *                                                                                                                  // 224\n   *     page.len == 0;                                                                                               // 225\n   *     page('/login');                                                                                              // 226\n   *     page.len == 1;                                                                                               // 227\n   */                                                                                                                 // 228\n                                                                                                                      // 229\n  page.len = 0;                                                                                                       // 230\n                                                                                                                      // 231\n  /**                                                                                                                 // 232\n   * Get or set basepath to `path`.                                                                                   // 233\n   *                                                                                                                  // 234\n   * @param {String} path                                                                                             // 235\n   * @api public                                                                                                      // 236\n   */                                                                                                                 // 237\n                                                                                                                      // 238\n  page.base = function(path) {                                                                                        // 239\n    if (0 === arguments.length) return base;                                                                          // 240\n    base = path;                                                                                                      // 241\n  };                                                                                                                  // 242\n                                                                                                                      // 243\n  /**                                                                                                                 // 244\n   * Bind with the given `options`.                                                                                   // 245\n   *                                                                                                                  // 246\n   * Options:                                                                                                         // 247\n   *                                                                                                                  // 248\n   *    - `click` bind to click events [true]                                                                         // 249\n   *    - `popstate` bind to popstate [true]                                                                          // 250\n   *    - `dispatch` perform initial dispatch [true]                                                                  // 251\n   *                                                                                                                  // 252\n   * @param {Object} options                                                                                          // 253\n   * @api public                                                                                                      // 254\n   */                                                                                                                 // 255\n                                                                                                                      // 256\n  page.start = function(options) {                                                                                    // 257\n    options = options || {};                                                                                          // 258\n    if (running) return;                                                                                              // 259\n    running = true;                                                                                                   // 260\n    if (false === options.dispatch) dispatch = false;                                                                 // 261\n    if (false === options.decodeURLComponents) decodeURLComponents = false;                                           // 262\n    if (false !== options.popstate) window.addEventListener('popstate', onpopstate, false);                           // 263\n    if (false !== options.click) {                                                                                    // 264\n      document.addEventListener(clickEvent, onclick, false);                                                          // 265\n    }                                                                                                                 // 266\n    if (true === options.hashbang) hashbang = true;                                                                   // 267\n    if (!dispatch) return;                                                                                            // 268\n    var url = (hashbang && ~location.hash.indexOf('#!')) ? location.hash.substr(2) + location.search : location.pathname + location.search + location.hash;\n    page.replace(url, null, true, dispatch);                                                                          // 270\n  };                                                                                                                  // 271\n                                                                                                                      // 272\n  /**                                                                                                                 // 273\n   * Unbind click and popstate event handlers.                                                                        // 274\n   *                                                                                                                  // 275\n   * @api public                                                                                                      // 276\n   */                                                                                                                 // 277\n                                                                                                                      // 278\n  page.stop = function() {                                                                                            // 279\n    if (!running) return;                                                                                             // 280\n    page.current = '';                                                                                                // 281\n    page.len = 0;                                                                                                     // 282\n    running = false;                                                                                                  // 283\n    document.removeEventListener(clickEvent, onclick, false);                                                         // 284\n    window.removeEventListener('popstate', onpopstate, false);                                                        // 285\n  };                                                                                                                  // 286\n                                                                                                                      // 287\n  /**                                                                                                                 // 288\n   * Show `path` with optional `state` object.                                                                        // 289\n   *                                                                                                                  // 290\n   * @param {String} path                                                                                             // 291\n   * @param {Object} state                                                                                            // 292\n   * @param {Boolean} dispatch                                                                                        // 293\n   * @return {Context}                                                                                                // 294\n   * @api public                                                                                                      // 295\n   */                                                                                                                 // 296\n                                                                                                                      // 297\n  page.show = function(path, state, dispatch, push) {                                                                 // 298\n    var ctx = new Context(path, state);                                                                               // 299\n    page.current = ctx.path;                                                                                          // 300\n    if (false !== dispatch) page.dispatch(ctx);                                                                       // 301\n    if (false !== ctx.handled && false !== push) ctx.pushState();                                                     // 302\n    return ctx;                                                                                                       // 303\n  };                                                                                                                  // 304\n                                                                                                                      // 305\n  /**                                                                                                                 // 306\n   * Goes back in the history                                                                                         // 307\n   * Back should always let the current route push state and then go back.                                            // 308\n   *                                                                                                                  // 309\n   * @param {String} path - fallback path to go back if no more history exists, if undefined defaults to page.base    // 310\n   * @param {Object} [state]                                                                                          // 311\n   * @api public                                                                                                      // 312\n   */                                                                                                                 // 313\n                                                                                                                      // 314\n  page.back = function(path, state) {                                                                                 // 315\n    if (page.len > 0) {                                                                                               // 316\n      // this may need more testing to see if all browsers                                                            // 317\n      // wait for the next tick to go back in history                                                                 // 318\n      history.back();                                                                                                 // 319\n      page.len--;                                                                                                     // 320\n    } else if (path) {                                                                                                // 321\n      setTimeout(function() {                                                                                         // 322\n        page.show(path, state);                                                                                       // 323\n      });                                                                                                             // 324\n    }else{                                                                                                            // 325\n      setTimeout(function() {                                                                                         // 326\n        page.show(base, state);                                                                                       // 327\n      });                                                                                                             // 328\n    }                                                                                                                 // 329\n  };                                                                                                                  // 330\n                                                                                                                      // 331\n                                                                                                                      // 332\n  /**                                                                                                                 // 333\n   * Register route to redirect from one path to other                                                                // 334\n   * or just redirect to another route                                                                                // 335\n   *                                                                                                                  // 336\n   * @param {String} from - if param 'to' is undefined redirects to 'from'                                            // 337\n   * @param {String} [to]                                                                                             // 338\n   * @api public                                                                                                      // 339\n   */                                                                                                                 // 340\n  page.redirect = function(from, to) {                                                                                // 341\n    // Define route from a path to another                                                                            // 342\n    if ('string' === typeof from && 'string' === typeof to) {                                                         // 343\n      page(from, function(e) {                                                                                        // 344\n        setTimeout(function() {                                                                                       // 345\n          page.replace(to);                                                                                           // 346\n        }, 0);                                                                                                        // 347\n      });                                                                                                             // 348\n    }                                                                                                                 // 349\n                                                                                                                      // 350\n    // Wait for the push state and replace it with another                                                            // 351\n    if ('string' === typeof from && 'undefined' === typeof to) {                                                      // 352\n      setTimeout(function() {                                                                                         // 353\n        page.replace(from);                                                                                           // 354\n      }, 0);                                                                                                          // 355\n    }                                                                                                                 // 356\n  };                                                                                                                  // 357\n                                                                                                                      // 358\n  /**                                                                                                                 // 359\n   * Replace `path` with optional `state` object.                                                                     // 360\n   *                                                                                                                  // 361\n   * @param {String} path                                                                                             // 362\n   * @param {Object} state                                                                                            // 363\n   * @return {Context}                                                                                                // 364\n   * @api public                                                                                                      // 365\n   */                                                                                                                 // 366\n                                                                                                                      // 367\n                                                                                                                      // 368\n  page.replace = function(path, state, init, dispatch) {                                                              // 369\n    var ctx = new Context(path, state);                                                                               // 370\n    page.current = ctx.path;                                                                                          // 371\n    ctx.init = init;                                                                                                  // 372\n    ctx.save(); // save before dispatching, which may redirect                                                        // 373\n    if (false !== dispatch) page.dispatch(ctx);                                                                       // 374\n    return ctx;                                                                                                       // 375\n  };                                                                                                                  // 376\n                                                                                                                      // 377\n  /**                                                                                                                 // 378\n   * Dispatch the given `ctx`.                                                                                        // 379\n   *                                                                                                                  // 380\n   * @param {Object} ctx                                                                                              // 381\n   * @api private                                                                                                     // 382\n   */                                                                                                                 // 383\n                                                                                                                      // 384\n  page.dispatch = function(ctx) {                                                                                     // 385\n    var prev = prevContext,                                                                                           // 386\n      i = 0,                                                                                                          // 387\n      j = 0;                                                                                                          // 388\n                                                                                                                      // 389\n    prevContext = ctx;                                                                                                // 390\n                                                                                                                      // 391\n    function nextExit() {                                                                                             // 392\n      var fn = page.exits[j++];                                                                                       // 393\n      if (!fn) return nextEnter();                                                                                    // 394\n      fn(prev, nextExit);                                                                                             // 395\n    }                                                                                                                 // 396\n                                                                                                                      // 397\n    function nextEnter() {                                                                                            // 398\n      var fn = page.callbacks[i++];                                                                                   // 399\n                                                                                                                      // 400\n      if (ctx.path !== page.current) {                                                                                // 401\n        ctx.handled = false;                                                                                          // 402\n        return;                                                                                                       // 403\n      }                                                                                                               // 404\n      if (!fn) return unhandled(ctx);                                                                                 // 405\n      fn(ctx, nextEnter);                                                                                             // 406\n    }                                                                                                                 // 407\n                                                                                                                      // 408\n    if (prev) {                                                                                                       // 409\n      nextExit();                                                                                                     // 410\n    } else {                                                                                                          // 411\n      nextEnter();                                                                                                    // 412\n    }                                                                                                                 // 413\n  };                                                                                                                  // 414\n                                                                                                                      // 415\n  /**                                                                                                                 // 416\n   * Unhandled `ctx`. When it's not the initial                                                                       // 417\n   * popstate then redirect. If you wish to handle                                                                    // 418\n   * 404s on your own use `page('*', callback)`.                                                                      // 419\n   *                                                                                                                  // 420\n   * @param {Context} ctx                                                                                             // 421\n   * @api private                                                                                                     // 422\n   */                                                                                                                 // 423\n                                                                                                                      // 424\n  function unhandled(ctx) {                                                                                           // 425\n    if (ctx.handled) return;                                                                                          // 426\n    var current;                                                                                                      // 427\n                                                                                                                      // 428\n    if (hashbang) {                                                                                                   // 429\n      current = base + location.hash.replace('#!', '');                                                               // 430\n    } else {                                                                                                          // 431\n      current = location.pathname + location.search;                                                                  // 432\n    }                                                                                                                 // 433\n                                                                                                                      // 434\n    if (current === ctx.canonicalPath) return;                                                                        // 435\n    page.stop();                                                                                                      // 436\n    ctx.handled = false;                                                                                              // 437\n    location.href = ctx.canonicalPath;                                                                                // 438\n  }                                                                                                                   // 439\n                                                                                                                      // 440\n  /**                                                                                                                 // 441\n   * Register an exit route on `path` with                                                                            // 442\n   * callback `fn()`, which will be called                                                                            // 443\n   * on the previous context when a new                                                                               // 444\n   * page is visited.                                                                                                 // 445\n   */                                                                                                                 // 446\n  page.exit = function(path, fn) {                                                                                    // 447\n    if (typeof path === 'function') {                                                                                 // 448\n      return page.exit('*', path);                                                                                    // 449\n    }                                                                                                                 // 450\n                                                                                                                      // 451\n    var route = new Route(path);                                                                                      // 452\n    for (var i = 1; i < arguments.length; ++i) {                                                                      // 453\n      page.exits.push(route.middleware(arguments[i]));                                                                // 454\n    }                                                                                                                 // 455\n  };                                                                                                                  // 456\n                                                                                                                      // 457\n  /**                                                                                                                 // 458\n   * Remove URL encoding from the given `str`.                                                                        // 459\n   * Accommodates whitespace in both x-www-form-urlencoded                                                            // 460\n   * and regular percent-encoded form.                                                                                // 461\n   *                                                                                                                  // 462\n   * @param {str} URL component to decode                                                                             // 463\n   */                                                                                                                 // 464\n  function decodeURLEncodedURIComponent(val) {                                                                        // 465\n    if (typeof val !== 'string') { return val; }                                                                      // 466\n    return decodeURLComponents ? decodeURIComponent(val.replace(/\\+/g, ' ')) : val;                                   // 467\n  }                                                                                                                   // 468\n                                                                                                                      // 469\n  /**                                                                                                                 // 470\n   * Initialize a new \"request\" `Context`                                                                             // 471\n   * with the given `path` and optional initial `state`.                                                              // 472\n   *                                                                                                                  // 473\n   * @param {String} path                                                                                             // 474\n   * @param {Object} state                                                                                            // 475\n   * @api public                                                                                                      // 476\n   */                                                                                                                 // 477\n                                                                                                                      // 478\n  function Context(path, state) {                                                                                     // 479\n    if ('/' === path[0] && 0 !== path.indexOf(base)) path = base + (hashbang ? '#!' : '') + path;                     // 480\n    var i = path.indexOf('?');                                                                                        // 481\n                                                                                                                      // 482\n    this.canonicalPath = path;                                                                                        // 483\n    this.path = path.replace(base, '') || '/';                                                                        // 484\n    if (hashbang) this.path = this.path.replace('#!', '') || '/';                                                     // 485\n                                                                                                                      // 486\n    this.title = document.title;                                                                                      // 487\n    this.state = state || {};                                                                                         // 488\n    this.state.path = path;                                                                                           // 489\n    this.querystring = ~i ? decodeURLEncodedURIComponent(path.slice(i + 1)) : '';                                     // 490\n    this.pathname = decodeURLEncodedURIComponent(~i ? path.slice(0, i) : path);                                       // 491\n    this.params = {};                                                                                                 // 492\n                                                                                                                      // 493\n    // fragment                                                                                                       // 494\n    this.hash = '';                                                                                                   // 495\n    if (!hashbang) {                                                                                                  // 496\n      if (!~this.path.indexOf('#')) return;                                                                           // 497\n      var parts = this.path.split('#');                                                                               // 498\n      this.path = parts[0];                                                                                           // 499\n      this.hash = decodeURLEncodedURIComponent(parts[1]) || '';                                                       // 500\n      this.querystring = this.querystring.split('#')[0];                                                              // 501\n    }                                                                                                                 // 502\n  }                                                                                                                   // 503\n                                                                                                                      // 504\n  /**                                                                                                                 // 505\n   * Expose `Context`.                                                                                                // 506\n   */                                                                                                                 // 507\n                                                                                                                      // 508\n  page.Context = Context;                                                                                             // 509\n                                                                                                                      // 510\n  /**                                                                                                                 // 511\n   * Push state.                                                                                                      // 512\n   *                                                                                                                  // 513\n   * @api private                                                                                                     // 514\n   */                                                                                                                 // 515\n                                                                                                                      // 516\n  Context.prototype.pushState = function() {                                                                          // 517\n    page.len++;                                                                                                       // 518\n    history.pushState(this.state, this.title, hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n  };                                                                                                                  // 520\n                                                                                                                      // 521\n  /**                                                                                                                 // 522\n   * Save the context state.                                                                                          // 523\n   *                                                                                                                  // 524\n   * @api public                                                                                                      // 525\n   */                                                                                                                 // 526\n                                                                                                                      // 527\n  Context.prototype.save = function() {                                                                               // 528\n    history.replaceState(this.state, this.title, hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n  };                                                                                                                  // 530\n                                                                                                                      // 531\n  /**                                                                                                                 // 532\n   * Initialize `Route` with the given HTTP `path`,                                                                   // 533\n   * and an array of `callbacks` and `options`.                                                                       // 534\n   *                                                                                                                  // 535\n   * Options:                                                                                                         // 536\n   *                                                                                                                  // 537\n   *   - `sensitive`    enable case-sensitive routes                                                                  // 538\n   *   - `strict`       enable strict matching for trailing slashes                                                   // 539\n   *                                                                                                                  // 540\n   * @param {String} path                                                                                             // 541\n   * @param {Object} options.                                                                                         // 542\n   * @api private                                                                                                     // 543\n   */                                                                                                                 // 544\n                                                                                                                      // 545\n  function Route(path, options) {                                                                                     // 546\n    options = options || {};                                                                                          // 547\n    this.path = (path === '*') ? '(.*)' : path;                                                                       // 548\n    this.method = 'GET';                                                                                              // 549\n    this.regexp = pathtoRegexp(this.path,                                                                             // 550\n      this.keys = [],                                                                                                 // 551\n      options.sensitive,                                                                                              // 552\n      options.strict);                                                                                                // 553\n  }                                                                                                                   // 554\n                                                                                                                      // 555\n  /**                                                                                                                 // 556\n   * Expose `Route`.                                                                                                  // 557\n   */                                                                                                                 // 558\n                                                                                                                      // 559\n  page.Route = Route;                                                                                                 // 560\n                                                                                                                      // 561\n  /**                                                                                                                 // 562\n   * Return route middleware with                                                                                     // 563\n   * the given callback `fn()`.                                                                                       // 564\n   *                                                                                                                  // 565\n   * @param {Function} fn                                                                                             // 566\n   * @return {Function}                                                                                               // 567\n   * @api public                                                                                                      // 568\n   */                                                                                                                 // 569\n                                                                                                                      // 570\n  Route.prototype.middleware = function(fn) {                                                                         // 571\n    var self = this;                                                                                                  // 572\n    return function(ctx, next) {                                                                                      // 573\n      if (self.match(ctx.path, ctx.params)) return fn(ctx, next);                                                     // 574\n      next();                                                                                                         // 575\n    };                                                                                                                // 576\n  };                                                                                                                  // 577\n                                                                                                                      // 578\n  /**                                                                                                                 // 579\n   * Check if this route matches `path`, if so                                                                        // 580\n   * populate `params`.                                                                                               // 581\n   *                                                                                                                  // 582\n   * @param {String} path                                                                                             // 583\n   * @param {Object} params                                                                                           // 584\n   * @return {Boolean}                                                                                                // 585\n   * @api private                                                                                                     // 586\n   */                                                                                                                 // 587\n                                                                                                                      // 588\n  Route.prototype.match = function(path, params) {                                                                    // 589\n    var keys = this.keys,                                                                                             // 590\n      qsIndex = path.indexOf('?'),                                                                                    // 591\n      pathname = ~qsIndex ? path.slice(0, qsIndex) : path,                                                            // 592\n      m = this.regexp.exec(decodeURIComponent(pathname));                                                             // 593\n                                                                                                                      // 594\n    if (!m) return false;                                                                                             // 595\n                                                                                                                      // 596\n    for (var i = 1, len = m.length; i < len; ++i) {                                                                   // 597\n      var key = keys[i - 1];                                                                                          // 598\n      var val = decodeURLEncodedURIComponent(m[i]);                                                                   // 599\n      if (val !== undefined || !(hasOwnProperty.call(params, key.name))) {                                            // 600\n        params[key.name] = val;                                                                                       // 601\n      }                                                                                                               // 602\n    }                                                                                                                 // 603\n                                                                                                                      // 604\n    return true;                                                                                                      // 605\n  };                                                                                                                  // 606\n                                                                                                                      // 607\n                                                                                                                      // 608\n  /**                                                                                                                 // 609\n   * Handle \"populate\" events.                                                                                        // 610\n   */                                                                                                                 // 611\n                                                                                                                      // 612\n  var onpopstate = (function () {                                                                                     // 613\n    var loaded = false;                                                                                               // 614\n    if ('undefined' === typeof window) {                                                                              // 615\n      return;                                                                                                         // 616\n    }                                                                                                                 // 617\n    if (document.readyState === 'complete') {                                                                         // 618\n      loaded = true;                                                                                                  // 619\n    } else {                                                                                                          // 620\n      window.addEventListener('load', function() {                                                                    // 621\n        setTimeout(function() {                                                                                       // 622\n          loaded = true;                                                                                              // 623\n        }, 0);                                                                                                        // 624\n      });                                                                                                             // 625\n    }                                                                                                                 // 626\n    return function onpopstate(e) {                                                                                   // 627\n      if (!loaded) return;                                                                                            // 628\n      if (e.state) {                                                                                                  // 629\n        var path = e.state.path;                                                                                      // 630\n        page.replace(path, e.state);                                                                                  // 631\n      } else {                                                                                                        // 632\n        page.show(location.pathname + location.hash, undefined, undefined, false);                                    // 633\n      }                                                                                                               // 634\n    };                                                                                                                // 635\n  })();                                                                                                               // 636\n  /**                                                                                                                 // 637\n   * Handle \"click\" events.                                                                                           // 638\n   */                                                                                                                 // 639\n                                                                                                                      // 640\n  function onclick(e) {                                                                                               // 641\n                                                                                                                      // 642\n    if (1 !== which(e)) return;                                                                                       // 643\n                                                                                                                      // 644\n    if (e.metaKey || e.ctrlKey || e.shiftKey) return;                                                                 // 645\n    if (e.defaultPrevented) return;                                                                                   // 646\n                                                                                                                      // 647\n                                                                                                                      // 648\n                                                                                                                      // 649\n    // ensure link                                                                                                    // 650\n    var el = e.target;                                                                                                // 651\n    while (el && 'A' !== el.nodeName) el = el.parentNode;                                                             // 652\n    if (!el || 'A' !== el.nodeName) return;                                                                           // 653\n                                                                                                                      // 654\n                                                                                                                      // 655\n                                                                                                                      // 656\n    // Ignore if tag has                                                                                              // 657\n    // 1. \"download\" attribute                                                                                        // 658\n    // 2. rel=\"external\" attribute                                                                                    // 659\n    if (el.hasAttribute('download') || el.getAttribute('rel') === 'external') return;                                 // 660\n                                                                                                                      // 661\n    // ensure non-hash for the same path                                                                              // 662\n    var link = el.getAttribute('href');                                                                               // 663\n    if (!hashbang && el.pathname === location.pathname && (el.hash || '#' === link)) return;                          // 664\n                                                                                                                      // 665\n                                                                                                                      // 666\n                                                                                                                      // 667\n    // Check for mailto: in the href                                                                                  // 668\n    if (link && link.indexOf('mailto:') > -1) return;                                                                 // 669\n                                                                                                                      // 670\n    // check target                                                                                                   // 671\n    if (el.target) return;                                                                                            // 672\n                                                                                                                      // 673\n    // x-origin                                                                                                       // 674\n    if (!sameOrigin(el.href)) return;                                                                                 // 675\n                                                                                                                      // 676\n                                                                                                                      // 677\n                                                                                                                      // 678\n    // rebuild path                                                                                                   // 679\n    var path = el.pathname + el.search + (el.hash || '');                                                             // 680\n                                                                                                                      // 681\n    path = path[0] !== '/' ? '/' + path : path;                                                                       // 682\n                                                                                                                      // 683\n    // strip leading \"/[drive letter]:\" on NW.js on Windows                                                           // 684\n    if (typeof process !== 'undefined' && path.match(/^\\/[a-zA-Z]:\\//)) {                                             // 685\n      path = path.replace(/^\\/[a-zA-Z]:\\//, '/');                                                                     // 686\n    }                                                                                                                 // 687\n                                                                                                                      // 688\n    // same page                                                                                                      // 689\n    var orig = path;                                                                                                  // 690\n                                                                                                                      // 691\n    if (path.indexOf(base) === 0) {                                                                                   // 692\n      path = path.substr(base.length);                                                                                // 693\n    }                                                                                                                 // 694\n                                                                                                                      // 695\n    if (hashbang) path = path.replace('#!', '');                                                                      // 696\n                                                                                                                      // 697\n    if (base && orig === path) return;                                                                                // 698\n                                                                                                                      // 699\n    e.preventDefault();                                                                                               // 700\n    page.show(orig);                                                                                                  // 701\n  }                                                                                                                   // 702\n                                                                                                                      // 703\n  /**                                                                                                                 // 704\n   * Event button.                                                                                                    // 705\n   */                                                                                                                 // 706\n                                                                                                                      // 707\n  function which(e) {                                                                                                 // 708\n    e = e || window.event;                                                                                            // 709\n    return null === e.which ? e.button : e.which;                                                                     // 710\n  }                                                                                                                   // 711\n                                                                                                                      // 712\n  /**                                                                                                                 // 713\n   * Check if `href` is the same origin.                                                                              // 714\n   */                                                                                                                 // 715\n                                                                                                                      // 716\n  function sameOrigin(href) {                                                                                         // 717\n    var origin = location.protocol + '//' + location.hostname;                                                        // 718\n    if (location.port) origin += ':' + location.port;                                                                 // 719\n    return (href && (0 === href.indexOf(origin)));                                                                    // 720\n  }                                                                                                                   // 721\n                                                                                                                      // 722\n  page.sameOrigin = sameOrigin;                                                                                       // 723\n                                                                                                                      // 724\n}).call(this,require('_process'))                                                                                     // 725\n                                                                                                                      // 726\n},{\"_process\":1,\"path-to-regexp\":3}],3:[function(require,module,exports){                                             // 727\nvar isArray = require('isarray');                                                                                     // 728\n                                                                                                                      // 729\n/**                                                                                                                   // 730\n * Expose `pathToRegexp`.                                                                                             // 731\n */                                                                                                                   // 732\nmodule.exports = pathToRegexp;                                                                                        // 733\n                                                                                                                      // 734\n/**                                                                                                                   // 735\n * The main path matching regexp utility.                                                                             // 736\n *                                                                                                                    // 737\n * @type {RegExp}                                                                                                     // 738\n */                                                                                                                   // 739\nvar PATH_REGEXP = new RegExp([                                                                                        // 740\n  // Match escaped characters that would otherwise appear in future matches.                                          // 741\n  // This allows the user to escape special characters that won't transform.                                          // 742\n  '(\\\\\\\\.)',                                                                                                          // 743\n  // Match Express-style parameters and un-named parameters with a prefix                                             // 744\n  // and optional suffixes. Matches appear as:                                                                        // 745\n  //                                                                                                                  // 746\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\"]                                                          // 747\n  // \"/route(\\\\d+)\" => [undefined, undefined, undefined, \"\\d+\", undefined]                                            // 748\n  '([\\\\/.])?(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^)])*)\\\\))?|\\\\(((?:\\\\\\\\.|[^)])*)\\\\))([+*?])?',                               // 749\n  // Match regexp special characters that are always escaped.                                                         // 750\n  '([.+*?=^!:${}()[\\\\]|\\\\/])'                                                                                         // 751\n].join('|'), 'g');                                                                                                    // 752\n                                                                                                                      // 753\n/**                                                                                                                   // 754\n * Escape the capturing group by escaping special characters and meaning.                                             // 755\n *                                                                                                                    // 756\n * @param  {String} group                                                                                             // 757\n * @return {String}                                                                                                   // 758\n */                                                                                                                   // 759\nfunction escapeGroup (group) {                                                                                        // 760\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1');                                                                      // 761\n}                                                                                                                     // 762\n                                                                                                                      // 763\n/**                                                                                                                   // 764\n * Attach the keys as a property of the regexp.                                                                       // 765\n *                                                                                                                    // 766\n * @param  {RegExp} re                                                                                                // 767\n * @param  {Array}  keys                                                                                              // 768\n * @return {RegExp}                                                                                                   // 769\n */                                                                                                                   // 770\nfunction attachKeys (re, keys) {                                                                                      // 771\n  re.keys = keys;                                                                                                     // 772\n  return re;                                                                                                          // 773\n}                                                                                                                     // 774\n                                                                                                                      // 775\n/**                                                                                                                   // 776\n * Get the flags for a regexp from the options.                                                                       // 777\n *                                                                                                                    // 778\n * @param  {Object} options                                                                                           // 779\n * @return {String}                                                                                                   // 780\n */                                                                                                                   // 781\nfunction flags (options) {                                                                                            // 782\n  return options.sensitive ? '' : 'i';                                                                                // 783\n}                                                                                                                     // 784\n                                                                                                                      // 785\n/**                                                                                                                   // 786\n * Pull out keys from a regexp.                                                                                       // 787\n *                                                                                                                    // 788\n * @param  {RegExp} path                                                                                              // 789\n * @param  {Array}  keys                                                                                              // 790\n * @return {RegExp}                                                                                                   // 791\n */                                                                                                                   // 792\nfunction regexpToRegexp (path, keys) {                                                                                // 793\n  // Use a negative lookahead to match only capturing groups.                                                         // 794\n  var groups = path.source.match(/\\((?!\\?)/g);                                                                        // 795\n                                                                                                                      // 796\n  if (groups) {                                                                                                       // 797\n    for (var i = 0; i < groups.length; i++) {                                                                         // 798\n      keys.push({                                                                                                     // 799\n        name:      i,                                                                                                 // 800\n        delimiter: null,                                                                                              // 801\n        optional:  false,                                                                                             // 802\n        repeat:    false                                                                                              // 803\n      });                                                                                                             // 804\n    }                                                                                                                 // 805\n  }                                                                                                                   // 806\n                                                                                                                      // 807\n  return attachKeys(path, keys);                                                                                      // 808\n}                                                                                                                     // 809\n                                                                                                                      // 810\n/**                                                                                                                   // 811\n * Transform an array into a regexp.                                                                                  // 812\n *                                                                                                                    // 813\n * @param  {Array}  path                                                                                              // 814\n * @param  {Array}  keys                                                                                              // 815\n * @param  {Object} options                                                                                           // 816\n * @return {RegExp}                                                                                                   // 817\n */                                                                                                                   // 818\nfunction arrayToRegexp (path, keys, options) {                                                                        // 819\n  var parts = [];                                                                                                     // 820\n                                                                                                                      // 821\n  for (var i = 0; i < path.length; i++) {                                                                             // 822\n    parts.push(pathToRegexp(path[i], keys, options).source);                                                          // 823\n  }                                                                                                                   // 824\n                                                                                                                      // 825\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));                                             // 826\n  return attachKeys(regexp, keys);                                                                                    // 827\n}                                                                                                                     // 828\n                                                                                                                      // 829\n/**                                                                                                                   // 830\n * Replace the specific tags with regexp strings.                                                                     // 831\n *                                                                                                                    // 832\n * @param  {String} path                                                                                              // 833\n * @param  {Array}  keys                                                                                              // 834\n * @return {String}                                                                                                   // 835\n */                                                                                                                   // 836\nfunction replacePath (path, keys) {                                                                                   // 837\n  var index = 0;                                                                                                      // 838\n                                                                                                                      // 839\n  function replace (_, escaped, prefix, key, capture, group, suffix, escape) {                                        // 840\n    if (escaped) {                                                                                                    // 841\n      return escaped;                                                                                                 // 842\n    }                                                                                                                 // 843\n                                                                                                                      // 844\n    if (escape) {                                                                                                     // 845\n      return '\\\\' + escape;                                                                                           // 846\n    }                                                                                                                 // 847\n                                                                                                                      // 848\n    var repeat   = suffix === '+' || suffix === '*';                                                                  // 849\n    var optional = suffix === '?' || suffix === '*';                                                                  // 850\n                                                                                                                      // 851\n    keys.push({                                                                                                       // 852\n      name:      key || index++,                                                                                      // 853\n      delimiter: prefix || '/',                                                                                       // 854\n      optional:  optional,                                                                                            // 855\n      repeat:    repeat                                                                                               // 856\n    });                                                                                                               // 857\n                                                                                                                      // 858\n    prefix = prefix ? ('\\\\' + prefix) : '';                                                                           // 859\n    capture = escapeGroup(capture || group || '[^' + (prefix || '\\\\/') + ']+?');                                      // 860\n                                                                                                                      // 861\n    if (repeat) {                                                                                                     // 862\n      capture = capture + '(?:' + prefix + capture + ')*';                                                            // 863\n    }                                                                                                                 // 864\n                                                                                                                      // 865\n    if (optional) {                                                                                                   // 866\n      return '(?:' + prefix + '(' + capture + '))?';                                                                  // 867\n    }                                                                                                                 // 868\n                                                                                                                      // 869\n    // Basic parameter support.                                                                                       // 870\n    return prefix + '(' + capture + ')';                                                                              // 871\n  }                                                                                                                   // 872\n                                                                                                                      // 873\n  return path.replace(PATH_REGEXP, replace);                                                                          // 874\n}                                                                                                                     // 875\n                                                                                                                      // 876\n/**                                                                                                                   // 877\n * Normalize the given path string, returning a regular expression.                                                   // 878\n *                                                                                                                    // 879\n * An empty array can be passed in for the keys, which will hold the                                                  // 880\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will                                          // 881\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.                                        // 882\n *                                                                                                                    // 883\n * @param  {(String|RegExp|Array)} path                                                                               // 884\n * @param  {Array}                 [keys]                                                                             // 885\n * @param  {Object}                [options]                                                                          // 886\n * @return {RegExp}                                                                                                   // 887\n */                                                                                                                   // 888\nfunction pathToRegexp (path, keys, options) {                                                                         // 889\n  keys = keys || [];                                                                                                  // 890\n                                                                                                                      // 891\n  if (!isArray(keys)) {                                                                                               // 892\n    options = keys;                                                                                                   // 893\n    keys = [];                                                                                                        // 894\n  } else if (!options) {                                                                                              // 895\n    options = {};                                                                                                     // 896\n  }                                                                                                                   // 897\n                                                                                                                      // 898\n  if (path instanceof RegExp) {                                                                                       // 899\n    return regexpToRegexp(path, keys, options);                                                                       // 900\n  }                                                                                                                   // 901\n                                                                                                                      // 902\n  if (isArray(path)) {                                                                                                // 903\n    return arrayToRegexp(path, keys, options);                                                                        // 904\n  }                                                                                                                   // 905\n                                                                                                                      // 906\n  var strict = options.strict;                                                                                        // 907\n  var end = options.end !== false;                                                                                    // 908\n  var route = replacePath(path, keys);                                                                                // 909\n  var endsWithSlash = path.charAt(path.length - 1) === '/';                                                           // 910\n                                                                                                                      // 911\n  // In non-strict mode we allow a slash at the end of match. If the path to                                          // 912\n  // match already ends with a slash, we remove it for consistency. The slash                                         // 913\n  // is valid at the end of a path match, not in the middle. This is important                                        // 914\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".                                               // 915\n  if (!strict) {                                                                                                      // 916\n    route = (endsWithSlash ? route.slice(0, -2) : route) + '(?:\\\\/(?=$))?';                                           // 917\n  }                                                                                                                   // 918\n                                                                                                                      // 919\n  if (end) {                                                                                                          // 920\n    route += '$';                                                                                                     // 921\n  } else {                                                                                                            // 922\n    // In non-ending mode, we need the capturing groups to match as much as                                           // 923\n    // possible by using a positive lookahead to the end or next path segment.                                        // 924\n    route += strict && endsWithSlash ? '' : '(?=\\\\/|$)';                                                              // 925\n  }                                                                                                                   // 926\n                                                                                                                      // 927\n  return attachKeys(new RegExp('^' + route, flags(options)), keys);                                                   // 928\n}                                                                                                                     // 929\n                                                                                                                      // 930\n},{\"isarray\":4}],4:[function(require,module,exports){                                                                 // 931\nmodule.exports = Array.isArray || function (arr) {                                                                    // 932\n  return Object.prototype.toString.call(arr) == '[object Array]';                                                     // 933\n};                                                                                                                    // 934\n                                                                                                                      // 935\n},{}],5:[function(require,module,exports){                                                                            // 936\nmodule.exports = require('./lib/');                                                                                   // 937\n                                                                                                                      // 938\n},{\"./lib/\":6}],6:[function(require,module,exports){                                                                  // 939\n// Load modules                                                                                                       // 940\n                                                                                                                      // 941\nvar Stringify = require('./stringify');                                                                               // 942\nvar Parse = require('./parse');                                                                                       // 943\n                                                                                                                      // 944\n                                                                                                                      // 945\n// Declare internals                                                                                                  // 946\n                                                                                                                      // 947\nvar internals = {};                                                                                                   // 948\n                                                                                                                      // 949\n                                                                                                                      // 950\nmodule.exports = {                                                                                                    // 951\n    stringify: Stringify,                                                                                             // 952\n    parse: Parse                                                                                                      // 953\n};                                                                                                                    // 954\n                                                                                                                      // 955\n},{\"./parse\":7,\"./stringify\":8}],7:[function(require,module,exports){                                                 // 956\n// Load modules                                                                                                       // 957\n                                                                                                                      // 958\nvar Utils = require('./utils');                                                                                       // 959\n                                                                                                                      // 960\n                                                                                                                      // 961\n// Declare internals                                                                                                  // 962\n                                                                                                                      // 963\nvar internals = {                                                                                                     // 964\n    delimiter: '&',                                                                                                   // 965\n    depth: 5,                                                                                                         // 966\n    arrayLimit: 20,                                                                                                   // 967\n    parameterLimit: 1000,                                                                                             // 968\n    strictNullHandling: false                                                                                         // 969\n};                                                                                                                    // 970\n                                                                                                                      // 971\n                                                                                                                      // 972\ninternals.parseValues = function (str, options) {                                                                     // 973\n                                                                                                                      // 974\n    var obj = {};                                                                                                     // 975\n    var parts = str.split(options.delimiter, options.parameterLimit === Infinity ? undefined : options.parameterLimit);\n                                                                                                                      // 977\n    for (var i = 0, il = parts.length; i < il; ++i) {                                                                 // 978\n        var part = parts[i];                                                                                          // 979\n        var pos = part.indexOf(']=') === -1 ? part.indexOf('=') : part.indexOf(']=') + 1;                             // 980\n                                                                                                                      // 981\n        if (pos === -1) {                                                                                             // 982\n            obj[Utils.decode(part)] = '';                                                                             // 983\n                                                                                                                      // 984\n            if (options.strictNullHandling) {                                                                         // 985\n                obj[Utils.decode(part)] = null;                                                                       // 986\n            }                                                                                                         // 987\n        }                                                                                                             // 988\n        else {                                                                                                        // 989\n            var key = Utils.decode(part.slice(0, pos));                                                               // 990\n            var val = Utils.decode(part.slice(pos + 1));                                                              // 991\n                                                                                                                      // 992\n            if (!Object.prototype.hasOwnProperty.call(obj, key)) {                                                    // 993\n                obj[key] = val;                                                                                       // 994\n            }                                                                                                         // 995\n            else {                                                                                                    // 996\n                obj[key] = [].concat(obj[key]).concat(val);                                                           // 997\n            }                                                                                                         // 998\n        }                                                                                                             // 999\n    }                                                                                                                 // 1000\n                                                                                                                      // 1001\n    return obj;                                                                                                       // 1002\n};                                                                                                                    // 1003\n                                                                                                                      // 1004\n                                                                                                                      // 1005\ninternals.parseObject = function (chain, val, options) {                                                              // 1006\n                                                                                                                      // 1007\n    if (!chain.length) {                                                                                              // 1008\n        return val;                                                                                                   // 1009\n    }                                                                                                                 // 1010\n                                                                                                                      // 1011\n    var root = chain.shift();                                                                                         // 1012\n                                                                                                                      // 1013\n    var obj;                                                                                                          // 1014\n    if (root === '[]') {                                                                                              // 1015\n        obj = [];                                                                                                     // 1016\n        obj = obj.concat(internals.parseObject(chain, val, options));                                                 // 1017\n    }                                                                                                                 // 1018\n    else {                                                                                                            // 1019\n        obj = Object.create(null);                                                                                    // 1020\n        var cleanRoot = root[0] === '[' && root[root.length - 1] === ']' ? root.slice(1, root.length - 1) : root;     // 1021\n        var index = parseInt(cleanRoot, 10);                                                                          // 1022\n        var indexString = '' + index;                                                                                 // 1023\n        if (!isNaN(index) &&                                                                                          // 1024\n            root !== cleanRoot &&                                                                                     // 1025\n            indexString === cleanRoot &&                                                                              // 1026\n            index >= 0 &&                                                                                             // 1027\n            (options.parseArrays &&                                                                                   // 1028\n             index <= options.arrayLimit)) {                                                                          // 1029\n                                                                                                                      // 1030\n            obj = [];                                                                                                 // 1031\n            obj[index] = internals.parseObject(chain, val, options);                                                  // 1032\n        }                                                                                                             // 1033\n        else {                                                                                                        // 1034\n            obj[cleanRoot] = internals.parseObject(chain, val, options);                                              // 1035\n        }                                                                                                             // 1036\n    }                                                                                                                 // 1037\n                                                                                                                      // 1038\n    return obj;                                                                                                       // 1039\n};                                                                                                                    // 1040\n                                                                                                                      // 1041\n                                                                                                                      // 1042\ninternals.parseKeys = function (key, val, options) {                                                                  // 1043\n                                                                                                                      // 1044\n    if (!key) {                                                                                                       // 1045\n        return;                                                                                                       // 1046\n    }                                                                                                                 // 1047\n                                                                                                                      // 1048\n    // Transform dot notation to bracket notation                                                                     // 1049\n                                                                                                                      // 1050\n    if (options.allowDots) {                                                                                          // 1051\n        key = key.replace(/\\.([^\\.\\[]+)/g, '[$1]');                                                                   // 1052\n    }                                                                                                                 // 1053\n                                                                                                                      // 1054\n    // The regex chunks                                                                                               // 1055\n                                                                                                                      // 1056\n    var parent = /^([^\\[\\]]*)/;                                                                                       // 1057\n    var child = /(\\[[^\\[\\]]*\\])/g;                                                                                    // 1058\n                                                                                                                      // 1059\n    // Get the parent                                                                                                 // 1060\n                                                                                                                      // 1061\n    var segment = parent.exec(key);                                                                                   // 1062\n                                                                                                                      // 1063\n    // Stash the parent if it exists                                                                                  // 1064\n                                                                                                                      // 1065\n    var keys = [];                                                                                                    // 1066\n    if (segment[1]) {                                                                                                 // 1067\n        keys.push(segment[1]);                                                                                        // 1068\n    }                                                                                                                 // 1069\n                                                                                                                      // 1070\n    // Loop through children appending to the array until we hit depth                                                // 1071\n                                                                                                                      // 1072\n    var i = 0;                                                                                                        // 1073\n    while ((segment = child.exec(key)) !== null && i < options.depth) {                                               // 1074\n                                                                                                                      // 1075\n        ++i;                                                                                                          // 1076\n        keys.push(segment[1]);                                                                                        // 1077\n    }                                                                                                                 // 1078\n                                                                                                                      // 1079\n    // If there's a remainder, just add whatever is left                                                              // 1080\n                                                                                                                      // 1081\n    if (segment) {                                                                                                    // 1082\n        keys.push('[' + key.slice(segment.index) + ']');                                                              // 1083\n    }                                                                                                                 // 1084\n                                                                                                                      // 1085\n    return internals.parseObject(keys, val, options);                                                                 // 1086\n};                                                                                                                    // 1087\n                                                                                                                      // 1088\n                                                                                                                      // 1089\nmodule.exports = function (str, options) {                                                                            // 1090\n                                                                                                                      // 1091\n    if (str === '' ||                                                                                                 // 1092\n        str === null ||                                                                                               // 1093\n        typeof str === 'undefined') {                                                                                 // 1094\n                                                                                                                      // 1095\n        return Object.create(null);                                                                                   // 1096\n    }                                                                                                                 // 1097\n                                                                                                                      // 1098\n    options = options || {};                                                                                          // 1099\n    options.delimiter = typeof options.delimiter === 'string' || Utils.isRegExp(options.delimiter) ? options.delimiter : internals.delimiter;\n    options.depth = typeof options.depth === 'number' ? options.depth : internals.depth;                              // 1101\n    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : internals.arrayLimit;          // 1102\n    options.parseArrays = options.parseArrays !== false;                                                              // 1103\n    options.allowDots = options.allowDots !== false;                                                                  // 1104\n    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : internals.parameterLimit;\n    options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n                                                                                                                      // 1107\n                                                                                                                      // 1108\n    var tempObj = typeof str === 'string' ? internals.parseValues(str, options) : str;                                // 1109\n    var obj = Object.create(null);                                                                                    // 1110\n                                                                                                                      // 1111\n    // Iterate over the keys and setup the new object                                                                 // 1112\n                                                                                                                      // 1113\n    var keys = Object.keys(tempObj);                                                                                  // 1114\n    for (var i = 0, il = keys.length; i < il; ++i) {                                                                  // 1115\n        var key = keys[i];                                                                                            // 1116\n        var newObj = internals.parseKeys(key, tempObj[key], options);                                                 // 1117\n        obj = Utils.merge(obj, newObj);                                                                               // 1118\n    }                                                                                                                 // 1119\n                                                                                                                      // 1120\n    return Utils.compact(obj);                                                                                        // 1121\n};                                                                                                                    // 1122\n                                                                                                                      // 1123\n},{\"./utils\":9}],8:[function(require,module,exports){                                                                 // 1124\n// Load modules                                                                                                       // 1125\n                                                                                                                      // 1126\nvar Utils = require('./utils');                                                                                       // 1127\n                                                                                                                      // 1128\n                                                                                                                      // 1129\n// Declare internals                                                                                                  // 1130\n                                                                                                                      // 1131\nvar internals = {                                                                                                     // 1132\n    delimiter: '&',                                                                                                   // 1133\n    arrayPrefixGenerators: {                                                                                          // 1134\n        brackets: function (prefix, key) {                                                                            // 1135\n                                                                                                                      // 1136\n            return prefix + '[]';                                                                                     // 1137\n        },                                                                                                            // 1138\n        indices: function (prefix, key) {                                                                             // 1139\n                                                                                                                      // 1140\n            return prefix + '[' + key + ']';                                                                          // 1141\n        },                                                                                                            // 1142\n        repeat: function (prefix, key) {                                                                              // 1143\n                                                                                                                      // 1144\n            return prefix;                                                                                            // 1145\n        }                                                                                                             // 1146\n    },                                                                                                                // 1147\n    strictNullHandling: false                                                                                         // 1148\n};                                                                                                                    // 1149\n                                                                                                                      // 1150\n                                                                                                                      // 1151\ninternals.stringify = function (obj, prefix, generateArrayPrefix, strictNullHandling, filter) {                       // 1152\n                                                                                                                      // 1153\n    if (typeof filter === 'function') {                                                                               // 1154\n        obj = filter(prefix, obj);                                                                                    // 1155\n    }                                                                                                                 // 1156\n    else if (Utils.isBuffer(obj)) {                                                                                   // 1157\n        obj = obj.toString();                                                                                         // 1158\n    }                                                                                                                 // 1159\n    else if (obj instanceof Date) {                                                                                   // 1160\n        obj = obj.toISOString();                                                                                      // 1161\n    }                                                                                                                 // 1162\n    else if (obj === null) {                                                                                          // 1163\n        if (strictNullHandling) {                                                                                     // 1164\n            return Utils.encode(prefix);                                                                              // 1165\n        }                                                                                                             // 1166\n                                                                                                                      // 1167\n        obj = '';                                                                                                     // 1168\n    }                                                                                                                 // 1169\n                                                                                                                      // 1170\n    if (typeof obj === 'string' ||                                                                                    // 1171\n        typeof obj === 'number' ||                                                                                    // 1172\n        typeof obj === 'boolean') {                                                                                   // 1173\n                                                                                                                      // 1174\n        return [Utils.encode(prefix) + '=' + Utils.encode(obj)];                                                      // 1175\n    }                                                                                                                 // 1176\n                                                                                                                      // 1177\n    var values = [];                                                                                                  // 1178\n                                                                                                                      // 1179\n    if (typeof obj === 'undefined') {                                                                                 // 1180\n        return values;                                                                                                // 1181\n    }                                                                                                                 // 1182\n                                                                                                                      // 1183\n    var objKeys = Array.isArray(filter) ? filter : Object.keys(obj);                                                  // 1184\n    for (var i = 0, il = objKeys.length; i < il; ++i) {                                                               // 1185\n        var key = objKeys[i];                                                                                         // 1186\n                                                                                                                      // 1187\n        if (Array.isArray(obj)) {                                                                                     // 1188\n            values = values.concat(internals.stringify(obj[key], generateArrayPrefix(prefix, key), generateArrayPrefix, strictNullHandling, filter));\n        }                                                                                                             // 1190\n        else {                                                                                                        // 1191\n            values = values.concat(internals.stringify(obj[key], prefix + '[' + key + ']', generateArrayPrefix, strictNullHandling, filter));\n        }                                                                                                             // 1193\n    }                                                                                                                 // 1194\n                                                                                                                      // 1195\n    return values;                                                                                                    // 1196\n};                                                                                                                    // 1197\n                                                                                                                      // 1198\n                                                                                                                      // 1199\nmodule.exports = function (obj, options) {                                                                            // 1200\n                                                                                                                      // 1201\n    options = options || {};                                                                                          // 1202\n    var delimiter = typeof options.delimiter === 'undefined' ? internals.delimiter : options.delimiter;               // 1203\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n    var objKeys;                                                                                                      // 1205\n    var filter;                                                                                                       // 1206\n    if (typeof options.filter === 'function') {                                                                       // 1207\n        filter = options.filter;                                                                                      // 1208\n        obj = filter('', obj);                                                                                        // 1209\n    }                                                                                                                 // 1210\n    else if (Array.isArray(options.filter)) {                                                                         // 1211\n        objKeys = filter = options.filter;                                                                            // 1212\n    }                                                                                                                 // 1213\n                                                                                                                      // 1214\n    var keys = [];                                                                                                    // 1215\n                                                                                                                      // 1216\n    if (typeof obj !== 'object' ||                                                                                    // 1217\n        obj === null) {                                                                                               // 1218\n                                                                                                                      // 1219\n        return '';                                                                                                    // 1220\n    }                                                                                                                 // 1221\n                                                                                                                      // 1222\n    var arrayFormat;                                                                                                  // 1223\n    if (options.arrayFormat in internals.arrayPrefixGenerators) {                                                     // 1224\n        arrayFormat = options.arrayFormat;                                                                            // 1225\n    }                                                                                                                 // 1226\n    else if ('indices' in options) {                                                                                  // 1227\n        arrayFormat = options.indices ? 'indices' : 'repeat';                                                         // 1228\n    }                                                                                                                 // 1229\n    else {                                                                                                            // 1230\n        arrayFormat = 'indices';                                                                                      // 1231\n    }                                                                                                                 // 1232\n                                                                                                                      // 1233\n    var generateArrayPrefix = internals.arrayPrefixGenerators[arrayFormat];                                           // 1234\n                                                                                                                      // 1235\n    if (!objKeys) {                                                                                                   // 1236\n        objKeys = Object.keys(obj);                                                                                   // 1237\n    }                                                                                                                 // 1238\n    for (var i = 0, il = objKeys.length; i < il; ++i) {                                                               // 1239\n        var key = objKeys[i];                                                                                         // 1240\n        keys = keys.concat(internals.stringify(obj[key], key, generateArrayPrefix, strictNullHandling, filter));      // 1241\n    }                                                                                                                 // 1242\n                                                                                                                      // 1243\n    return keys.join(delimiter);                                                                                      // 1244\n};                                                                                                                    // 1245\n                                                                                                                      // 1246\n},{\"./utils\":9}],9:[function(require,module,exports){                                                                 // 1247\n// Load modules                                                                                                       // 1248\n                                                                                                                      // 1249\n                                                                                                                      // 1250\n// Declare internals                                                                                                  // 1251\n                                                                                                                      // 1252\nvar internals = {};                                                                                                   // 1253\ninternals.hexTable = new Array(256);                                                                                  // 1254\nfor (var i = 0; i < 256; ++i) {                                                                                       // 1255\n    internals.hexTable[i] = '%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase();                               // 1256\n}                                                                                                                     // 1257\n                                                                                                                      // 1258\n                                                                                                                      // 1259\nexports.arrayToObject = function (source) {                                                                           // 1260\n                                                                                                                      // 1261\n    var obj = Object.create(null);                                                                                    // 1262\n    for (var i = 0, il = source.length; i < il; ++i) {                                                                // 1263\n        if (typeof source[i] !== 'undefined') {                                                                       // 1264\n                                                                                                                      // 1265\n            obj[i] = source[i];                                                                                       // 1266\n        }                                                                                                             // 1267\n    }                                                                                                                 // 1268\n                                                                                                                      // 1269\n    return obj;                                                                                                       // 1270\n};                                                                                                                    // 1271\n                                                                                                                      // 1272\n                                                                                                                      // 1273\nexports.merge = function (target, source) {                                                                           // 1274\n                                                                                                                      // 1275\n    if (!source) {                                                                                                    // 1276\n        return target;                                                                                                // 1277\n    }                                                                                                                 // 1278\n                                                                                                                      // 1279\n    if (typeof source !== 'object') {                                                                                 // 1280\n        if (Array.isArray(target)) {                                                                                  // 1281\n            target.push(source);                                                                                      // 1282\n        }                                                                                                             // 1283\n        else if (typeof target === 'object') {                                                                        // 1284\n            target[source] = true;                                                                                    // 1285\n        }                                                                                                             // 1286\n        else {                                                                                                        // 1287\n            target = [target, source];                                                                                // 1288\n        }                                                                                                             // 1289\n                                                                                                                      // 1290\n        return target;                                                                                                // 1291\n    }                                                                                                                 // 1292\n                                                                                                                      // 1293\n    if (typeof target !== 'object') {                                                                                 // 1294\n        target = [target].concat(source);                                                                             // 1295\n        return target;                                                                                                // 1296\n    }                                                                                                                 // 1297\n                                                                                                                      // 1298\n    if (Array.isArray(target) &&                                                                                      // 1299\n        !Array.isArray(source)) {                                                                                     // 1300\n                                                                                                                      // 1301\n        target = exports.arrayToObject(target);                                                                       // 1302\n    }                                                                                                                 // 1303\n                                                                                                                      // 1304\n    var keys = Object.keys(source);                                                                                   // 1305\n    for (var k = 0, kl = keys.length; k < kl; ++k) {                                                                  // 1306\n        var key = keys[k];                                                                                            // 1307\n        var value = source[key];                                                                                      // 1308\n                                                                                                                      // 1309\n        if (!target[key]) {                                                                                           // 1310\n            target[key] = value;                                                                                      // 1311\n        }                                                                                                             // 1312\n        else {                                                                                                        // 1313\n            target[key] = exports.merge(target[key], value);                                                          // 1314\n        }                                                                                                             // 1315\n    }                                                                                                                 // 1316\n                                                                                                                      // 1317\n    return target;                                                                                                    // 1318\n};                                                                                                                    // 1319\n                                                                                                                      // 1320\n                                                                                                                      // 1321\nexports.decode = function (str) {                                                                                     // 1322\n                                                                                                                      // 1323\n    try {                                                                                                             // 1324\n        return decodeURIComponent(str.replace(/\\+/g, ' '));                                                           // 1325\n    } catch (e) {                                                                                                     // 1326\n        return str;                                                                                                   // 1327\n    }                                                                                                                 // 1328\n};                                                                                                                    // 1329\n                                                                                                                      // 1330\nexports.encode = function (str) {                                                                                     // 1331\n                                                                                                                      // 1332\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.               // 1333\n    // It has been adapted here for stricter adherence to RFC 3986                                                    // 1334\n    if (str.length === 0) {                                                                                           // 1335\n        return str;                                                                                                   // 1336\n    }                                                                                                                 // 1337\n                                                                                                                      // 1338\n    if (typeof str !== 'string') {                                                                                    // 1339\n        str = '' + str;                                                                                               // 1340\n    }                                                                                                                 // 1341\n                                                                                                                      // 1342\n    var out = '';                                                                                                     // 1343\n    for (var i = 0, il = str.length; i < il; ++i) {                                                                   // 1344\n        var c = str.charCodeAt(i);                                                                                    // 1345\n                                                                                                                      // 1346\n        if (c === 0x2D || // -                                                                                        // 1347\n            c === 0x2E || // .                                                                                        // 1348\n            c === 0x5F || // _                                                                                        // 1349\n            c === 0x7E || // ~                                                                                        // 1350\n            (c >= 0x30 && c <= 0x39) || // 0-9                                                                        // 1351\n            (c >= 0x41 && c <= 0x5A) || // a-z                                                                        // 1352\n            (c >= 0x61 && c <= 0x7A)) { // A-Z                                                                        // 1353\n                                                                                                                      // 1354\n            out += str[i];                                                                                            // 1355\n            continue;                                                                                                 // 1356\n        }                                                                                                             // 1357\n                                                                                                                      // 1358\n        if (c < 0x80) {                                                                                               // 1359\n            out += internals.hexTable[c];                                                                             // 1360\n            continue;                                                                                                 // 1361\n        }                                                                                                             // 1362\n                                                                                                                      // 1363\n        if (c < 0x800) {                                                                                              // 1364\n            out += internals.hexTable[0xC0 | (c >> 6)] + internals.hexTable[0x80 | (c & 0x3F)];                       // 1365\n            continue;                                                                                                 // 1366\n        }                                                                                                             // 1367\n                                                                                                                      // 1368\n        if (c < 0xD800 || c >= 0xE000) {                                                                              // 1369\n            out += internals.hexTable[0xE0 | (c >> 12)] + internals.hexTable[0x80 | ((c >> 6) & 0x3F)] + internals.hexTable[0x80 | (c & 0x3F)];\n            continue;                                                                                                 // 1371\n        }                                                                                                             // 1372\n                                                                                                                      // 1373\n        ++i;                                                                                                          // 1374\n        c = 0x10000 + (((c & 0x3FF) << 10) | (str.charCodeAt(i) & 0x3FF));                                            // 1375\n        out += internals.hexTable[0xF0 | (c >> 18)] + internals.hexTable[0x80 | ((c >> 12) & 0x3F)] + internals.hexTable[0x80 | ((c >> 6) & 0x3F)] + internals.hexTable[0x80 | (c & 0x3F)];\n    }                                                                                                                 // 1377\n                                                                                                                      // 1378\n    return out;                                                                                                       // 1379\n};                                                                                                                    // 1380\n                                                                                                                      // 1381\nexports.compact = function (obj, refs) {                                                                              // 1382\n                                                                                                                      // 1383\n    if (typeof obj !== 'object' ||                                                                                    // 1384\n        obj === null) {                                                                                               // 1385\n                                                                                                                      // 1386\n        return obj;                                                                                                   // 1387\n    }                                                                                                                 // 1388\n                                                                                                                      // 1389\n    refs = refs || [];                                                                                                // 1390\n    var lookup = refs.indexOf(obj);                                                                                   // 1391\n    if (lookup !== -1) {                                                                                              // 1392\n        return refs[lookup];                                                                                          // 1393\n    }                                                                                                                 // 1394\n                                                                                                                      // 1395\n    refs.push(obj);                                                                                                   // 1396\n                                                                                                                      // 1397\n    if (Array.isArray(obj)) {                                                                                         // 1398\n        var compacted = [];                                                                                           // 1399\n                                                                                                                      // 1400\n        for (var i = 0, il = obj.length; i < il; ++i) {                                                               // 1401\n            if (typeof obj[i] !== 'undefined') {                                                                      // 1402\n                compacted.push(obj[i]);                                                                               // 1403\n            }                                                                                                         // 1404\n        }                                                                                                             // 1405\n                                                                                                                      // 1406\n        return compacted;                                                                                             // 1407\n    }                                                                                                                 // 1408\n                                                                                                                      // 1409\n    var keys = Object.keys(obj);                                                                                      // 1410\n    for (i = 0, il = keys.length; i < il; ++i) {                                                                      // 1411\n        var key = keys[i];                                                                                            // 1412\n        obj[key] = exports.compact(obj[key], refs);                                                                   // 1413\n    }                                                                                                                 // 1414\n                                                                                                                      // 1415\n    return obj;                                                                                                       // 1416\n};                                                                                                                    // 1417\n                                                                                                                      // 1418\n                                                                                                                      // 1419\nexports.isRegExp = function (obj) {                                                                                   // 1420\n                                                                                                                      // 1421\n    return Object.prototype.toString.call(obj) === '[object RegExp]';                                                 // 1422\n};                                                                                                                    // 1423\n                                                                                                                      // 1424\n                                                                                                                      // 1425\nexports.isBuffer = function (obj) {                                                                                   // 1426\n                                                                                                                      // 1427\n    if (obj === null ||                                                                                               // 1428\n        typeof obj === 'undefined') {                                                                                 // 1429\n                                                                                                                      // 1430\n        return false;                                                                                                 // 1431\n    }                                                                                                                 // 1432\n                                                                                                                      // 1433\n    return !!(obj.constructor &&                                                                                      // 1434\n              obj.constructor.isBuffer &&                                                                             // 1435\n              obj.constructor.isBuffer(obj));                                                                         // 1436\n};                                                                                                                    // 1437\n                                                                                                                      // 1438\n},{}],10:[function(require,module,exports){                                                                           // 1439\npage = require('page');                                                                                               // 1440\nqs   = require('qs');                                                                                                 // 1441\n                                                                                                                      // 1442\n},{\"page\":2,\"qs\":5}]},{},[10])                                                                                        // 1443\n//# sourceMappingURL=kadira:flow-router/client.browserify.js                                                          // 1444\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      // 1446\n}).call(this);                                                                                                        // 1447\n                                                                                                                      // 1448\n                                                                                                                      // 1449\n                                                                                                                      // 1450\n                                                                                                                      // 1451\n                                                                                                                      // 1452\n                                                                                                                      // 1453\n(function () {                                                                                                        // 1454\n                                                                                                                      // 1455\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/kadira:flow-router/client/triggers.js                                                                     //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n// a set of utility functions for triggers                                                                            // 1\n                                                                                                                      // 2\nTriggers = {};                                                                                                        // 3\n                                                                                                                      // 4\n// Apply filters for a set of triggers                                                                                // 5\n// @triggers - a set of triggers                                                                                      // 6\n// @filter - filter with array fileds with `only` and `except`                                                        // 7\n//           support only either `only` or `except`, but not both                                                     // 8\nTriggers.applyFilters = function(triggers, filter) {                                                                  // 9\n  if(!(triggers instanceof Array)) {                                                                                  // 10\n    triggers = [triggers];                                                                                            // 11\n  }                                                                                                                   // 12\n                                                                                                                      // 13\n  if(!filter) {                                                                                                       // 14\n    return triggers;                                                                                                  // 15\n  }                                                                                                                   // 16\n                                                                                                                      // 17\n  if(filter.only && filter.except) {                                                                                  // 18\n    throw new Error(\"Triggers don't support only and except filters at once\");                                        // 19\n  }                                                                                                                   // 20\n                                                                                                                      // 21\n  if(filter.only && !(filter.only instanceof Array)) {                                                                // 22\n    throw new Error(\"only filters needs to be an array\");                                                             // 23\n  }                                                                                                                   // 24\n                                                                                                                      // 25\n  if(filter.except && !(filter.except instanceof Array)) {                                                            // 26\n    throw new Error(\"except filters needs to be an array\");                                                           // 27\n  }                                                                                                                   // 28\n                                                                                                                      // 29\n  if(filter.only) {                                                                                                   // 30\n    return Triggers.createRouteBoundTriggers(triggers, filter.only);                                                  // 31\n  }                                                                                                                   // 32\n                                                                                                                      // 33\n  if(filter.except) {                                                                                                 // 34\n    return Triggers.createRouteBoundTriggers(triggers, filter.except, true);                                          // 35\n  }                                                                                                                   // 36\n                                                                                                                      // 37\n  throw new Error(\"Provided a filter but not supported\");                                                             // 38\n};                                                                                                                    // 39\n                                                                                                                      // 40\n//  create triggers by bounding them to a set of route names                                                          // 41\n//  @triggers - a set of triggers                                                                                     // 42\n//  @names - list of route names to be bound (trigger runs only for these names)                                      // 43\n//  @negate - negate the result (triggers won't run for above names)                                                  // 44\nTriggers.createRouteBoundTriggers = function(triggers, names, negate) {                                               // 45\n  var namesMap = {};                                                                                                  // 46\n  _.each(names, function(name) {                                                                                      // 47\n    namesMap[name] = true;                                                                                            // 48\n  });                                                                                                                 // 49\n                                                                                                                      // 50\n  var filteredTriggers = _.map(triggers, function(originalTrigger) {                                                  // 51\n    var modifiedTrigger = function(context, next) {                                                                   // 52\n      var routeName = context.route.name;                                                                             // 53\n      var matched = (namesMap[routeName])? 1: -1;                                                                     // 54\n      matched = (negate)? matched * -1 : matched;                                                                     // 55\n                                                                                                                      // 56\n      if(matched === 1) {                                                                                             // 57\n        originalTrigger(context, next);                                                                               // 58\n      }                                                                                                               // 59\n    };                                                                                                                // 60\n    return modifiedTrigger;                                                                                           // 61\n  });                                                                                                                 // 62\n                                                                                                                      // 63\n  return filteredTriggers;                                                                                            // 64\n};                                                                                                                    // 65\n                                                                                                                      // 66\n//  run triggers and abort if redirected or callback stopped                                                          // 67\n//  @triggers - a set of triggers                                                                                     // 68\n//  @context - context we need to pass (it must have the route)                                                       // 69\n//  @redirectFn - function which used to redirect                                                                     // 70\n//  @after - called after if only all the triggers runs                                                               // 71\nTriggers.runTriggers = function(triggers, context, redirectFn, after) {                                               // 72\n  var abort = false;                                                                                                  // 73\n  var inCurrentLoop = true;                                                                                           // 74\n  var alreadyRedirected = false;                                                                                      // 75\n                                                                                                                      // 76\n  for(var lc=0; lc<triggers.length; lc++) {                                                                           // 77\n    var trigger = triggers[lc];                                                                                       // 78\n    trigger(context, doRedirect, doStop);                                                                             // 79\n                                                                                                                      // 80\n    if(abort) {                                                                                                       // 81\n      return;                                                                                                         // 82\n    }                                                                                                                 // 83\n  }                                                                                                                   // 84\n                                                                                                                      // 85\n  // mark that, we've exceeds the currentEventloop for                                                                // 86\n  // this set of triggers.                                                                                            // 87\n  inCurrentLoop = false;                                                                                              // 88\n  after();                                                                                                            // 89\n                                                                                                                      // 90\n  function doRedirect(url, params, queryParams) {                                                                     // 91\n    if(alreadyRedirected) {                                                                                           // 92\n      throw new Error(\"already redirected\");                                                                          // 93\n    }                                                                                                                 // 94\n                                                                                                                      // 95\n    if(!inCurrentLoop) {                                                                                              // 96\n      throw new Error(\"redirect needs to be done in sync\");                                                           // 97\n    }                                                                                                                 // 98\n                                                                                                                      // 99\n    if(!url) {                                                                                                        // 100\n      throw new Error(\"trigger redirect requires an URL\");                                                            // 101\n    }                                                                                                                 // 102\n                                                                                                                      // 103\n    abort = true;                                                                                                     // 104\n    alreadyRedirected = true;                                                                                         // 105\n    redirectFn(url, params, queryParams);                                                                             // 106\n  }                                                                                                                   // 107\n                                                                                                                      // 108\n  function doStop() {                                                                                                 // 109\n    abort = true;                                                                                                     // 110\n  }                                                                                                                   // 111\n};                                                                                                                    // 112\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      // 1575\n}).call(this);                                                                                                        // 1576\n                                                                                                                      // 1577\n                                                                                                                      // 1578\n                                                                                                                      // 1579\n                                                                                                                      // 1580\n                                                                                                                      // 1581\n                                                                                                                      // 1582\n(function () {                                                                                                        // 1583\n                                                                                                                      // 1584\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/kadira:flow-router/client/router.js                                                                       //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nRouter = function () {                                                                                                // 1\n  var self = this;                                                                                                    // 2\n  this.globals = [];                                                                                                  // 3\n  this.subscriptions = Function.prototype;                                                                            // 4\n                                                                                                                      // 5\n  this._tracker = this._buildTracker();                                                                               // 6\n  this._current = {};                                                                                                 // 7\n                                                                                                                      // 8\n  // tracks the current path change                                                                                   // 9\n  this._onEveryPath = new Tracker.Dependency();                                                                       // 10\n                                                                                                                      // 11\n  this._globalRoute = new Route(this);                                                                                // 12\n                                                                                                                      // 13\n  // holds onRoute callbacks                                                                                          // 14\n  this._onRouteCallbacks = [];                                                                                        // 15\n                                                                                                                      // 16\n  // if _askedToWait is true. We don't automatically start the router                                                 // 17\n  // in Meteor.startup callback. (see client/_init.js)                                                                // 18\n  // Instead user need to call `.initialize()                                                                         // 19\n  this._askedToWait = false;                                                                                          // 20\n  this._initialized = false;                                                                                          // 21\n  this._triggersEnter = [];                                                                                           // 22\n  this._triggersExit = [];                                                                                            // 23\n  this._routes = [];                                                                                                  // 24\n  this._routesMap = {};                                                                                               // 25\n  this._updateCallbacks();                                                                                            // 26\n  this.notFound = this.notfound = null;                                                                               // 27\n  // indicate it's okay (or not okay) to run the tracker                                                              // 28\n  // when doing subscriptions                                                                                         // 29\n  // using a number and increment it help us to support FlowRouter.go()                                               // 30\n  // and legitimate reruns inside tracker on the same event loop.                                                     // 31\n  // this is a solution for #145                                                                                      // 32\n  this.safeToRun = 0;                                                                                                 // 33\n                                                                                                                      // 34\n  // this is a chain contains a list of old routes                                                                    // 35\n  // most of the time, there is only one old route                                                                    // 36\n  // but when it's the time for a trigger redirect we've a chain                                                      // 37\n  this._oldRouteChain = [];                                                                                           // 38\n                                                                                                                      // 39\n  this.env = {                                                                                                        // 40\n    replaceState: new Meteor.EnvironmentVariable(),                                                                   // 41\n    reload: new Meteor.EnvironmentVariable(),                                                                         // 42\n    trailingSlash: new Meteor.EnvironmentVariable()                                                                   // 43\n  };                                                                                                                  // 44\n                                                                                                                      // 45\n  // redirect function used inside triggers                                                                           // 46\n  this._redirectFn = function(pathDef, fields, queryParams) {                                                         // 47\n    self.withReplaceState(function() {                                                                                // 48\n      var path = FlowRouter.path(pathDef, fields, queryParams);                                                       // 49\n      self._page.redirect(path);                                                                                      // 50\n    });                                                                                                               // 51\n  };                                                                                                                  // 52\n  this._initTriggersAPI();                                                                                            // 53\n};                                                                                                                    // 54\n                                                                                                                      // 55\nRouter.prototype.route = function(pathDef, options, group) {                                                          // 56\n  if (!/^\\/.*/.test(pathDef)) {                                                                                       // 57\n    var message = \"route's path must start with '/'\";                                                                 // 58\n    throw new Error(message);                                                                                         // 59\n  }                                                                                                                   // 60\n                                                                                                                      // 61\n  options = options || {};                                                                                            // 62\n  var self = this;                                                                                                    // 63\n  var route = new Route(this, pathDef, options, group);                                                               // 64\n                                                                                                                      // 65\n  // calls when the page route being activates                                                                        // 66\n  route._actionHandle = function (context, next) {                                                                    // 67\n    var oldRoute = self._current.route;                                                                               // 68\n    self._oldRouteChain.push(oldRoute);                                                                               // 69\n                                                                                                                      // 70\n    var queryParams = self._qs.parse(context.querystring);                                                            // 71\n    // _qs.parse() gives us a object without prototypes,                                                              // 72\n    // created with Object.create(null)                                                                               // 73\n    // Meteor's check doesn't play nice with it.                                                                      // 74\n    // So, we need to fix it by cloning it.                                                                           // 75\n    // see more: https://github.com/meteorhacks/flow-router/issues/164                                                // 76\n    queryParams = JSON.parse(JSON.stringify(queryParams));                                                            // 77\n                                                                                                                      // 78\n    self._current = {                                                                                                 // 79\n      path: context.path,                                                                                             // 80\n      context: context,                                                                                               // 81\n      params: context.params,                                                                                         // 82\n      queryParams: queryParams,                                                                                       // 83\n      route: route,                                                                                                   // 84\n      oldRoute: oldRoute                                                                                              // 85\n    };                                                                                                                // 86\n                                                                                                                      // 87\n    // we need to invalidate if all the triggers have been completed                                                  // 88\n    // if not that means, we've been redirected to another path                                                       // 89\n    // then we don't need to invalidate                                                                               // 90\n    var afterAllTriggersRan = function() {                                                                            // 91\n      self._invalidateTracker();                                                                                      // 92\n    };                                                                                                                // 93\n                                                                                                                      // 94\n    var triggers = self._triggersEnter.concat(route._triggersEnter);                                                  // 95\n    Triggers.runTriggers(                                                                                             // 96\n      triggers,                                                                                                       // 97\n      self._current,                                                                                                  // 98\n      self._redirectFn,                                                                                               // 99\n      afterAllTriggersRan                                                                                             // 100\n    );                                                                                                                // 101\n  };                                                                                                                  // 102\n                                                                                                                      // 103\n  // calls when you exit from the page js route                                                                       // 104\n  route._exitHandle = function(context, next) {                                                                       // 105\n    var triggers = self._triggersExit.concat(route._triggersExit);                                                    // 106\n    Triggers.runTriggers(                                                                                             // 107\n      triggers,                                                                                                       // 108\n      self._current,                                                                                                  // 109\n      self._redirectFn,                                                                                               // 110\n      next                                                                                                            // 111\n    );                                                                                                                // 112\n  };                                                                                                                  // 113\n                                                                                                                      // 114\n  this._routes.push(route);                                                                                           // 115\n  if (options.name) {                                                                                                 // 116\n    this._routesMap[options.name] = route;                                                                            // 117\n  }                                                                                                                   // 118\n                                                                                                                      // 119\n  this._updateCallbacks();                                                                                            // 120\n  this._triggerRouteRegister(route);                                                                                  // 121\n                                                                                                                      // 122\n  return route;                                                                                                       // 123\n};                                                                                                                    // 124\n                                                                                                                      // 125\nRouter.prototype.group = function(options) {                                                                          // 126\n  return new Group(this, options);                                                                                    // 127\n};                                                                                                                    // 128\n                                                                                                                      // 129\nRouter.prototype.path = function(pathDef, fields, queryParams) {                                                      // 130\n  if (this._routesMap[pathDef]) {                                                                                     // 131\n    pathDef = this._routesMap[pathDef].pathDef;                                                                       // 132\n  }                                                                                                                   // 133\n                                                                                                                      // 134\n  fields = fields || {};                                                                                              // 135\n  var regExp = /(:[\\w\\(\\)\\\\\\+\\*\\.\\?]+)+/g;                                                                            // 136\n  var path = pathDef.replace(regExp, function(key) {                                                                  // 137\n    var firstRegexpChar = key.indexOf(\"(\");                                                                           // 138\n    // get the content behind : and (\\\\d+/)                                                                           // 139\n    key = key.substring(1, (firstRegexpChar > 0)? firstRegexpChar: undefined);                                        // 140\n    // remove +?*                                                                                                     // 141\n    key = key.replace(/[\\+\\*\\?]+/g, \"\");                                                                              // 142\n                                                                                                                      // 143\n    // this is to allow page js to keep the custom characters as it is                                                // 144\n    // we need to encode 2 times otherwise \"/\" char does not work properly                                            // 145\n    // So, in that case, when I includes \"/\" it will think it's a part of the                                         // 146\n    // route. encoding 2times fixes it                                                                                // 147\n    return encodeURIComponent(encodeURIComponent(fields[key] || \"\"));                                                 // 148\n  });                                                                                                                 // 149\n                                                                                                                      // 150\n  path = path.replace(/\\/\\/+/g, \"/\"); // Replace multiple slashes with single slash                                   // 151\n                                                                                                                      // 152\n  // remove trailing slash                                                                                            // 153\n  // but keep the root slash if it's the only one                                                                     // 154\n  path = path.match(/^\\/{1}$/) ? path: path.replace(/\\/$/, \"\");                                                       // 155\n                                                                                                                      // 156\n  // explictly asked to add a trailing slash                                                                          // 157\n  if(this.env.trailingSlash.get() && _.last(path) !== \"/\") {                                                          // 158\n    path += \"/\";                                                                                                      // 159\n  }                                                                                                                   // 160\n                                                                                                                      // 161\n  var strQueryParams = this._qs.stringify(queryParams || {});                                                         // 162\n  if(strQueryParams) {                                                                                                // 163\n    path += \"?\" + strQueryParams;                                                                                     // 164\n  }                                                                                                                   // 165\n                                                                                                                      // 166\n  return path;                                                                                                        // 167\n};                                                                                                                    // 168\n                                                                                                                      // 169\nRouter.prototype.go = function(pathDef, fields, queryParams) {                                                        // 170\n  var path = this.path(pathDef, fields, queryParams);                                                                 // 171\n                                                                                                                      // 172\n  var useReplaceState = this.env.replaceState.get();                                                                  // 173\n  if(useReplaceState) {                                                                                               // 174\n    this._page.replace(path);                                                                                         // 175\n  } else {                                                                                                            // 176\n    this._page(path);                                                                                                 // 177\n  }                                                                                                                   // 178\n};                                                                                                                    // 179\n                                                                                                                      // 180\nRouter.prototype.reload = function() {                                                                                // 181\n  var self = this;                                                                                                    // 182\n                                                                                                                      // 183\n  self.env.reload.withValue(true, function() {                                                                        // 184\n    self._page.replace(self._current.path);                                                                           // 185\n  });                                                                                                                 // 186\n};                                                                                                                    // 187\n                                                                                                                      // 188\nRouter.prototype.redirect = function(path) {                                                                          // 189\n  this._page.redirect(path);                                                                                          // 190\n};                                                                                                                    // 191\n                                                                                                                      // 192\nRouter.prototype.setParams = function(newParams) {                                                                    // 193\n  if(!this._current.route) {return false;}                                                                            // 194\n                                                                                                                      // 195\n  var pathDef = this._current.route.pathDef;                                                                          // 196\n  var existingParams = this._current.params;                                                                          // 197\n  var params = {};                                                                                                    // 198\n  _.each(_.keys(existingParams), function(key) {                                                                      // 199\n    params[key] = existingParams[key];                                                                                // 200\n  });                                                                                                                 // 201\n                                                                                                                      // 202\n  params = _.extend(params, newParams);                                                                               // 203\n  var queryParams = this._current.queryParams;                                                                        // 204\n                                                                                                                      // 205\n  this.go(pathDef, params, queryParams);                                                                              // 206\n  return true;                                                                                                        // 207\n};                                                                                                                    // 208\n                                                                                                                      // 209\nRouter.prototype.setQueryParams = function(newParams) {                                                               // 210\n  if(!this._current.route) {return false;}                                                                            // 211\n                                                                                                                      // 212\n  var queryParams = _.clone(this._current.queryParams);                                                               // 213\n  _.extend(queryParams, newParams);                                                                                   // 214\n                                                                                                                      // 215\n  for (var k in queryParams) {                                                                                        // 216\n    if (queryParams[k] === null || queryParams[k] === undefined) {                                                    // 217\n      delete queryParams[k];                                                                                          // 218\n    }                                                                                                                 // 219\n  }                                                                                                                   // 220\n                                                                                                                      // 221\n  var pathDef = this._current.route.pathDef;                                                                          // 222\n  var params = this._current.params;                                                                                  // 223\n  this.go(pathDef, params, queryParams);                                                                              // 224\n  return true;                                                                                                        // 225\n};                                                                                                                    // 226\n                                                                                                                      // 227\n// .current is not reactive                                                                                           // 228\n// This is by design. use .getParam() instead                                                                         // 229\n// If you really need to watch the path change, use .watchPathChange()                                                // 230\nRouter.prototype.current = function() {                                                                               // 231\n  return this._current;                                                                                               // 232\n};                                                                                                                    // 233\n                                                                                                                      // 234\n// Implementing Reactive APIs                                                                                         // 235\nvar reactiveApis = [                                                                                                  // 236\n  'getParam', 'getQueryParam',                                                                                        // 237\n  'getRouteName', 'watchPathChange'                                                                                   // 238\n];                                                                                                                    // 239\nreactiveApis.forEach(function(api) {                                                                                  // 240\n  Router.prototype[api] = function(arg1) {                                                                            // 241\n    // when this is calling, there may not be any route initiated                                                     // 242\n    // so we need to handle it                                                                                        // 243\n    var currentRoute = this._current.route;                                                                           // 244\n    if(!currentRoute) {                                                                                               // 245\n      this._onEveryPath.depend();                                                                                     // 246\n      return;                                                                                                         // 247\n    }                                                                                                                 // 248\n                                                                                                                      // 249\n    // currently, there is only one argument. If we've more let's add more args                                       // 250\n    // this is not clean code, but better in performance                                                              // 251\n    return currentRoute[api].call(currentRoute, arg1);                                                                // 252\n  };                                                                                                                  // 253\n});                                                                                                                   // 254\n                                                                                                                      // 255\nRouter.prototype.subsReady = function() {                                                                             // 256\n  var callback = null;                                                                                                // 257\n  var args = _.toArray(arguments);                                                                                    // 258\n                                                                                                                      // 259\n  if (typeof _.last(args) === \"function\") {                                                                           // 260\n    callback = args.pop();                                                                                            // 261\n  }                                                                                                                   // 262\n                                                                                                                      // 263\n  var currentRoute = this.current().route;                                                                            // 264\n  var globalRoute = this._globalRoute;                                                                                // 265\n                                                                                                                      // 266\n  // we need to depend for every route change and                                                                     // 267\n  // rerun subscriptions to check the ready state                                                                     // 268\n  this._onEveryPath.depend();                                                                                         // 269\n                                                                                                                      // 270\n  if(!currentRoute) {                                                                                                 // 271\n    return false;                                                                                                     // 272\n  }                                                                                                                   // 273\n                                                                                                                      // 274\n  var subscriptions;                                                                                                  // 275\n  if(args.length === 0) {                                                                                             // 276\n    subscriptions = _.values(globalRoute.getAllSubscriptions());                                                      // 277\n    subscriptions = subscriptions.concat(_.values(currentRoute.getAllSubscriptions()));                               // 278\n  } else {                                                                                                            // 279\n    subscriptions = _.map(args, function(subName) {                                                                   // 280\n      return globalRoute.getSubscription(subName) || currentRoute.getSubscription(subName);                           // 281\n    });                                                                                                               // 282\n  }                                                                                                                   // 283\n                                                                                                                      // 284\n  var isReady = function() {                                                                                          // 285\n    var ready =  _.every(subscriptions, function(sub) {                                                               // 286\n      return sub && sub.ready();                                                                                      // 287\n    });                                                                                                               // 288\n                                                                                                                      // 289\n    return ready;                                                                                                     // 290\n  };                                                                                                                  // 291\n                                                                                                                      // 292\n  if (callback) {                                                                                                     // 293\n    Tracker.autorun(function(c) {                                                                                     // 294\n      if (isReady()) {                                                                                                // 295\n        callback();                                                                                                   // 296\n        c.stop();                                                                                                     // 297\n      }                                                                                                               // 298\n    });                                                                                                               // 299\n  } else {                                                                                                            // 300\n    return isReady();                                                                                                 // 301\n  }                                                                                                                   // 302\n};                                                                                                                    // 303\n                                                                                                                      // 304\nRouter.prototype.withReplaceState = function(fn) {                                                                    // 305\n  return this.env.replaceState.withValue(true, fn);                                                                   // 306\n};                                                                                                                    // 307\n                                                                                                                      // 308\nRouter.prototype.withTrailingSlash = function(fn) {                                                                   // 309\n  return this.env.trailingSlash.withValue(true, fn);                                                                  // 310\n};                                                                                                                    // 311\n                                                                                                                      // 312\nRouter.prototype._notfoundRoute = function(context) {                                                                 // 313\n  this._current = {                                                                                                   // 314\n    path: context.path,                                                                                               // 315\n    context: context,                                                                                                 // 316\n    params: [],                                                                                                       // 317\n    queryParams: {},                                                                                                  // 318\n  };                                                                                                                  // 319\n                                                                                                                      // 320\n  // XXX this.notfound kept for backwards compatibility                                                               // 321\n  this.notFound = this.notFound || this.notfound;                                                                     // 322\n  if(!this.notFound) {                                                                                                // 323\n    console.error(\"There is no route for the path:\", context.path);                                                   // 324\n    return;                                                                                                           // 325\n  }                                                                                                                   // 326\n                                                                                                                      // 327\n  this._current.route = new Route(this, \"*\", this.notFound);                                                          // 328\n  this._invalidateTracker();                                                                                          // 329\n};                                                                                                                    // 330\n                                                                                                                      // 331\nRouter.prototype.initialize = function(options) {                                                                     // 332\n  options = options || {};                                                                                            // 333\n                                                                                                                      // 334\n  if(this._initialized) {                                                                                             // 335\n    throw new Error(\"FlowRouter is already initialized\");                                                             // 336\n  }                                                                                                                   // 337\n                                                                                                                      // 338\n  var self = this;                                                                                                    // 339\n  this._updateCallbacks();                                                                                            // 340\n                                                                                                                      // 341\n  // Implementing idempotent routing                                                                                  // 342\n  // by overriding page.js`s \"show\" method.                                                                           // 343\n  // Why?                                                                                                             // 344\n  // It is impossible to bypass exit triggers,                                                                        // 345\n  // becuase they execute before the handler and                                                                      // 346\n  // can not know what the next path is, inside exit trigger.                                                         // 347\n  //                                                                                                                  // 348\n  // we need override both show, replace to make this work                                                            // 349\n  // since we use redirect when we are talking about withReplaceState                                                 // 350\n  _.each(['show', 'replace'], function(fnName) {                                                                      // 351\n    var original = self._page[fnName];                                                                                // 352\n    self._page[fnName] = function(path, state, dispatch, push) {                                                      // 353\n      var reload = self.env.reload.get();                                                                             // 354\n      if (!reload && self._current.path === path) {                                                                   // 355\n        return;                                                                                                       // 356\n      }                                                                                                               // 357\n                                                                                                                      // 358\n      original.call(this, path, state, dispatch, push);                                                               // 359\n    };                                                                                                                // 360\n  });                                                                                                                 // 361\n                                                                                                                      // 362\n  // this is very ugly part of pagejs and it does decoding few times                                                  // 363\n  // in unpredicatable manner. See #168                                                                               // 364\n  // this is the default behaviour and we need keep it like that                                                      // 365\n  // we are doing a hack. see .path()                                                                                 // 366\n  this._page({decodeURLComponents: true, hashbang: !!options.hashbang});                                              // 367\n  this._initialized = true;                                                                                           // 368\n};                                                                                                                    // 369\n                                                                                                                      // 370\nRouter.prototype._buildTracker = function() {                                                                         // 371\n  var self = this;                                                                                                    // 372\n                                                                                                                      // 373\n  // main autorun function                                                                                            // 374\n  var tracker = Tracker.autorun(function () {                                                                         // 375\n    if(!self._current || !self._current.route) {                                                                      // 376\n      return;                                                                                                         // 377\n    }                                                                                                                 // 378\n                                                                                                                      // 379\n    // see the definition of `this._processingContexts`                                                               // 380\n    var currentContext = self._current;                                                                               // 381\n    var route = currentContext.route;                                                                                 // 382\n    var path = currentContext.path;                                                                                   // 383\n                                                                                                                      // 384\n    if(self.safeToRun === 0) {                                                                                        // 385\n      var message =                                                                                                   // 386\n        \"You can't use reactive data sources like Session\" +                                                          // 387\n        \" inside the `.subscriptions` method!\";                                                                       // 388\n      throw new Error(message);                                                                                       // 389\n    }                                                                                                                 // 390\n                                                                                                                      // 391\n    // We need to run subscriptions inside a Tracker                                                                  // 392\n    // to stop subs when switching between routes                                                                     // 393\n    // But we don't need to run this tracker with                                                                     // 394\n    // other reactive changes inside the .subscription method                                                         // 395\n    // We tackle this with the `safeToRun` variable                                                                   // 396\n    self._globalRoute.clearSubscriptions();                                                                           // 397\n    self.subscriptions.call(self._globalRoute, path);                                                                 // 398\n    route.callSubscriptions(currentContext);                                                                          // 399\n                                                                                                                      // 400\n    // otherwise, computations inside action will trigger to re-run                                                   // 401\n    // this computation. which we do not need.                                                                        // 402\n    Tracker.nonreactive(function() {                                                                                  // 403\n      var isRouteChange = currentContext.oldRoute !== currentContext.route;                                           // 404\n      var isFirstRoute = !currentContext.oldRoute;                                                                    // 405\n      // first route is not a route change                                                                            // 406\n      if(isFirstRoute) {                                                                                              // 407\n        isRouteChange = false;                                                                                        // 408\n      }                                                                                                               // 409\n                                                                                                                      // 410\n      // Clear oldRouteChain just before calling the action                                                           // 411\n      // We still need to get a copy of the oldestRoute first                                                         // 412\n      // It's very important to get the oldest route and registerRouteClose() it                                      // 413\n      // See: https://github.com/kadirahq/flow-router/issues/314                                                      // 414\n      var oldestRoute = self._oldRouteChain[0];                                                                       // 415\n      self._oldRouteChain = [];                                                                                       // 416\n                                                                                                                      // 417\n      currentContext.route.registerRouteChange(currentContext, isRouteChange);                                        // 418\n      route.callAction(currentContext);                                                                               // 419\n                                                                                                                      // 420\n      Tracker.afterFlush(function() {                                                                                 // 421\n        self._onEveryPath.changed();                                                                                  // 422\n        if(isRouteChange) {                                                                                           // 423\n          // We need to trigger that route (definition itself) has changed.                                           // 424\n          // So, we need to re-run all the register callbacks to current route                                        // 425\n          // This is pretty important, otherwise tracker                                                              // 426\n          // can't identify new route's items                                                                         // 427\n                                                                                                                      // 428\n          // We also need to afterFlush, otherwise this will re-run                                                   // 429\n          // helpers on templates which are marked for destroying                                                     // 430\n          if(oldestRoute) {                                                                                           // 431\n            oldestRoute.registerRouteClose();                                                                         // 432\n          }                                                                                                           // 433\n        }                                                                                                             // 434\n      });                                                                                                             // 435\n    });                                                                                                               // 436\n                                                                                                                      // 437\n    self.safeToRun--;                                                                                                 // 438\n  });                                                                                                                 // 439\n                                                                                                                      // 440\n  return tracker;                                                                                                     // 441\n};                                                                                                                    // 442\n                                                                                                                      // 443\nRouter.prototype._invalidateTracker = function() {                                                                    // 444\n  var self = this;                                                                                                    // 445\n  this.safeToRun++;                                                                                                   // 446\n  this._tracker.invalidate();                                                                                         // 447\n  // After the invalidation we need to flush to make changes imediately                                               // 448\n  // otherwise, we have face some issues context mix-maches and so on.                                                // 449\n  // But there are some cases we can't flush. So we need to ready for that.                                           // 450\n                                                                                                                      // 451\n  // we clearly know, we can't flush inside an autorun                                                                // 452\n  // this may leads some issues on flow-routing                                                                       // 453\n  // we may need to do some warning                                                                                   // 454\n  if(!Tracker.currentComputation) {                                                                                   // 455\n    // Still there are some cases where we can't flush                                                                // 456\n    //  eg:- when there is a flush currently                                                                          // 457\n    // But we've no public API or hacks to get that state                                                             // 458\n    // So, this is the only solution                                                                                  // 459\n    try {                                                                                                             // 460\n      Tracker.flush();                                                                                                // 461\n    } catch(ex) {                                                                                                     // 462\n      // only handling \"while flushing\" errors                                                                        // 463\n      if(!/Tracker\\.flush while flushing/.test(ex.message)) {                                                         // 464\n        return;                                                                                                       // 465\n      }                                                                                                               // 466\n                                                                                                                      // 467\n      // XXX: fix this with a proper solution by removing subscription mgt.                                           // 468\n      // from the router. Then we don't need to run invalidate using a tracker                                        // 469\n                                                                                                                      // 470\n      // this happens when we are trying to invoke a route change                                                     // 471\n      // with inside a route chnage. (eg:- Template.onCreated)                                                        // 472\n      // Since we use page.js and tracker, we don't have much control                                                 // 473\n      // over this process.                                                                                           // 474\n      // only solution is to defer route execution.                                                                   // 475\n                                                                                                                      // 476\n      // It's possible to have more than one path want to defer                                                       // 477\n      // But, we only need to pick the last one.                                                                      // 478\n      // self._nextPath = self._current.path;                                                                         // 479\n      Meteor.defer(function() {                                                                                       // 480\n        var path = self._nextPath;                                                                                    // 481\n        if(!path) {                                                                                                   // 482\n          return;                                                                                                     // 483\n        }                                                                                                             // 484\n                                                                                                                      // 485\n        delete self._nextPath;                                                                                        // 486\n        self.env.reload.withValue(true, function() {                                                                  // 487\n          self.go(path);                                                                                              // 488\n        });                                                                                                           // 489\n      });                                                                                                             // 490\n    }                                                                                                                 // 491\n  }                                                                                                                   // 492\n};                                                                                                                    // 493\n                                                                                                                      // 494\nRouter.prototype._updateCallbacks = function () {                                                                     // 495\n  var self = this;                                                                                                    // 496\n                                                                                                                      // 497\n  self._page.callbacks = [];                                                                                          // 498\n  self._page.exits = [];                                                                                              // 499\n                                                                                                                      // 500\n  _.each(self._routes, function(route) {                                                                              // 501\n    self._page(route.pathDef, route._actionHandle);                                                                   // 502\n    self._page.exit(route.pathDef, route._exitHandle);                                                                // 503\n  });                                                                                                                 // 504\n                                                                                                                      // 505\n  self._page(\"*\", function(context) {                                                                                 // 506\n    self._notfoundRoute(context);                                                                                     // 507\n  });                                                                                                                 // 508\n};                                                                                                                    // 509\n                                                                                                                      // 510\nRouter.prototype._initTriggersAPI = function() {                                                                      // 511\n  var self = this;                                                                                                    // 512\n  this.triggers = {                                                                                                   // 513\n    enter: function(triggers, filter) {                                                                               // 514\n      triggers = Triggers.applyFilters(triggers, filter);                                                             // 515\n      if(triggers.length) {                                                                                           // 516\n        self._triggersEnter = self._triggersEnter.concat(triggers);                                                   // 517\n      }                                                                                                               // 518\n    },                                                                                                                // 519\n                                                                                                                      // 520\n    exit: function(triggers, filter) {                                                                                // 521\n      triggers = Triggers.applyFilters(triggers, filter);                                                             // 522\n      if(triggers.length) {                                                                                           // 523\n        self._triggersExit = self._triggersExit.concat(triggers);                                                     // 524\n      }                                                                                                               // 525\n    }                                                                                                                 // 526\n  };                                                                                                                  // 527\n};                                                                                                                    // 528\n                                                                                                                      // 529\nRouter.prototype.wait = function() {                                                                                  // 530\n  if(this._initialized) {                                                                                             // 531\n    throw new Error(\"can't wait after FlowRouter has been initialized\");                                              // 532\n  }                                                                                                                   // 533\n                                                                                                                      // 534\n  this._askedToWait = true;                                                                                           // 535\n};                                                                                                                    // 536\n                                                                                                                      // 537\nRouter.prototype.onRouteRegister = function(cb) {                                                                     // 538\n  this._onRouteCallbacks.push(cb);                                                                                    // 539\n};                                                                                                                    // 540\n                                                                                                                      // 541\nRouter.prototype._triggerRouteRegister = function(currentRoute) {                                                     // 542\n  // We should only need to send a safe set of fields on the route                                                    // 543\n  // object.                                                                                                          // 544\n  // This is not to hide what's inside the route object, but to show                                                  // 545\n  // these are the public APIs                                                                                        // 546\n  var routePublicApi = _.pick(currentRoute, 'name', 'pathDef', 'path');                                               // 547\n  var omittingOptionFields = [                                                                                        // 548\n    'triggersEnter', 'triggersExit', 'action', 'subscriptions', 'name'                                                // 549\n  ];                                                                                                                  // 550\n  routePublicApi.options = _.omit(currentRoute.options, omittingOptionFields);                                        // 551\n                                                                                                                      // 552\n  _.each(this._onRouteCallbacks, function(cb) {                                                                       // 553\n    cb(routePublicApi);                                                                                               // 554\n  });                                                                                                                 // 555\n};                                                                                                                    // 556\n                                                                                                                      // 557\nRouter.prototype._page = page;                                                                                        // 558\nRouter.prototype._qs = qs;                                                                                            // 559\n                                                                                                                      // 560\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      // 2152\n}).call(this);                                                                                                        // 2153\n                                                                                                                      // 2154\n                                                                                                                      // 2155\n                                                                                                                      // 2156\n                                                                                                                      // 2157\n                                                                                                                      // 2158\n                                                                                                                      // 2159\n(function () {                                                                                                        // 2160\n                                                                                                                      // 2161\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/kadira:flow-router/client/group.js                                                                        //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nGroup = function(router, options, parent) {                                                                           // 1\n  options = options || {};                                                                                            // 2\n                                                                                                                      // 3\n  if (options.prefix && !/^\\/.*/.test(options.prefix)) {                                                              // 4\n    var message = \"group's prefix must start with '/'\";                                                               // 5\n    throw new Error(message);                                                                                         // 6\n  }                                                                                                                   // 7\n                                                                                                                      // 8\n  this._router = router;                                                                                              // 9\n  this.prefix = options.prefix || '';                                                                                 // 10\n  this.name = options.name;                                                                                           // 11\n                                                                                                                      // 12\n  this._triggersEnter = options.triggersEnter || [];                                                                  // 13\n  this._triggersExit = options.triggersExit || [];                                                                    // 14\n  this._subscriptions = options.subscriptions || Function.prototype;                                                  // 15\n                                                                                                                      // 16\n  this.parent = parent;                                                                                               // 17\n  if (this.parent) {                                                                                                  // 18\n    this.prefix = parent.prefix + this.prefix;                                                                        // 19\n                                                                                                                      // 20\n    this._triggersEnter = parent._triggersEnter.concat(this._triggersEnter);                                          // 21\n    this._triggersExit = this._triggersExit.concat(parent._triggersExit);                                             // 22\n  }                                                                                                                   // 23\n};                                                                                                                    // 24\n                                                                                                                      // 25\nGroup.prototype.route = function(pathDef, options, group) {                                                           // 26\n  options = options || {};                                                                                            // 27\n                                                                                                                      // 28\n  if (!/^\\/.*/.test(pathDef)) {                                                                                       // 29\n    var message = \"route's path must start with '/'\";                                                                 // 30\n    throw new Error(message);                                                                                         // 31\n  }                                                                                                                   // 32\n                                                                                                                      // 33\n  group = group || this;                                                                                              // 34\n  pathDef = this.prefix + pathDef;                                                                                    // 35\n                                                                                                                      // 36\n  var triggersEnter = options.triggersEnter || [];                                                                    // 37\n  options.triggersEnter = this._triggersEnter.concat(triggersEnter);                                                  // 38\n                                                                                                                      // 39\n  var triggersExit = options.triggersExit || [];                                                                      // 40\n  options.triggersExit = triggersExit.concat(this._triggersExit);                                                     // 41\n                                                                                                                      // 42\n  return this._router.route(pathDef, options, group);                                                                 // 43\n};                                                                                                                    // 44\n                                                                                                                      // 45\nGroup.prototype.group = function(options) {                                                                           // 46\n  return new Group(this._router, options, this);                                                                      // 47\n};                                                                                                                    // 48\n                                                                                                                      // 49\nGroup.prototype.callSubscriptions = function(current) {                                                               // 50\n  if (this.parent) {                                                                                                  // 51\n    this.parent.callSubscriptions(current);                                                                           // 52\n  }                                                                                                                   // 53\n                                                                                                                      // 54\n  this._subscriptions.call(current.route, current.params, current.queryParams);                                       // 55\n};                                                                                                                    // 56\n                                                                                                                      // 57\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      // 2226\n}).call(this);                                                                                                        // 2227\n                                                                                                                      // 2228\n                                                                                                                      // 2229\n                                                                                                                      // 2230\n                                                                                                                      // 2231\n                                                                                                                      // 2232\n                                                                                                                      // 2233\n(function () {                                                                                                        // 2234\n                                                                                                                      // 2235\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/kadira:flow-router/client/route.js                                                                        //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nRoute = function(router, pathDef, options, group) {                                                                   // 1\n  options = options || {};                                                                                            // 2\n                                                                                                                      // 3\n  this.options = options;                                                                                             // 4\n  this.pathDef = pathDef                                                                                              // 5\n                                                                                                                      // 6\n  // Route.path is deprecated and will be removed in 3.0                                                              // 7\n  this.path = pathDef;                                                                                                // 8\n                                                                                                                      // 9\n  if (options.name) {                                                                                                 // 10\n    this.name = options.name;                                                                                         // 11\n  }                                                                                                                   // 12\n                                                                                                                      // 13\n  this._action = options.action || Function.prototype;                                                                // 14\n  this._subscriptions = options.subscriptions || Function.prototype;                                                  // 15\n  this._triggersEnter = options.triggersEnter || [];                                                                  // 16\n  this._triggersExit = options.triggersExit || [];                                                                    // 17\n  this._subsMap = {};                                                                                                 // 18\n  this._router = router;                                                                                              // 19\n                                                                                                                      // 20\n  this._params = new ReactiveDict();                                                                                  // 21\n  this._queryParams = new ReactiveDict();                                                                             // 22\n  this._routeCloseDep = new Tracker.Dependency();                                                                     // 23\n                                                                                                                      // 24\n  // tracks the changes in the URL                                                                                    // 25\n  this._pathChangeDep = new Tracker.Dependency();                                                                     // 26\n                                                                                                                      // 27\n  this.group = group;                                                                                                 // 28\n};                                                                                                                    // 29\n                                                                                                                      // 30\nRoute.prototype.clearSubscriptions = function() {                                                                     // 31\n  this._subsMap = {};                                                                                                 // 32\n};                                                                                                                    // 33\n                                                                                                                      // 34\nRoute.prototype.register = function(name, sub, options) {                                                             // 35\n  this._subsMap[name] = sub;                                                                                          // 36\n};                                                                                                                    // 37\n                                                                                                                      // 38\n                                                                                                                      // 39\nRoute.prototype.getSubscription = function(name) {                                                                    // 40\n  return this._subsMap[name];                                                                                         // 41\n};                                                                                                                    // 42\n                                                                                                                      // 43\n                                                                                                                      // 44\nRoute.prototype.getAllSubscriptions = function() {                                                                    // 45\n  return this._subsMap;                                                                                               // 46\n};                                                                                                                    // 47\n                                                                                                                      // 48\nRoute.prototype.callAction = function(current) {                                                                      // 49\n  var self = this;                                                                                                    // 50\n  self._action(current.params, current.queryParams);                                                                  // 51\n};                                                                                                                    // 52\n                                                                                                                      // 53\nRoute.prototype.callSubscriptions = function(current) {                                                               // 54\n  this.clearSubscriptions();                                                                                          // 55\n  if (this.group) {                                                                                                   // 56\n    this.group.callSubscriptions(current);                                                                            // 57\n  }                                                                                                                   // 58\n                                                                                                                      // 59\n  this._subscriptions(current.params, current.queryParams);                                                           // 60\n};                                                                                                                    // 61\n                                                                                                                      // 62\nRoute.prototype.getRouteName = function() {                                                                           // 63\n  this._routeCloseDep.depend();                                                                                       // 64\n  return this.name;                                                                                                   // 65\n};                                                                                                                    // 66\n                                                                                                                      // 67\nRoute.prototype.getParam = function(key) {                                                                            // 68\n  this._routeCloseDep.depend();                                                                                       // 69\n  return this._params.get(key);                                                                                       // 70\n};                                                                                                                    // 71\n                                                                                                                      // 72\nRoute.prototype.getQueryParam = function(key) {                                                                       // 73\n  this._routeCloseDep.depend();                                                                                       // 74\n  return this._queryParams.get(key);                                                                                  // 75\n};                                                                                                                    // 76\n                                                                                                                      // 77\nRoute.prototype.watchPathChange = function() {                                                                        // 78\n  this._pathChangeDep.depend();                                                                                       // 79\n};                                                                                                                    // 80\n                                                                                                                      // 81\nRoute.prototype.registerRouteClose = function() {                                                                     // 82\n  this._params = new ReactiveDict();                                                                                  // 83\n  this._queryParams = new ReactiveDict();                                                                             // 84\n  this._routeCloseDep.changed();                                                                                      // 85\n  this._pathChangeDep.changed();                                                                                      // 86\n};                                                                                                                    // 87\n                                                                                                                      // 88\nRoute.prototype.registerRouteChange = function(currentContext, routeChanging) {                                       // 89\n  // register params                                                                                                  // 90\n  var params = currentContext.params;                                                                                 // 91\n  this._updateReactiveDict(this._params, params);                                                                     // 92\n                                                                                                                      // 93\n  // register query params                                                                                            // 94\n  var queryParams = currentContext.queryParams;                                                                       // 95\n  this._updateReactiveDict(this._queryParams, queryParams);                                                           // 96\n                                                                                                                      // 97\n  // if the route is changing, we need to defer triggering path changing                                              // 98\n  // if we did this, old route's path watchers will detect this                                                       // 99\n  // Real issue is, above watcher will get removed with the new route                                                 // 100\n  // So, we don't need to trigger it now                                                                              // 101\n  // We are doing it on the route close event. So, if they exists they'll                                             // 102\n  // get notify that                                                                                                  // 103\n  if(!routeChanging) {                                                                                                // 104\n    this._pathChangeDep.changed();                                                                                    // 105\n  }                                                                                                                   // 106\n};                                                                                                                    // 107\n                                                                                                                      // 108\nRoute.prototype._updateReactiveDict = function(dict, newValues) {                                                     // 109\n  var currentKeys = _.keys(newValues);                                                                                // 110\n  var oldKeys = _.keys(dict.keyDeps);                                                                                 // 111\n                                                                                                                      // 112\n  // set new values                                                                                                   // 113\n  //  params is an array. So, _.each(params) does not works                                                           // 114\n  //  to iterate params                                                                                               // 115\n  _.each(currentKeys, function(key) {                                                                                 // 116\n    dict.set(key, newValues[key]);                                                                                    // 117\n  });                                                                                                                 // 118\n                                                                                                                      // 119\n  // remove keys which does not exisits here                                                                          // 120\n  var removedKeys = _.difference(oldKeys, currentKeys);                                                               // 121\n  _.each(removedKeys, function(key) {                                                                                 // 122\n    dict.set(key, undefined);                                                                                         // 123\n  });                                                                                                                 // 124\n};                                                                                                                    // 125\n                                                                                                                      // 126\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      // 2369\n}).call(this);                                                                                                        // 2370\n                                                                                                                      // 2371\n                                                                                                                      // 2372\n                                                                                                                      // 2373\n                                                                                                                      // 2374\n                                                                                                                      // 2375\n                                                                                                                      // 2376\n(function () {                                                                                                        // 2377\n                                                                                                                      // 2378\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/kadira:flow-router/client/_init.js                                                                        //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n// Export Router Instance                                                                                             // 1\nFlowRouter = new Router();                                                                                            // 2\nFlowRouter.Router = Router;                                                                                           // 3\nFlowRouter.Route = Route;                                                                                             // 4\n                                                                                                                      // 5\n// Initialize FlowRouter                                                                                              // 6\nMeteor.startup(function () {                                                                                          // 7\n  if(!FlowRouter._askedToWait) {                                                                                      // 8\n    FlowRouter.initialize();                                                                                          // 9\n  }                                                                                                                   // 10\n});                                                                                                                   // 11\n                                                                                                                      // 12\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      // 2398\n}).call(this);                                                                                                        // 2399\n                                                                                                                      // 2400\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['kadira:flow-router'] = {\n  FlowRouter: FlowRouter\n};\n\n})();\n","servePath":"/packages/kadira_flow-router.js","sourceMap":{"version":3,"sources":["/packages/kadira_flow-router/packages/kadira_flow-router.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6H","file":"/packages/kadira_flow-router.js","sourcesContent":["(function () {\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/kadira:flow-router/client.browserify.js                                                                   //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            currentQueue[queueIndex].run();\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],2:[function(require,module,exports){\n(function (process){\n  /* globals require, module */\n\n  'use strict';\n\n  /**\n   * Module dependencies.\n   */\n\n  var pathtoRegexp = require('path-to-regexp');\n\n  /**\n   * Module exports.\n   */\n\n  module.exports = page;\n\n  /**\n   * Detect click event\n   */\n  var clickEvent = ('undefined' !== typeof document) && document.ontouchstart ? 'touchstart' : 'click';\n\n  /**\n   * To work properly with the URL\n   * history.location generated polyfill in https://github.com/devote/HTML5-History-API\n   */\n\n  var location = ('undefined' !== typeof window) && (window.history.location || window.location);\n\n  /**\n   * Perform initial dispatch.\n   */\n\n  var dispatch = true;\n\n\n  /**\n   * Decode URL components (query string, pathname, hash).\n   * Accommodates both regular percent encoding and x-www-form-urlencoded format.\n   */\n  var decodeURLComponents = true;\n\n  /**\n   * Base path.\n   */\n\n  var base = '';\n\n  /**\n   * Running flag.\n   */\n\n  var running;\n\n  /**\n   * HashBang option\n   */\n\n  var hashbang = false;\n\n  /**\n   * Previous context, for capturing\n   * page exit events.\n   */\n\n  var prevContext;\n\n  /**\n   * Register `path` with callback `fn()`,\n   * or route `path`, or redirection,\n   * or `page.start()`.\n   *\n   *   page(fn);\n   *   page('*', fn);\n   *   page('/user/:id', load, user);\n   *   page('/user/' + user.id, { some: 'thing' });\n   *   page('/user/' + user.id);\n   *   page('/from', '/to')\n   *   page();\n   *\n   * @param {String|Function} path\n   * @param {Function} fn...\n   * @api public\n   */\n\n  function page(path, fn) {\n    // <callback>\n    if ('function' === typeof path) {\n      return page('*', path);\n    }\n\n    // route <path> to <callback ...>\n    if ('function' === typeof fn) {\n      var route = new Route(path);\n      for (var i = 1; i < arguments.length; ++i) {\n        page.callbacks.push(route.middleware(arguments[i]));\n      }\n      // show <path> with [state]\n    } else if ('string' === typeof path) {\n      page['string' === typeof fn ? 'redirect' : 'show'](path, fn);\n      // start [options]\n    } else {\n      page.start(path);\n    }\n  }\n\n  /**\n   * Callback functions.\n   */\n\n  page.callbacks = [];\n  page.exits = [];\n\n  /**\n   * Current path being processed\n   * @type {String}\n   */\n  page.current = '';\n\n  /**\n   * Number of pages navigated to.\n   * @type {number}\n   *\n   *     page.len == 0;\n   *     page('/login');\n   *     page.len == 1;\n   */\n\n  page.len = 0;\n\n  /**\n   * Get or set basepath to `path`.\n   *\n   * @param {String} path\n   * @api public\n   */\n\n  page.base = function(path) {\n    if (0 === arguments.length) return base;\n    base = path;\n  };\n\n  /**\n   * Bind with the given `options`.\n   *\n   * Options:\n   *\n   *    - `click` bind to click events [true]\n   *    - `popstate` bind to popstate [true]\n   *    - `dispatch` perform initial dispatch [true]\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  page.start = function(options) {\n    options = options || {};\n    if (running) return;\n    running = true;\n    if (false === options.dispatch) dispatch = false;\n    if (false === options.decodeURLComponents) decodeURLComponents = false;\n    if (false !== options.popstate) window.addEventListener('popstate', onpopstate, false);\n    if (false !== options.click) {\n      document.addEventListener(clickEvent, onclick, false);\n    }\n    if (true === options.hashbang) hashbang = true;\n    if (!dispatch) return;\n    var url = (hashbang && ~location.hash.indexOf('#!')) ? location.hash.substr(2) + location.search : location.pathname + location.search + location.hash;\n    page.replace(url, null, true, dispatch);\n  };\n\n  /**\n   * Unbind click and popstate event handlers.\n   *\n   * @api public\n   */\n\n  page.stop = function() {\n    if (!running) return;\n    page.current = '';\n    page.len = 0;\n    running = false;\n    document.removeEventListener(clickEvent, onclick, false);\n    window.removeEventListener('popstate', onpopstate, false);\n  };\n\n  /**\n   * Show `path` with optional `state` object.\n   *\n   * @param {String} path\n   * @param {Object} state\n   * @param {Boolean} dispatch\n   * @return {Context}\n   * @api public\n   */\n\n  page.show = function(path, state, dispatch, push) {\n    var ctx = new Context(path, state);\n    page.current = ctx.path;\n    if (false !== dispatch) page.dispatch(ctx);\n    if (false !== ctx.handled && false !== push) ctx.pushState();\n    return ctx;\n  };\n\n  /**\n   * Goes back in the history\n   * Back should always let the current route push state and then go back.\n   *\n   * @param {String} path - fallback path to go back if no more history exists, if undefined defaults to page.base\n   * @param {Object} [state]\n   * @api public\n   */\n\n  page.back = function(path, state) {\n    if (page.len > 0) {\n      // this may need more testing to see if all browsers\n      // wait for the next tick to go back in history\n      history.back();\n      page.len--;\n    } else if (path) {\n      setTimeout(function() {\n        page.show(path, state);\n      });\n    }else{\n      setTimeout(function() {\n        page.show(base, state);\n      });\n    }\n  };\n\n\n  /**\n   * Register route to redirect from one path to other\n   * or just redirect to another route\n   *\n   * @param {String} from - if param 'to' is undefined redirects to 'from'\n   * @param {String} [to]\n   * @api public\n   */\n  page.redirect = function(from, to) {\n    // Define route from a path to another\n    if ('string' === typeof from && 'string' === typeof to) {\n      page(from, function(e) {\n        setTimeout(function() {\n          page.replace(to);\n        }, 0);\n      });\n    }\n\n    // Wait for the push state and replace it with another\n    if ('string' === typeof from && 'undefined' === typeof to) {\n      setTimeout(function() {\n        page.replace(from);\n      }, 0);\n    }\n  };\n\n  /**\n   * Replace `path` with optional `state` object.\n   *\n   * @param {String} path\n   * @param {Object} state\n   * @return {Context}\n   * @api public\n   */\n\n\n  page.replace = function(path, state, init, dispatch) {\n    var ctx = new Context(path, state);\n    page.current = ctx.path;\n    ctx.init = init;\n    ctx.save(); // save before dispatching, which may redirect\n    if (false !== dispatch) page.dispatch(ctx);\n    return ctx;\n  };\n\n  /**\n   * Dispatch the given `ctx`.\n   *\n   * @param {Object} ctx\n   * @api private\n   */\n\n  page.dispatch = function(ctx) {\n    var prev = prevContext,\n      i = 0,\n      j = 0;\n\n    prevContext = ctx;\n\n    function nextExit() {\n      var fn = page.exits[j++];\n      if (!fn) return nextEnter();\n      fn(prev, nextExit);\n    }\n\n    function nextEnter() {\n      var fn = page.callbacks[i++];\n\n      if (ctx.path !== page.current) {\n        ctx.handled = false;\n        return;\n      }\n      if (!fn) return unhandled(ctx);\n      fn(ctx, nextEnter);\n    }\n\n    if (prev) {\n      nextExit();\n    } else {\n      nextEnter();\n    }\n  };\n\n  /**\n   * Unhandled `ctx`. When it's not the initial\n   * popstate then redirect. If you wish to handle\n   * 404s on your own use `page('*', callback)`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n\n  function unhandled(ctx) {\n    if (ctx.handled) return;\n    var current;\n\n    if (hashbang) {\n      current = base + location.hash.replace('#!', '');\n    } else {\n      current = location.pathname + location.search;\n    }\n\n    if (current === ctx.canonicalPath) return;\n    page.stop();\n    ctx.handled = false;\n    location.href = ctx.canonicalPath;\n  }\n\n  /**\n   * Register an exit route on `path` with\n   * callback `fn()`, which will be called\n   * on the previous context when a new\n   * page is visited.\n   */\n  page.exit = function(path, fn) {\n    if (typeof path === 'function') {\n      return page.exit('*', path);\n    }\n\n    var route = new Route(path);\n    for (var i = 1; i < arguments.length; ++i) {\n      page.exits.push(route.middleware(arguments[i]));\n    }\n  };\n\n  /**\n   * Remove URL encoding from the given `str`.\n   * Accommodates whitespace in both x-www-form-urlencoded\n   * and regular percent-encoded form.\n   *\n   * @param {str} URL component to decode\n   */\n  function decodeURLEncodedURIComponent(val) {\n    if (typeof val !== 'string') { return val; }\n    return decodeURLComponents ? decodeURIComponent(val.replace(/\\+/g, ' ')) : val;\n  }\n\n  /**\n   * Initialize a new \"request\" `Context`\n   * with the given `path` and optional initial `state`.\n   *\n   * @param {String} path\n   * @param {Object} state\n   * @api public\n   */\n\n  function Context(path, state) {\n    if ('/' === path[0] && 0 !== path.indexOf(base)) path = base + (hashbang ? '#!' : '') + path;\n    var i = path.indexOf('?');\n\n    this.canonicalPath = path;\n    this.path = path.replace(base, '') || '/';\n    if (hashbang) this.path = this.path.replace('#!', '') || '/';\n\n    this.title = document.title;\n    this.state = state || {};\n    this.state.path = path;\n    this.querystring = ~i ? decodeURLEncodedURIComponent(path.slice(i + 1)) : '';\n    this.pathname = decodeURLEncodedURIComponent(~i ? path.slice(0, i) : path);\n    this.params = {};\n\n    // fragment\n    this.hash = '';\n    if (!hashbang) {\n      if (!~this.path.indexOf('#')) return;\n      var parts = this.path.split('#');\n      this.path = parts[0];\n      this.hash = decodeURLEncodedURIComponent(parts[1]) || '';\n      this.querystring = this.querystring.split('#')[0];\n    }\n  }\n\n  /**\n   * Expose `Context`.\n   */\n\n  page.Context = Context;\n\n  /**\n   * Push state.\n   *\n   * @api private\n   */\n\n  Context.prototype.pushState = function() {\n    page.len++;\n    history.pushState(this.state, this.title, hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n  };\n\n  /**\n   * Save the context state.\n   *\n   * @api public\n   */\n\n  Context.prototype.save = function() {\n    history.replaceState(this.state, this.title, hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n  };\n\n  /**\n   * Initialize `Route` with the given HTTP `path`,\n   * and an array of `callbacks` and `options`.\n   *\n   * Options:\n   *\n   *   - `sensitive`    enable case-sensitive routes\n   *   - `strict`       enable strict matching for trailing slashes\n   *\n   * @param {String} path\n   * @param {Object} options.\n   * @api private\n   */\n\n  function Route(path, options) {\n    options = options || {};\n    this.path = (path === '*') ? '(.*)' : path;\n    this.method = 'GET';\n    this.regexp = pathtoRegexp(this.path,\n      this.keys = [],\n      options.sensitive,\n      options.strict);\n  }\n\n  /**\n   * Expose `Route`.\n   */\n\n  page.Route = Route;\n\n  /**\n   * Return route middleware with\n   * the given callback `fn()`.\n   *\n   * @param {Function} fn\n   * @return {Function}\n   * @api public\n   */\n\n  Route.prototype.middleware = function(fn) {\n    var self = this;\n    return function(ctx, next) {\n      if (self.match(ctx.path, ctx.params)) return fn(ctx, next);\n      next();\n    };\n  };\n\n  /**\n   * Check if this route matches `path`, if so\n   * populate `params`.\n   *\n   * @param {String} path\n   * @param {Object} params\n   * @return {Boolean}\n   * @api private\n   */\n\n  Route.prototype.match = function(path, params) {\n    var keys = this.keys,\n      qsIndex = path.indexOf('?'),\n      pathname = ~qsIndex ? path.slice(0, qsIndex) : path,\n      m = this.regexp.exec(decodeURIComponent(pathname));\n\n    if (!m) return false;\n\n    for (var i = 1, len = m.length; i < len; ++i) {\n      var key = keys[i - 1];\n      var val = decodeURLEncodedURIComponent(m[i]);\n      if (val !== undefined || !(hasOwnProperty.call(params, key.name))) {\n        params[key.name] = val;\n      }\n    }\n\n    return true;\n  };\n\n\n  /**\n   * Handle \"populate\" events.\n   */\n\n  var onpopstate = (function () {\n    var loaded = false;\n    if ('undefined' === typeof window) {\n      return;\n    }\n    if (document.readyState === 'complete') {\n      loaded = true;\n    } else {\n      window.addEventListener('load', function() {\n        setTimeout(function() {\n          loaded = true;\n        }, 0);\n      });\n    }\n    return function onpopstate(e) {\n      if (!loaded) return;\n      if (e.state) {\n        var path = e.state.path;\n        page.replace(path, e.state);\n      } else {\n        page.show(location.pathname + location.hash, undefined, undefined, false);\n      }\n    };\n  })();\n  /**\n   * Handle \"click\" events.\n   */\n\n  function onclick(e) {\n\n    if (1 !== which(e)) return;\n\n    if (e.metaKey || e.ctrlKey || e.shiftKey) return;\n    if (e.defaultPrevented) return;\n\n\n\n    // ensure link\n    var el = e.target;\n    while (el && 'A' !== el.nodeName) el = el.parentNode;\n    if (!el || 'A' !== el.nodeName) return;\n\n\n\n    // Ignore if tag has\n    // 1. \"download\" attribute\n    // 2. rel=\"external\" attribute\n    if (el.hasAttribute('download') || el.getAttribute('rel') === 'external') return;\n\n    // ensure non-hash for the same path\n    var link = el.getAttribute('href');\n    if (!hashbang && el.pathname === location.pathname && (el.hash || '#' === link)) return;\n\n\n\n    // Check for mailto: in the href\n    if (link && link.indexOf('mailto:') > -1) return;\n\n    // check target\n    if (el.target) return;\n\n    // x-origin\n    if (!sameOrigin(el.href)) return;\n\n\n\n    // rebuild path\n    var path = el.pathname + el.search + (el.hash || '');\n\n    path = path[0] !== '/' ? '/' + path : path;\n\n    // strip leading \"/[drive letter]:\" on NW.js on Windows\n    if (typeof process !== 'undefined' && path.match(/^\\/[a-zA-Z]:\\//)) {\n      path = path.replace(/^\\/[a-zA-Z]:\\//, '/');\n    }\n\n    // same page\n    var orig = path;\n\n    if (path.indexOf(base) === 0) {\n      path = path.substr(base.length);\n    }\n\n    if (hashbang) path = path.replace('#!', '');\n\n    if (base && orig === path) return;\n\n    e.preventDefault();\n    page.show(orig);\n  }\n\n  /**\n   * Event button.\n   */\n\n  function which(e) {\n    e = e || window.event;\n    return null === e.which ? e.button : e.which;\n  }\n\n  /**\n   * Check if `href` is the same origin.\n   */\n\n  function sameOrigin(href) {\n    var origin = location.protocol + '//' + location.hostname;\n    if (location.port) origin += ':' + location.port;\n    return (href && (0 === href.indexOf(origin)));\n  }\n\n  page.sameOrigin = sameOrigin;\n\n}).call(this,require('_process'))\n\n},{\"_process\":1,\"path-to-regexp\":3}],3:[function(require,module,exports){\nvar isArray = require('isarray');\n\n/**\n * Expose `pathToRegexp`.\n */\nmodule.exports = pathToRegexp;\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\"]\n  // \"/route(\\\\d+)\" => [undefined, undefined, undefined, \"\\d+\", undefined]\n  '([\\\\/.])?(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^)])*)\\\\))?|\\\\(((?:\\\\\\\\.|[^)])*)\\\\))([+*?])?',\n  // Match regexp special characters that are always escaped.\n  '([.+*?=^!:${}()[\\\\]|\\\\/])'\n].join('|'), 'g');\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {String} group\n * @return {String}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1');\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {RegExp} re\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys;\n  return re;\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {String}\n */\nfunction flags (options) {\n  return options.sensitive ? '' : 'i';\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {RegExp} path\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name:      i,\n        delimiter: null,\n        optional:  false,\n        repeat:    false\n      });\n    }\n  }\n\n  return attachKeys(path, keys);\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {Array}  path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = [];\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source);\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));\n  return attachKeys(regexp, keys);\n}\n\n/**\n * Replace the specific tags with regexp strings.\n *\n * @param  {String} path\n * @param  {Array}  keys\n * @return {String}\n */\nfunction replacePath (path, keys) {\n  var index = 0;\n\n  function replace (_, escaped, prefix, key, capture, group, suffix, escape) {\n    if (escaped) {\n      return escaped;\n    }\n\n    if (escape) {\n      return '\\\\' + escape;\n    }\n\n    var repeat   = suffix === '+' || suffix === '*';\n    var optional = suffix === '?' || suffix === '*';\n\n    keys.push({\n      name:      key || index++,\n      delimiter: prefix || '/',\n      optional:  optional,\n      repeat:    repeat\n    });\n\n    prefix = prefix ? ('\\\\' + prefix) : '';\n    capture = escapeGroup(capture || group || '[^' + (prefix || '\\\\/') + ']+?');\n\n    if (repeat) {\n      capture = capture + '(?:' + prefix + capture + ')*';\n    }\n\n    if (optional) {\n      return '(?:' + prefix + '(' + capture + '))?';\n    }\n\n    // Basic parameter support.\n    return prefix + '(' + capture + ')';\n  }\n\n  return path.replace(PATH_REGEXP, replace);\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(String|RegExp|Array)} path\n * @param  {Array}                 [keys]\n * @param  {Object}                [options]\n * @return {RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  keys = keys || [];\n\n  if (!isArray(keys)) {\n    options = keys;\n    keys = [];\n  } else if (!options) {\n    options = {};\n  }\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, keys, options);\n  }\n\n  if (isArray(path)) {\n    return arrayToRegexp(path, keys, options);\n  }\n\n  var strict = options.strict;\n  var end = options.end !== false;\n  var route = replacePath(path, keys);\n  var endsWithSlash = path.charAt(path.length - 1) === '/';\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithSlash ? route.slice(0, -2) : route) + '(?:\\\\/(?=$))?';\n  }\n\n  if (end) {\n    route += '$';\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithSlash ? '' : '(?=\\\\/|$)';\n  }\n\n  return attachKeys(new RegExp('^' + route, flags(options)), keys);\n}\n\n},{\"isarray\":4}],4:[function(require,module,exports){\nmodule.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n},{}],5:[function(require,module,exports){\nmodule.exports = require('./lib/');\n\n},{\"./lib/\":6}],6:[function(require,module,exports){\n// Load modules\n\nvar Stringify = require('./stringify');\nvar Parse = require('./parse');\n\n\n// Declare internals\n\nvar internals = {};\n\n\nmodule.exports = {\n    stringify: Stringify,\n    parse: Parse\n};\n\n},{\"./parse\":7,\"./stringify\":8}],7:[function(require,module,exports){\n// Load modules\n\nvar Utils = require('./utils');\n\n\n// Declare internals\n\nvar internals = {\n    delimiter: '&',\n    depth: 5,\n    arrayLimit: 20,\n    parameterLimit: 1000,\n    strictNullHandling: false\n};\n\n\ninternals.parseValues = function (str, options) {\n\n    var obj = {};\n    var parts = str.split(options.delimiter, options.parameterLimit === Infinity ? undefined : options.parameterLimit);\n\n    for (var i = 0, il = parts.length; i < il; ++i) {\n        var part = parts[i];\n        var pos = part.indexOf(']=') === -1 ? part.indexOf('=') : part.indexOf(']=') + 1;\n\n        if (pos === -1) {\n            obj[Utils.decode(part)] = '';\n\n            if (options.strictNullHandling) {\n                obj[Utils.decode(part)] = null;\n            }\n        }\n        else {\n            var key = Utils.decode(part.slice(0, pos));\n            var val = Utils.decode(part.slice(pos + 1));\n\n            if (!Object.prototype.hasOwnProperty.call(obj, key)) {\n                obj[key] = val;\n            }\n            else {\n                obj[key] = [].concat(obj[key]).concat(val);\n            }\n        }\n    }\n\n    return obj;\n};\n\n\ninternals.parseObject = function (chain, val, options) {\n\n    if (!chain.length) {\n        return val;\n    }\n\n    var root = chain.shift();\n\n    var obj;\n    if (root === '[]') {\n        obj = [];\n        obj = obj.concat(internals.parseObject(chain, val, options));\n    }\n    else {\n        obj = Object.create(null);\n        var cleanRoot = root[0] === '[' && root[root.length - 1] === ']' ? root.slice(1, root.length - 1) : root;\n        var index = parseInt(cleanRoot, 10);\n        var indexString = '' + index;\n        if (!isNaN(index) &&\n            root !== cleanRoot &&\n            indexString === cleanRoot &&\n            index >= 0 &&\n            (options.parseArrays &&\n             index <= options.arrayLimit)) {\n\n            obj = [];\n            obj[index] = internals.parseObject(chain, val, options);\n        }\n        else {\n            obj[cleanRoot] = internals.parseObject(chain, val, options);\n        }\n    }\n\n    return obj;\n};\n\n\ninternals.parseKeys = function (key, val, options) {\n\n    if (!key) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n\n    if (options.allowDots) {\n        key = key.replace(/\\.([^\\.\\[]+)/g, '[$1]');\n    }\n\n    // The regex chunks\n\n    var parent = /^([^\\[\\]]*)/;\n    var child = /(\\[[^\\[\\]]*\\])/g;\n\n    // Get the parent\n\n    var segment = parent.exec(key);\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (segment[1]) {\n        keys.push(segment[1]);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while ((segment = child.exec(key)) !== null && i < options.depth) {\n\n        ++i;\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return internals.parseObject(keys, val, options);\n};\n\n\nmodule.exports = function (str, options) {\n\n    if (str === '' ||\n        str === null ||\n        typeof str === 'undefined') {\n\n        return Object.create(null);\n    }\n\n    options = options || {};\n    options.delimiter = typeof options.delimiter === 'string' || Utils.isRegExp(options.delimiter) ? options.delimiter : internals.delimiter;\n    options.depth = typeof options.depth === 'number' ? options.depth : internals.depth;\n    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : internals.arrayLimit;\n    options.parseArrays = options.parseArrays !== false;\n    options.allowDots = options.allowDots !== false;\n    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : internals.parameterLimit;\n    options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n\n\n    var tempObj = typeof str === 'string' ? internals.parseValues(str, options) : str;\n    var obj = Object.create(null);\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0, il = keys.length; i < il; ++i) {\n        var key = keys[i];\n        var newObj = internals.parseKeys(key, tempObj[key], options);\n        obj = Utils.merge(obj, newObj);\n    }\n\n    return Utils.compact(obj);\n};\n\n},{\"./utils\":9}],8:[function(require,module,exports){\n// Load modules\n\nvar Utils = require('./utils');\n\n\n// Declare internals\n\nvar internals = {\n    delimiter: '&',\n    arrayPrefixGenerators: {\n        brackets: function (prefix, key) {\n\n            return prefix + '[]';\n        },\n        indices: function (prefix, key) {\n\n            return prefix + '[' + key + ']';\n        },\n        repeat: function (prefix, key) {\n\n            return prefix;\n        }\n    },\n    strictNullHandling: false\n};\n\n\ninternals.stringify = function (obj, prefix, generateArrayPrefix, strictNullHandling, filter) {\n\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    }\n    else if (Utils.isBuffer(obj)) {\n        obj = obj.toString();\n    }\n    else if (obj instanceof Date) {\n        obj = obj.toISOString();\n    }\n    else if (obj === null) {\n        if (strictNullHandling) {\n            return Utils.encode(prefix);\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' ||\n        typeof obj === 'number' ||\n        typeof obj === 'boolean') {\n\n        return [Utils.encode(prefix) + '=' + Utils.encode(obj)];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys = Array.isArray(filter) ? filter : Object.keys(obj);\n    for (var i = 0, il = objKeys.length; i < il; ++i) {\n        var key = objKeys[i];\n\n        if (Array.isArray(obj)) {\n            values = values.concat(internals.stringify(obj[key], generateArrayPrefix(prefix, key), generateArrayPrefix, strictNullHandling, filter));\n        }\n        else {\n            values = values.concat(internals.stringify(obj[key], prefix + '[' + key + ']', generateArrayPrefix, strictNullHandling, filter));\n        }\n    }\n\n    return values;\n};\n\n\nmodule.exports = function (obj, options) {\n\n    options = options || {};\n    var delimiter = typeof options.delimiter === 'undefined' ? internals.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n    var objKeys;\n    var filter;\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    }\n    else if (Array.isArray(options.filter)) {\n        objKeys = filter = options.filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' ||\n        obj === null) {\n\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in internals.arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    }\n    else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    }\n    else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = internals.arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n    for (var i = 0, il = objKeys.length; i < il; ++i) {\n        var key = objKeys[i];\n        keys = keys.concat(internals.stringify(obj[key], key, generateArrayPrefix, strictNullHandling, filter));\n    }\n\n    return keys.join(delimiter);\n};\n\n},{\"./utils\":9}],9:[function(require,module,exports){\n// Load modules\n\n\n// Declare internals\n\nvar internals = {};\ninternals.hexTable = new Array(256);\nfor (var i = 0; i < 256; ++i) {\n    internals.hexTable[i] = '%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase();\n}\n\n\nexports.arrayToObject = function (source) {\n\n    var obj = Object.create(null);\n    for (var i = 0, il = source.length; i < il; ++i) {\n        if (typeof source[i] !== 'undefined') {\n\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\n\nexports.merge = function (target, source) {\n\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (Array.isArray(target)) {\n            target.push(source);\n        }\n        else if (typeof target === 'object') {\n            target[source] = true;\n        }\n        else {\n            target = [target, source];\n        }\n\n        return target;\n    }\n\n    if (typeof target !== 'object') {\n        target = [target].concat(source);\n        return target;\n    }\n\n    if (Array.isArray(target) &&\n        !Array.isArray(source)) {\n\n        target = exports.arrayToObject(target);\n    }\n\n    var keys = Object.keys(source);\n    for (var k = 0, kl = keys.length; k < kl; ++k) {\n        var key = keys[k];\n        var value = source[key];\n\n        if (!target[key]) {\n            target[key] = value;\n        }\n        else {\n            target[key] = exports.merge(target[key], value);\n        }\n    }\n\n    return target;\n};\n\n\nexports.decode = function (str) {\n\n    try {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    } catch (e) {\n        return str;\n    }\n};\n\nexports.encode = function (str) {\n\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    if (typeof str !== 'string') {\n        str = '' + str;\n    }\n\n    var out = '';\n    for (var i = 0, il = str.length; i < il; ++i) {\n        var c = str.charCodeAt(i);\n\n        if (c === 0x2D || // -\n            c === 0x2E || // .\n            c === 0x5F || // _\n            c === 0x7E || // ~\n            (c >= 0x30 && c <= 0x39) || // 0-9\n            (c >= 0x41 && c <= 0x5A) || // a-z\n            (c >= 0x61 && c <= 0x7A)) { // A-Z\n\n            out += str[i];\n            continue;\n        }\n\n        if (c < 0x80) {\n            out += internals.hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out += internals.hexTable[0xC0 | (c >> 6)] + internals.hexTable[0x80 | (c & 0x3F)];\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out += internals.hexTable[0xE0 | (c >> 12)] + internals.hexTable[0x80 | ((c >> 6) & 0x3F)] + internals.hexTable[0x80 | (c & 0x3F)];\n            continue;\n        }\n\n        ++i;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (str.charCodeAt(i) & 0x3FF));\n        out += internals.hexTable[0xF0 | (c >> 18)] + internals.hexTable[0x80 | ((c >> 12) & 0x3F)] + internals.hexTable[0x80 | ((c >> 6) & 0x3F)] + internals.hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nexports.compact = function (obj, refs) {\n\n    if (typeof obj !== 'object' ||\n        obj === null) {\n\n        return obj;\n    }\n\n    refs = refs || [];\n    var lookup = refs.indexOf(obj);\n    if (lookup !== -1) {\n        return refs[lookup];\n    }\n\n    refs.push(obj);\n\n    if (Array.isArray(obj)) {\n        var compacted = [];\n\n        for (var i = 0, il = obj.length; i < il; ++i) {\n            if (typeof obj[i] !== 'undefined') {\n                compacted.push(obj[i]);\n            }\n        }\n\n        return compacted;\n    }\n\n    var keys = Object.keys(obj);\n    for (i = 0, il = keys.length; i < il; ++i) {\n        var key = keys[i];\n        obj[key] = exports.compact(obj[key], refs);\n    }\n\n    return obj;\n};\n\n\nexports.isRegExp = function (obj) {\n\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\n\nexports.isBuffer = function (obj) {\n\n    if (obj === null ||\n        typeof obj === 'undefined') {\n\n        return false;\n    }\n\n    return !!(obj.constructor &&\n              obj.constructor.isBuffer &&\n              obj.constructor.isBuffer(obj));\n};\n\n},{}],10:[function(require,module,exports){\npage = require('page');\nqs   = require('qs');\n\n},{\"page\":2,\"qs\":5}]},{},[10])\n//# sourceMappingURL=kadira:flow-router/client.browserify.js\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/kadira:flow-router/client/triggers.js                                                                     //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n// a set of utility functions for triggers                                                                            // 1\n                                                                                                                      // 2\nTriggers = {};                                                                                                        // 3\n                                                                                                                      // 4\n// Apply filters for a set of triggers                                                                                // 5\n// @triggers - a set of triggers                                                                                      // 6\n// @filter - filter with array fileds with `only` and `except`                                                        // 7\n//           support only either `only` or `except`, but not both                                                     // 8\nTriggers.applyFilters = function(triggers, filter) {                                                                  // 9\n  if(!(triggers instanceof Array)) {                                                                                  // 10\n    triggers = [triggers];                                                                                            // 11\n  }                                                                                                                   // 12\n                                                                                                                      // 13\n  if(!filter) {                                                                                                       // 14\n    return triggers;                                                                                                  // 15\n  }                                                                                                                   // 16\n                                                                                                                      // 17\n  if(filter.only && filter.except) {                                                                                  // 18\n    throw new Error(\"Triggers don't support only and except filters at once\");                                        // 19\n  }                                                                                                                   // 20\n                                                                                                                      // 21\n  if(filter.only && !(filter.only instanceof Array)) {                                                                // 22\n    throw new Error(\"only filters needs to be an array\");                                                             // 23\n  }                                                                                                                   // 24\n                                                                                                                      // 25\n  if(filter.except && !(filter.except instanceof Array)) {                                                            // 26\n    throw new Error(\"except filters needs to be an array\");                                                           // 27\n  }                                                                                                                   // 28\n                                                                                                                      // 29\n  if(filter.only) {                                                                                                   // 30\n    return Triggers.createRouteBoundTriggers(triggers, filter.only);                                                  // 31\n  }                                                                                                                   // 32\n                                                                                                                      // 33\n  if(filter.except) {                                                                                                 // 34\n    return Triggers.createRouteBoundTriggers(triggers, filter.except, true);                                          // 35\n  }                                                                                                                   // 36\n                                                                                                                      // 37\n  throw new Error(\"Provided a filter but not supported\");                                                             // 38\n};                                                                                                                    // 39\n                                                                                                                      // 40\n//  create triggers by bounding them to a set of route names                                                          // 41\n//  @triggers - a set of triggers                                                                                     // 42\n//  @names - list of route names to be bound (trigger runs only for these names)                                      // 43\n//  @negate - negate the result (triggers won't run for above names)                                                  // 44\nTriggers.createRouteBoundTriggers = function(triggers, names, negate) {                                               // 45\n  var namesMap = {};                                                                                                  // 46\n  _.each(names, function(name) {                                                                                      // 47\n    namesMap[name] = true;                                                                                            // 48\n  });                                                                                                                 // 49\n                                                                                                                      // 50\n  var filteredTriggers = _.map(triggers, function(originalTrigger) {                                                  // 51\n    var modifiedTrigger = function(context, next) {                                                                   // 52\n      var routeName = context.route.name;                                                                             // 53\n      var matched = (namesMap[routeName])? 1: -1;                                                                     // 54\n      matched = (negate)? matched * -1 : matched;                                                                     // 55\n                                                                                                                      // 56\n      if(matched === 1) {                                                                                             // 57\n        originalTrigger(context, next);                                                                               // 58\n      }                                                                                                               // 59\n    };                                                                                                                // 60\n    return modifiedTrigger;                                                                                           // 61\n  });                                                                                                                 // 62\n                                                                                                                      // 63\n  return filteredTriggers;                                                                                            // 64\n};                                                                                                                    // 65\n                                                                                                                      // 66\n//  run triggers and abort if redirected or callback stopped                                                          // 67\n//  @triggers - a set of triggers                                                                                     // 68\n//  @context - context we need to pass (it must have the route)                                                       // 69\n//  @redirectFn - function which used to redirect                                                                     // 70\n//  @after - called after if only all the triggers runs                                                               // 71\nTriggers.runTriggers = function(triggers, context, redirectFn, after) {                                               // 72\n  var abort = false;                                                                                                  // 73\n  var inCurrentLoop = true;                                                                                           // 74\n  var alreadyRedirected = false;                                                                                      // 75\n                                                                                                                      // 76\n  for(var lc=0; lc<triggers.length; lc++) {                                                                           // 77\n    var trigger = triggers[lc];                                                                                       // 78\n    trigger(context, doRedirect, doStop);                                                                             // 79\n                                                                                                                      // 80\n    if(abort) {                                                                                                       // 81\n      return;                                                                                                         // 82\n    }                                                                                                                 // 83\n  }                                                                                                                   // 84\n                                                                                                                      // 85\n  // mark that, we've exceeds the currentEventloop for                                                                // 86\n  // this set of triggers.                                                                                            // 87\n  inCurrentLoop = false;                                                                                              // 88\n  after();                                                                                                            // 89\n                                                                                                                      // 90\n  function doRedirect(url, params, queryParams) {                                                                     // 91\n    if(alreadyRedirected) {                                                                                           // 92\n      throw new Error(\"already redirected\");                                                                          // 93\n    }                                                                                                                 // 94\n                                                                                                                      // 95\n    if(!inCurrentLoop) {                                                                                              // 96\n      throw new Error(\"redirect needs to be done in sync\");                                                           // 97\n    }                                                                                                                 // 98\n                                                                                                                      // 99\n    if(!url) {                                                                                                        // 100\n      throw new Error(\"trigger redirect requires an URL\");                                                            // 101\n    }                                                                                                                 // 102\n                                                                                                                      // 103\n    abort = true;                                                                                                     // 104\n    alreadyRedirected = true;                                                                                         // 105\n    redirectFn(url, params, queryParams);                                                                             // 106\n  }                                                                                                                   // 107\n                                                                                                                      // 108\n  function doStop() {                                                                                                 // 109\n    abort = true;                                                                                                     // 110\n  }                                                                                                                   // 111\n};                                                                                                                    // 112\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/kadira:flow-router/client/router.js                                                                       //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nRouter = function () {                                                                                                // 1\n  var self = this;                                                                                                    // 2\n  this.globals = [];                                                                                                  // 3\n  this.subscriptions = Function.prototype;                                                                            // 4\n                                                                                                                      // 5\n  this._tracker = this._buildTracker();                                                                               // 6\n  this._current = {};                                                                                                 // 7\n                                                                                                                      // 8\n  // tracks the current path change                                                                                   // 9\n  this._onEveryPath = new Tracker.Dependency();                                                                       // 10\n                                                                                                                      // 11\n  this._globalRoute = new Route(this);                                                                                // 12\n                                                                                                                      // 13\n  // holds onRoute callbacks                                                                                          // 14\n  this._onRouteCallbacks = [];                                                                                        // 15\n                                                                                                                      // 16\n  // if _askedToWait is true. We don't automatically start the router                                                 // 17\n  // in Meteor.startup callback. (see client/_init.js)                                                                // 18\n  // Instead user need to call `.initialize()                                                                         // 19\n  this._askedToWait = false;                                                                                          // 20\n  this._initialized = false;                                                                                          // 21\n  this._triggersEnter = [];                                                                                           // 22\n  this._triggersExit = [];                                                                                            // 23\n  this._routes = [];                                                                                                  // 24\n  this._routesMap = {};                                                                                               // 25\n  this._updateCallbacks();                                                                                            // 26\n  this.notFound = this.notfound = null;                                                                               // 27\n  // indicate it's okay (or not okay) to run the tracker                                                              // 28\n  // when doing subscriptions                                                                                         // 29\n  // using a number and increment it help us to support FlowRouter.go()                                               // 30\n  // and legitimate reruns inside tracker on the same event loop.                                                     // 31\n  // this is a solution for #145                                                                                      // 32\n  this.safeToRun = 0;                                                                                                 // 33\n                                                                                                                      // 34\n  // this is a chain contains a list of old routes                                                                    // 35\n  // most of the time, there is only one old route                                                                    // 36\n  // but when it's the time for a trigger redirect we've a chain                                                      // 37\n  this._oldRouteChain = [];                                                                                           // 38\n                                                                                                                      // 39\n  this.env = {                                                                                                        // 40\n    replaceState: new Meteor.EnvironmentVariable(),                                                                   // 41\n    reload: new Meteor.EnvironmentVariable(),                                                                         // 42\n    trailingSlash: new Meteor.EnvironmentVariable()                                                                   // 43\n  };                                                                                                                  // 44\n                                                                                                                      // 45\n  // redirect function used inside triggers                                                                           // 46\n  this._redirectFn = function(pathDef, fields, queryParams) {                                                         // 47\n    self.withReplaceState(function() {                                                                                // 48\n      var path = FlowRouter.path(pathDef, fields, queryParams);                                                       // 49\n      self._page.redirect(path);                                                                                      // 50\n    });                                                                                                               // 51\n  };                                                                                                                  // 52\n  this._initTriggersAPI();                                                                                            // 53\n};                                                                                                                    // 54\n                                                                                                                      // 55\nRouter.prototype.route = function(pathDef, options, group) {                                                          // 56\n  if (!/^\\/.*/.test(pathDef)) {                                                                                       // 57\n    var message = \"route's path must start with '/'\";                                                                 // 58\n    throw new Error(message);                                                                                         // 59\n  }                                                                                                                   // 60\n                                                                                                                      // 61\n  options = options || {};                                                                                            // 62\n  var self = this;                                                                                                    // 63\n  var route = new Route(this, pathDef, options, group);                                                               // 64\n                                                                                                                      // 65\n  // calls when the page route being activates                                                                        // 66\n  route._actionHandle = function (context, next) {                                                                    // 67\n    var oldRoute = self._current.route;                                                                               // 68\n    self._oldRouteChain.push(oldRoute);                                                                               // 69\n                                                                                                                      // 70\n    var queryParams = self._qs.parse(context.querystring);                                                            // 71\n    // _qs.parse() gives us a object without prototypes,                                                              // 72\n    // created with Object.create(null)                                                                               // 73\n    // Meteor's check doesn't play nice with it.                                                                      // 74\n    // So, we need to fix it by cloning it.                                                                           // 75\n    // see more: https://github.com/meteorhacks/flow-router/issues/164                                                // 76\n    queryParams = JSON.parse(JSON.stringify(queryParams));                                                            // 77\n                                                                                                                      // 78\n    self._current = {                                                                                                 // 79\n      path: context.path,                                                                                             // 80\n      context: context,                                                                                               // 81\n      params: context.params,                                                                                         // 82\n      queryParams: queryParams,                                                                                       // 83\n      route: route,                                                                                                   // 84\n      oldRoute: oldRoute                                                                                              // 85\n    };                                                                                                                // 86\n                                                                                                                      // 87\n    // we need to invalidate if all the triggers have been completed                                                  // 88\n    // if not that means, we've been redirected to another path                                                       // 89\n    // then we don't need to invalidate                                                                               // 90\n    var afterAllTriggersRan = function() {                                                                            // 91\n      self._invalidateTracker();                                                                                      // 92\n    };                                                                                                                // 93\n                                                                                                                      // 94\n    var triggers = self._triggersEnter.concat(route._triggersEnter);                                                  // 95\n    Triggers.runTriggers(                                                                                             // 96\n      triggers,                                                                                                       // 97\n      self._current,                                                                                                  // 98\n      self._redirectFn,                                                                                               // 99\n      afterAllTriggersRan                                                                                             // 100\n    );                                                                                                                // 101\n  };                                                                                                                  // 102\n                                                                                                                      // 103\n  // calls when you exit from the page js route                                                                       // 104\n  route._exitHandle = function(context, next) {                                                                       // 105\n    var triggers = self._triggersExit.concat(route._triggersExit);                                                    // 106\n    Triggers.runTriggers(                                                                                             // 107\n      triggers,                                                                                                       // 108\n      self._current,                                                                                                  // 109\n      self._redirectFn,                                                                                               // 110\n      next                                                                                                            // 111\n    );                                                                                                                // 112\n  };                                                                                                                  // 113\n                                                                                                                      // 114\n  this._routes.push(route);                                                                                           // 115\n  if (options.name) {                                                                                                 // 116\n    this._routesMap[options.name] = route;                                                                            // 117\n  }                                                                                                                   // 118\n                                                                                                                      // 119\n  this._updateCallbacks();                                                                                            // 120\n  this._triggerRouteRegister(route);                                                                                  // 121\n                                                                                                                      // 122\n  return route;                                                                                                       // 123\n};                                                                                                                    // 124\n                                                                                                                      // 125\nRouter.prototype.group = function(options) {                                                                          // 126\n  return new Group(this, options);                                                                                    // 127\n};                                                                                                                    // 128\n                                                                                                                      // 129\nRouter.prototype.path = function(pathDef, fields, queryParams) {                                                      // 130\n  if (this._routesMap[pathDef]) {                                                                                     // 131\n    pathDef = this._routesMap[pathDef].pathDef;                                                                       // 132\n  }                                                                                                                   // 133\n                                                                                                                      // 134\n  fields = fields || {};                                                                                              // 135\n  var regExp = /(:[\\w\\(\\)\\\\\\+\\*\\.\\?]+)+/g;                                                                            // 136\n  var path = pathDef.replace(regExp, function(key) {                                                                  // 137\n    var firstRegexpChar = key.indexOf(\"(\");                                                                           // 138\n    // get the content behind : and (\\\\d+/)                                                                           // 139\n    key = key.substring(1, (firstRegexpChar > 0)? firstRegexpChar: undefined);                                        // 140\n    // remove +?*                                                                                                     // 141\n    key = key.replace(/[\\+\\*\\?]+/g, \"\");                                                                              // 142\n                                                                                                                      // 143\n    // this is to allow page js to keep the custom characters as it is                                                // 144\n    // we need to encode 2 times otherwise \"/\" char does not work properly                                            // 145\n    // So, in that case, when I includes \"/\" it will think it's a part of the                                         // 146\n    // route. encoding 2times fixes it                                                                                // 147\n    return encodeURIComponent(encodeURIComponent(fields[key] || \"\"));                                                 // 148\n  });                                                                                                                 // 149\n                                                                                                                      // 150\n  path = path.replace(/\\/\\/+/g, \"/\"); // Replace multiple slashes with single slash                                   // 151\n                                                                                                                      // 152\n  // remove trailing slash                                                                                            // 153\n  // but keep the root slash if it's the only one                                                                     // 154\n  path = path.match(/^\\/{1}$/) ? path: path.replace(/\\/$/, \"\");                                                       // 155\n                                                                                                                      // 156\n  // explictly asked to add a trailing slash                                                                          // 157\n  if(this.env.trailingSlash.get() && _.last(path) !== \"/\") {                                                          // 158\n    path += \"/\";                                                                                                      // 159\n  }                                                                                                                   // 160\n                                                                                                                      // 161\n  var strQueryParams = this._qs.stringify(queryParams || {});                                                         // 162\n  if(strQueryParams) {                                                                                                // 163\n    path += \"?\" + strQueryParams;                                                                                     // 164\n  }                                                                                                                   // 165\n                                                                                                                      // 166\n  return path;                                                                                                        // 167\n};                                                                                                                    // 168\n                                                                                                                      // 169\nRouter.prototype.go = function(pathDef, fields, queryParams) {                                                        // 170\n  var path = this.path(pathDef, fields, queryParams);                                                                 // 171\n                                                                                                                      // 172\n  var useReplaceState = this.env.replaceState.get();                                                                  // 173\n  if(useReplaceState) {                                                                                               // 174\n    this._page.replace(path);                                                                                         // 175\n  } else {                                                                                                            // 176\n    this._page(path);                                                                                                 // 177\n  }                                                                                                                   // 178\n};                                                                                                                    // 179\n                                                                                                                      // 180\nRouter.prototype.reload = function() {                                                                                // 181\n  var self = this;                                                                                                    // 182\n                                                                                                                      // 183\n  self.env.reload.withValue(true, function() {                                                                        // 184\n    self._page.replace(self._current.path);                                                                           // 185\n  });                                                                                                                 // 186\n};                                                                                                                    // 187\n                                                                                                                      // 188\nRouter.prototype.redirect = function(path) {                                                                          // 189\n  this._page.redirect(path);                                                                                          // 190\n};                                                                                                                    // 191\n                                                                                                                      // 192\nRouter.prototype.setParams = function(newParams) {                                                                    // 193\n  if(!this._current.route) {return false;}                                                                            // 194\n                                                                                                                      // 195\n  var pathDef = this._current.route.pathDef;                                                                          // 196\n  var existingParams = this._current.params;                                                                          // 197\n  var params = {};                                                                                                    // 198\n  _.each(_.keys(existingParams), function(key) {                                                                      // 199\n    params[key] = existingParams[key];                                                                                // 200\n  });                                                                                                                 // 201\n                                                                                                                      // 202\n  params = _.extend(params, newParams);                                                                               // 203\n  var queryParams = this._current.queryParams;                                                                        // 204\n                                                                                                                      // 205\n  this.go(pathDef, params, queryParams);                                                                              // 206\n  return true;                                                                                                        // 207\n};                                                                                                                    // 208\n                                                                                                                      // 209\nRouter.prototype.setQueryParams = function(newParams) {                                                               // 210\n  if(!this._current.route) {return false;}                                                                            // 211\n                                                                                                                      // 212\n  var queryParams = _.clone(this._current.queryParams);                                                               // 213\n  _.extend(queryParams, newParams);                                                                                   // 214\n                                                                                                                      // 215\n  for (var k in queryParams) {                                                                                        // 216\n    if (queryParams[k] === null || queryParams[k] === undefined) {                                                    // 217\n      delete queryParams[k];                                                                                          // 218\n    }                                                                                                                 // 219\n  }                                                                                                                   // 220\n                                                                                                                      // 221\n  var pathDef = this._current.route.pathDef;                                                                          // 222\n  var params = this._current.params;                                                                                  // 223\n  this.go(pathDef, params, queryParams);                                                                              // 224\n  return true;                                                                                                        // 225\n};                                                                                                                    // 226\n                                                                                                                      // 227\n// .current is not reactive                                                                                           // 228\n// This is by design. use .getParam() instead                                                                         // 229\n// If you really need to watch the path change, use .watchPathChange()                                                // 230\nRouter.prototype.current = function() {                                                                               // 231\n  return this._current;                                                                                               // 232\n};                                                                                                                    // 233\n                                                                                                                      // 234\n// Implementing Reactive APIs                                                                                         // 235\nvar reactiveApis = [                                                                                                  // 236\n  'getParam', 'getQueryParam',                                                                                        // 237\n  'getRouteName', 'watchPathChange'                                                                                   // 238\n];                                                                                                                    // 239\nreactiveApis.forEach(function(api) {                                                                                  // 240\n  Router.prototype[api] = function(arg1) {                                                                            // 241\n    // when this is calling, there may not be any route initiated                                                     // 242\n    // so we need to handle it                                                                                        // 243\n    var currentRoute = this._current.route;                                                                           // 244\n    if(!currentRoute) {                                                                                               // 245\n      this._onEveryPath.depend();                                                                                     // 246\n      return;                                                                                                         // 247\n    }                                                                                                                 // 248\n                                                                                                                      // 249\n    // currently, there is only one argument. If we've more let's add more args                                       // 250\n    // this is not clean code, but better in performance                                                              // 251\n    return currentRoute[api].call(currentRoute, arg1);                                                                // 252\n  };                                                                                                                  // 253\n});                                                                                                                   // 254\n                                                                                                                      // 255\nRouter.prototype.subsReady = function() {                                                                             // 256\n  var callback = null;                                                                                                // 257\n  var args = _.toArray(arguments);                                                                                    // 258\n                                                                                                                      // 259\n  if (typeof _.last(args) === \"function\") {                                                                           // 260\n    callback = args.pop();                                                                                            // 261\n  }                                                                                                                   // 262\n                                                                                                                      // 263\n  var currentRoute = this.current().route;                                                                            // 264\n  var globalRoute = this._globalRoute;                                                                                // 265\n                                                                                                                      // 266\n  // we need to depend for every route change and                                                                     // 267\n  // rerun subscriptions to check the ready state                                                                     // 268\n  this._onEveryPath.depend();                                                                                         // 269\n                                                                                                                      // 270\n  if(!currentRoute) {                                                                                                 // 271\n    return false;                                                                                                     // 272\n  }                                                                                                                   // 273\n                                                                                                                      // 274\n  var subscriptions;                                                                                                  // 275\n  if(args.length === 0) {                                                                                             // 276\n    subscriptions = _.values(globalRoute.getAllSubscriptions());                                                      // 277\n    subscriptions = subscriptions.concat(_.values(currentRoute.getAllSubscriptions()));                               // 278\n  } else {                                                                                                            // 279\n    subscriptions = _.map(args, function(subName) {                                                                   // 280\n      return globalRoute.getSubscription(subName) || currentRoute.getSubscription(subName);                           // 281\n    });                                                                                                               // 282\n  }                                                                                                                   // 283\n                                                                                                                      // 284\n  var isReady = function() {                                                                                          // 285\n    var ready =  _.every(subscriptions, function(sub) {                                                               // 286\n      return sub && sub.ready();                                                                                      // 287\n    });                                                                                                               // 288\n                                                                                                                      // 289\n    return ready;                                                                                                     // 290\n  };                                                                                                                  // 291\n                                                                                                                      // 292\n  if (callback) {                                                                                                     // 293\n    Tracker.autorun(function(c) {                                                                                     // 294\n      if (isReady()) {                                                                                                // 295\n        callback();                                                                                                   // 296\n        c.stop();                                                                                                     // 297\n      }                                                                                                               // 298\n    });                                                                                                               // 299\n  } else {                                                                                                            // 300\n    return isReady();                                                                                                 // 301\n  }                                                                                                                   // 302\n};                                                                                                                    // 303\n                                                                                                                      // 304\nRouter.prototype.withReplaceState = function(fn) {                                                                    // 305\n  return this.env.replaceState.withValue(true, fn);                                                                   // 306\n};                                                                                                                    // 307\n                                                                                                                      // 308\nRouter.prototype.withTrailingSlash = function(fn) {                                                                   // 309\n  return this.env.trailingSlash.withValue(true, fn);                                                                  // 310\n};                                                                                                                    // 311\n                                                                                                                      // 312\nRouter.prototype._notfoundRoute = function(context) {                                                                 // 313\n  this._current = {                                                                                                   // 314\n    path: context.path,                                                                                               // 315\n    context: context,                                                                                                 // 316\n    params: [],                                                                                                       // 317\n    queryParams: {},                                                                                                  // 318\n  };                                                                                                                  // 319\n                                                                                                                      // 320\n  // XXX this.notfound kept for backwards compatibility                                                               // 321\n  this.notFound = this.notFound || this.notfound;                                                                     // 322\n  if(!this.notFound) {                                                                                                // 323\n    console.error(\"There is no route for the path:\", context.path);                                                   // 324\n    return;                                                                                                           // 325\n  }                                                                                                                   // 326\n                                                                                                                      // 327\n  this._current.route = new Route(this, \"*\", this.notFound);                                                          // 328\n  this._invalidateTracker();                                                                                          // 329\n};                                                                                                                    // 330\n                                                                                                                      // 331\nRouter.prototype.initialize = function(options) {                                                                     // 332\n  options = options || {};                                                                                            // 333\n                                                                                                                      // 334\n  if(this._initialized) {                                                                                             // 335\n    throw new Error(\"FlowRouter is already initialized\");                                                             // 336\n  }                                                                                                                   // 337\n                                                                                                                      // 338\n  var self = this;                                                                                                    // 339\n  this._updateCallbacks();                                                                                            // 340\n                                                                                                                      // 341\n  // Implementing idempotent routing                                                                                  // 342\n  // by overriding page.js`s \"show\" method.                                                                           // 343\n  // Why?                                                                                                             // 344\n  // It is impossible to bypass exit triggers,                                                                        // 345\n  // becuase they execute before the handler and                                                                      // 346\n  // can not know what the next path is, inside exit trigger.                                                         // 347\n  //                                                                                                                  // 348\n  // we need override both show, replace to make this work                                                            // 349\n  // since we use redirect when we are talking about withReplaceState                                                 // 350\n  _.each(['show', 'replace'], function(fnName) {                                                                      // 351\n    var original = self._page[fnName];                                                                                // 352\n    self._page[fnName] = function(path, state, dispatch, push) {                                                      // 353\n      var reload = self.env.reload.get();                                                                             // 354\n      if (!reload && self._current.path === path) {                                                                   // 355\n        return;                                                                                                       // 356\n      }                                                                                                               // 357\n                                                                                                                      // 358\n      original.call(this, path, state, dispatch, push);                                                               // 359\n    };                                                                                                                // 360\n  });                                                                                                                 // 361\n                                                                                                                      // 362\n  // this is very ugly part of pagejs and it does decoding few times                                                  // 363\n  // in unpredicatable manner. See #168                                                                               // 364\n  // this is the default behaviour and we need keep it like that                                                      // 365\n  // we are doing a hack. see .path()                                                                                 // 366\n  this._page({decodeURLComponents: true, hashbang: !!options.hashbang});                                              // 367\n  this._initialized = true;                                                                                           // 368\n};                                                                                                                    // 369\n                                                                                                                      // 370\nRouter.prototype._buildTracker = function() {                                                                         // 371\n  var self = this;                                                                                                    // 372\n                                                                                                                      // 373\n  // main autorun function                                                                                            // 374\n  var tracker = Tracker.autorun(function () {                                                                         // 375\n    if(!self._current || !self._current.route) {                                                                      // 376\n      return;                                                                                                         // 377\n    }                                                                                                                 // 378\n                                                                                                                      // 379\n    // see the definition of `this._processingContexts`                                                               // 380\n    var currentContext = self._current;                                                                               // 381\n    var route = currentContext.route;                                                                                 // 382\n    var path = currentContext.path;                                                                                   // 383\n                                                                                                                      // 384\n    if(self.safeToRun === 0) {                                                                                        // 385\n      var message =                                                                                                   // 386\n        \"You can't use reactive data sources like Session\" +                                                          // 387\n        \" inside the `.subscriptions` method!\";                                                                       // 388\n      throw new Error(message);                                                                                       // 389\n    }                                                                                                                 // 390\n                                                                                                                      // 391\n    // We need to run subscriptions inside a Tracker                                                                  // 392\n    // to stop subs when switching between routes                                                                     // 393\n    // But we don't need to run this tracker with                                                                     // 394\n    // other reactive changes inside the .subscription method                                                         // 395\n    // We tackle this with the `safeToRun` variable                                                                   // 396\n    self._globalRoute.clearSubscriptions();                                                                           // 397\n    self.subscriptions.call(self._globalRoute, path);                                                                 // 398\n    route.callSubscriptions(currentContext);                                                                          // 399\n                                                                                                                      // 400\n    // otherwise, computations inside action will trigger to re-run                                                   // 401\n    // this computation. which we do not need.                                                                        // 402\n    Tracker.nonreactive(function() {                                                                                  // 403\n      var isRouteChange = currentContext.oldRoute !== currentContext.route;                                           // 404\n      var isFirstRoute = !currentContext.oldRoute;                                                                    // 405\n      // first route is not a route change                                                                            // 406\n      if(isFirstRoute) {                                                                                              // 407\n        isRouteChange = false;                                                                                        // 408\n      }                                                                                                               // 409\n                                                                                                                      // 410\n      // Clear oldRouteChain just before calling the action                                                           // 411\n      // We still need to get a copy of the oldestRoute first                                                         // 412\n      // It's very important to get the oldest route and registerRouteClose() it                                      // 413\n      // See: https://github.com/kadirahq/flow-router/issues/314                                                      // 414\n      var oldestRoute = self._oldRouteChain[0];                                                                       // 415\n      self._oldRouteChain = [];                                                                                       // 416\n                                                                                                                      // 417\n      currentContext.route.registerRouteChange(currentContext, isRouteChange);                                        // 418\n      route.callAction(currentContext);                                                                               // 419\n                                                                                                                      // 420\n      Tracker.afterFlush(function() {                                                                                 // 421\n        self._onEveryPath.changed();                                                                                  // 422\n        if(isRouteChange) {                                                                                           // 423\n          // We need to trigger that route (definition itself) has changed.                                           // 424\n          // So, we need to re-run all the register callbacks to current route                                        // 425\n          // This is pretty important, otherwise tracker                                                              // 426\n          // can't identify new route's items                                                                         // 427\n                                                                                                                      // 428\n          // We also need to afterFlush, otherwise this will re-run                                                   // 429\n          // helpers on templates which are marked for destroying                                                     // 430\n          if(oldestRoute) {                                                                                           // 431\n            oldestRoute.registerRouteClose();                                                                         // 432\n          }                                                                                                           // 433\n        }                                                                                                             // 434\n      });                                                                                                             // 435\n    });                                                                                                               // 436\n                                                                                                                      // 437\n    self.safeToRun--;                                                                                                 // 438\n  });                                                                                                                 // 439\n                                                                                                                      // 440\n  return tracker;                                                                                                     // 441\n};                                                                                                                    // 442\n                                                                                                                      // 443\nRouter.prototype._invalidateTracker = function() {                                                                    // 444\n  var self = this;                                                                                                    // 445\n  this.safeToRun++;                                                                                                   // 446\n  this._tracker.invalidate();                                                                                         // 447\n  // After the invalidation we need to flush to make changes imediately                                               // 448\n  // otherwise, we have face some issues context mix-maches and so on.                                                // 449\n  // But there are some cases we can't flush. So we need to ready for that.                                           // 450\n                                                                                                                      // 451\n  // we clearly know, we can't flush inside an autorun                                                                // 452\n  // this may leads some issues on flow-routing                                                                       // 453\n  // we may need to do some warning                                                                                   // 454\n  if(!Tracker.currentComputation) {                                                                                   // 455\n    // Still there are some cases where we can't flush                                                                // 456\n    //  eg:- when there is a flush currently                                                                          // 457\n    // But we've no public API or hacks to get that state                                                             // 458\n    // So, this is the only solution                                                                                  // 459\n    try {                                                                                                             // 460\n      Tracker.flush();                                                                                                // 461\n    } catch(ex) {                                                                                                     // 462\n      // only handling \"while flushing\" errors                                                                        // 463\n      if(!/Tracker\\.flush while flushing/.test(ex.message)) {                                                         // 464\n        return;                                                                                                       // 465\n      }                                                                                                               // 466\n                                                                                                                      // 467\n      // XXX: fix this with a proper solution by removing subscription mgt.                                           // 468\n      // from the router. Then we don't need to run invalidate using a tracker                                        // 469\n                                                                                                                      // 470\n      // this happens when we are trying to invoke a route change                                                     // 471\n      // with inside a route chnage. (eg:- Template.onCreated)                                                        // 472\n      // Since we use page.js and tracker, we don't have much control                                                 // 473\n      // over this process.                                                                                           // 474\n      // only solution is to defer route execution.                                                                   // 475\n                                                                                                                      // 476\n      // It's possible to have more than one path want to defer                                                       // 477\n      // But, we only need to pick the last one.                                                                      // 478\n      // self._nextPath = self._current.path;                                                                         // 479\n      Meteor.defer(function() {                                                                                       // 480\n        var path = self._nextPath;                                                                                    // 481\n        if(!path) {                                                                                                   // 482\n          return;                                                                                                     // 483\n        }                                                                                                             // 484\n                                                                                                                      // 485\n        delete self._nextPath;                                                                                        // 486\n        self.env.reload.withValue(true, function() {                                                                  // 487\n          self.go(path);                                                                                              // 488\n        });                                                                                                           // 489\n      });                                                                                                             // 490\n    }                                                                                                                 // 491\n  }                                                                                                                   // 492\n};                                                                                                                    // 493\n                                                                                                                      // 494\nRouter.prototype._updateCallbacks = function () {                                                                     // 495\n  var self = this;                                                                                                    // 496\n                                                                                                                      // 497\n  self._page.callbacks = [];                                                                                          // 498\n  self._page.exits = [];                                                                                              // 499\n                                                                                                                      // 500\n  _.each(self._routes, function(route) {                                                                              // 501\n    self._page(route.pathDef, route._actionHandle);                                                                   // 502\n    self._page.exit(route.pathDef, route._exitHandle);                                                                // 503\n  });                                                                                                                 // 504\n                                                                                                                      // 505\n  self._page(\"*\", function(context) {                                                                                 // 506\n    self._notfoundRoute(context);                                                                                     // 507\n  });                                                                                                                 // 508\n};                                                                                                                    // 509\n                                                                                                                      // 510\nRouter.prototype._initTriggersAPI = function() {                                                                      // 511\n  var self = this;                                                                                                    // 512\n  this.triggers = {                                                                                                   // 513\n    enter: function(triggers, filter) {                                                                               // 514\n      triggers = Triggers.applyFilters(triggers, filter);                                                             // 515\n      if(triggers.length) {                                                                                           // 516\n        self._triggersEnter = self._triggersEnter.concat(triggers);                                                   // 517\n      }                                                                                                               // 518\n    },                                                                                                                // 519\n                                                                                                                      // 520\n    exit: function(triggers, filter) {                                                                                // 521\n      triggers = Triggers.applyFilters(triggers, filter);                                                             // 522\n      if(triggers.length) {                                                                                           // 523\n        self._triggersExit = self._triggersExit.concat(triggers);                                                     // 524\n      }                                                                                                               // 525\n    }                                                                                                                 // 526\n  };                                                                                                                  // 527\n};                                                                                                                    // 528\n                                                                                                                      // 529\nRouter.prototype.wait = function() {                                                                                  // 530\n  if(this._initialized) {                                                                                             // 531\n    throw new Error(\"can't wait after FlowRouter has been initialized\");                                              // 532\n  }                                                                                                                   // 533\n                                                                                                                      // 534\n  this._askedToWait = true;                                                                                           // 535\n};                                                                                                                    // 536\n                                                                                                                      // 537\nRouter.prototype.onRouteRegister = function(cb) {                                                                     // 538\n  this._onRouteCallbacks.push(cb);                                                                                    // 539\n};                                                                                                                    // 540\n                                                                                                                      // 541\nRouter.prototype._triggerRouteRegister = function(currentRoute) {                                                     // 542\n  // We should only need to send a safe set of fields on the route                                                    // 543\n  // object.                                                                                                          // 544\n  // This is not to hide what's inside the route object, but to show                                                  // 545\n  // these are the public APIs                                                                                        // 546\n  var routePublicApi = _.pick(currentRoute, 'name', 'pathDef', 'path');                                               // 547\n  var omittingOptionFields = [                                                                                        // 548\n    'triggersEnter', 'triggersExit', 'action', 'subscriptions', 'name'                                                // 549\n  ];                                                                                                                  // 550\n  routePublicApi.options = _.omit(currentRoute.options, omittingOptionFields);                                        // 551\n                                                                                                                      // 552\n  _.each(this._onRouteCallbacks, function(cb) {                                                                       // 553\n    cb(routePublicApi);                                                                                               // 554\n  });                                                                                                                 // 555\n};                                                                                                                    // 556\n                                                                                                                      // 557\nRouter.prototype._page = page;                                                                                        // 558\nRouter.prototype._qs = qs;                                                                                            // 559\n                                                                                                                      // 560\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/kadira:flow-router/client/group.js                                                                        //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nGroup = function(router, options, parent) {                                                                           // 1\n  options = options || {};                                                                                            // 2\n                                                                                                                      // 3\n  if (options.prefix && !/^\\/.*/.test(options.prefix)) {                                                              // 4\n    var message = \"group's prefix must start with '/'\";                                                               // 5\n    throw new Error(message);                                                                                         // 6\n  }                                                                                                                   // 7\n                                                                                                                      // 8\n  this._router = router;                                                                                              // 9\n  this.prefix = options.prefix || '';                                                                                 // 10\n  this.name = options.name;                                                                                           // 11\n                                                                                                                      // 12\n  this._triggersEnter = options.triggersEnter || [];                                                                  // 13\n  this._triggersExit = options.triggersExit || [];                                                                    // 14\n  this._subscriptions = options.subscriptions || Function.prototype;                                                  // 15\n                                                                                                                      // 16\n  this.parent = parent;                                                                                               // 17\n  if (this.parent) {                                                                                                  // 18\n    this.prefix = parent.prefix + this.prefix;                                                                        // 19\n                                                                                                                      // 20\n    this._triggersEnter = parent._triggersEnter.concat(this._triggersEnter);                                          // 21\n    this._triggersExit = this._triggersExit.concat(parent._triggersExit);                                             // 22\n  }                                                                                                                   // 23\n};                                                                                                                    // 24\n                                                                                                                      // 25\nGroup.prototype.route = function(pathDef, options, group) {                                                           // 26\n  options = options || {};                                                                                            // 27\n                                                                                                                      // 28\n  if (!/^\\/.*/.test(pathDef)) {                                                                                       // 29\n    var message = \"route's path must start with '/'\";                                                                 // 30\n    throw new Error(message);                                                                                         // 31\n  }                                                                                                                   // 32\n                                                                                                                      // 33\n  group = group || this;                                                                                              // 34\n  pathDef = this.prefix + pathDef;                                                                                    // 35\n                                                                                                                      // 36\n  var triggersEnter = options.triggersEnter || [];                                                                    // 37\n  options.triggersEnter = this._triggersEnter.concat(triggersEnter);                                                  // 38\n                                                                                                                      // 39\n  var triggersExit = options.triggersExit || [];                                                                      // 40\n  options.triggersExit = triggersExit.concat(this._triggersExit);                                                     // 41\n                                                                                                                      // 42\n  return this._router.route(pathDef, options, group);                                                                 // 43\n};                                                                                                                    // 44\n                                                                                                                      // 45\nGroup.prototype.group = function(options) {                                                                           // 46\n  return new Group(this._router, options, this);                                                                      // 47\n};                                                                                                                    // 48\n                                                                                                                      // 49\nGroup.prototype.callSubscriptions = function(current) {                                                               // 50\n  if (this.parent) {                                                                                                  // 51\n    this.parent.callSubscriptions(current);                                                                           // 52\n  }                                                                                                                   // 53\n                                                                                                                      // 54\n  this._subscriptions.call(current.route, current.params, current.queryParams);                                       // 55\n};                                                                                                                    // 56\n                                                                                                                      // 57\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/kadira:flow-router/client/route.js                                                                        //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nRoute = function(router, pathDef, options, group) {                                                                   // 1\n  options = options || {};                                                                                            // 2\n                                                                                                                      // 3\n  this.options = options;                                                                                             // 4\n  this.pathDef = pathDef                                                                                              // 5\n                                                                                                                      // 6\n  // Route.path is deprecated and will be removed in 3.0                                                              // 7\n  this.path = pathDef;                                                                                                // 8\n                                                                                                                      // 9\n  if (options.name) {                                                                                                 // 10\n    this.name = options.name;                                                                                         // 11\n  }                                                                                                                   // 12\n                                                                                                                      // 13\n  this._action = options.action || Function.prototype;                                                                // 14\n  this._subscriptions = options.subscriptions || Function.prototype;                                                  // 15\n  this._triggersEnter = options.triggersEnter || [];                                                                  // 16\n  this._triggersExit = options.triggersExit || [];                                                                    // 17\n  this._subsMap = {};                                                                                                 // 18\n  this._router = router;                                                                                              // 19\n                                                                                                                      // 20\n  this._params = new ReactiveDict();                                                                                  // 21\n  this._queryParams = new ReactiveDict();                                                                             // 22\n  this._routeCloseDep = new Tracker.Dependency();                                                                     // 23\n                                                                                                                      // 24\n  // tracks the changes in the URL                                                                                    // 25\n  this._pathChangeDep = new Tracker.Dependency();                                                                     // 26\n                                                                                                                      // 27\n  this.group = group;                                                                                                 // 28\n};                                                                                                                    // 29\n                                                                                                                      // 30\nRoute.prototype.clearSubscriptions = function() {                                                                     // 31\n  this._subsMap = {};                                                                                                 // 32\n};                                                                                                                    // 33\n                                                                                                                      // 34\nRoute.prototype.register = function(name, sub, options) {                                                             // 35\n  this._subsMap[name] = sub;                                                                                          // 36\n};                                                                                                                    // 37\n                                                                                                                      // 38\n                                                                                                                      // 39\nRoute.prototype.getSubscription = function(name) {                                                                    // 40\n  return this._subsMap[name];                                                                                         // 41\n};                                                                                                                    // 42\n                                                                                                                      // 43\n                                                                                                                      // 44\nRoute.prototype.getAllSubscriptions = function() {                                                                    // 45\n  return this._subsMap;                                                                                               // 46\n};                                                                                                                    // 47\n                                                                                                                      // 48\nRoute.prototype.callAction = function(current) {                                                                      // 49\n  var self = this;                                                                                                    // 50\n  self._action(current.params, current.queryParams);                                                                  // 51\n};                                                                                                                    // 52\n                                                                                                                      // 53\nRoute.prototype.callSubscriptions = function(current) {                                                               // 54\n  this.clearSubscriptions();                                                                                          // 55\n  if (this.group) {                                                                                                   // 56\n    this.group.callSubscriptions(current);                                                                            // 57\n  }                                                                                                                   // 58\n                                                                                                                      // 59\n  this._subscriptions(current.params, current.queryParams);                                                           // 60\n};                                                                                                                    // 61\n                                                                                                                      // 62\nRoute.prototype.getRouteName = function() {                                                                           // 63\n  this._routeCloseDep.depend();                                                                                       // 64\n  return this.name;                                                                                                   // 65\n};                                                                                                                    // 66\n                                                                                                                      // 67\nRoute.prototype.getParam = function(key) {                                                                            // 68\n  this._routeCloseDep.depend();                                                                                       // 69\n  return this._params.get(key);                                                                                       // 70\n};                                                                                                                    // 71\n                                                                                                                      // 72\nRoute.prototype.getQueryParam = function(key) {                                                                       // 73\n  this._routeCloseDep.depend();                                                                                       // 74\n  return this._queryParams.get(key);                                                                                  // 75\n};                                                                                                                    // 76\n                                                                                                                      // 77\nRoute.prototype.watchPathChange = function() {                                                                        // 78\n  this._pathChangeDep.depend();                                                                                       // 79\n};                                                                                                                    // 80\n                                                                                                                      // 81\nRoute.prototype.registerRouteClose = function() {                                                                     // 82\n  this._params = new ReactiveDict();                                                                                  // 83\n  this._queryParams = new ReactiveDict();                                                                             // 84\n  this._routeCloseDep.changed();                                                                                      // 85\n  this._pathChangeDep.changed();                                                                                      // 86\n};                                                                                                                    // 87\n                                                                                                                      // 88\nRoute.prototype.registerRouteChange = function(currentContext, routeChanging) {                                       // 89\n  // register params                                                                                                  // 90\n  var params = currentContext.params;                                                                                 // 91\n  this._updateReactiveDict(this._params, params);                                                                     // 92\n                                                                                                                      // 93\n  // register query params                                                                                            // 94\n  var queryParams = currentContext.queryParams;                                                                       // 95\n  this._updateReactiveDict(this._queryParams, queryParams);                                                           // 96\n                                                                                                                      // 97\n  // if the route is changing, we need to defer triggering path changing                                              // 98\n  // if we did this, old route's path watchers will detect this                                                       // 99\n  // Real issue is, above watcher will get removed with the new route                                                 // 100\n  // So, we don't need to trigger it now                                                                              // 101\n  // We are doing it on the route close event. So, if they exists they'll                                             // 102\n  // get notify that                                                                                                  // 103\n  if(!routeChanging) {                                                                                                // 104\n    this._pathChangeDep.changed();                                                                                    // 105\n  }                                                                                                                   // 106\n};                                                                                                                    // 107\n                                                                                                                      // 108\nRoute.prototype._updateReactiveDict = function(dict, newValues) {                                                     // 109\n  var currentKeys = _.keys(newValues);                                                                                // 110\n  var oldKeys = _.keys(dict.keyDeps);                                                                                 // 111\n                                                                                                                      // 112\n  // set new values                                                                                                   // 113\n  //  params is an array. So, _.each(params) does not works                                                           // 114\n  //  to iterate params                                                                                               // 115\n  _.each(currentKeys, function(key) {                                                                                 // 116\n    dict.set(key, newValues[key]);                                                                                    // 117\n  });                                                                                                                 // 118\n                                                                                                                      // 119\n  // remove keys which does not exisits here                                                                          // 120\n  var removedKeys = _.difference(oldKeys, currentKeys);                                                               // 121\n  _.each(removedKeys, function(key) {                                                                                 // 122\n    dict.set(key, undefined);                                                                                         // 123\n  });                                                                                                                 // 124\n};                                                                                                                    // 125\n                                                                                                                      // 126\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/kadira:flow-router/client/_init.js                                                                        //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n// Export Router Instance                                                                                             // 1\nFlowRouter = new Router();                                                                                            // 2\nFlowRouter.Router = Router;                                                                                           // 3\nFlowRouter.Route = Route;                                                                                             // 4\n                                                                                                                      // 5\n// Initialize FlowRouter                                                                                              // 6\nMeteor.startup(function () {                                                                                          // 7\n  if(!FlowRouter._askedToWait) {                                                                                      // 8\n    FlowRouter.initialize();                                                                                          // 9\n  }                                                                                                                   // 10\n});                                                                                                                   // 11\n                                                                                                                      // 12\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n"]}}]