[{"type":"js","data":"(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar _ = Package.underscore._;\n\n/* Package-scope variables */\nvar EditableJSON, doUpdate;\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                    //\n// packages/babrahams_editable-json/packages/babrahams_editable-json.js                               //\n//                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                      //\n(function () {                                                                                        // 1\n                                                                                                      // 2\n//////////////////////////////////////////////////////////////////////////////////////////////////    // 3\n//                                                                                              //    // 4\n// packages/babrahams:editable-json/editable-json-common.js                                     //    // 5\n//                                                                                              //    // 6\n//////////////////////////////////////////////////////////////////////////////////////////////////    // 7\n                                                                                                //    // 8\nif (_.isUndefined(EditableJSON)) {                                                              // 1  // 9\n  EditableJSON = {};                                                                            // 2  // 10\n}                                                                                               // 3  // 11\n                                                                                                // 4  // 12\nEditableJSON.collection = function (collectionName) {                                           // 5  // 13\n  return EditableJSON.collection(collectionName);                                               // 6  // 14\n}                                                                                               // 7  // 15\n                                                                                                // 8  // 16\ndoUpdate = function (collectionName, _id, action) {                                             // 9  // 17\n                                                                                                // 10\n  var Collection = EditableJSON.collection(collectionName);                                     // 11\n  var updated = 0;                                                                              // 12\n                                                                                                // 13\n  try {                                                                                         // 14\n                                                                                                // 15\n    if (!!Package['aldeed:simple-schema'] && !!Package['aldeed:collection2'] && _.isFunction(Collection.simpleSchema) && Collection._c2) {\n                                                                                                // 17\n      updated = Collection.update(_id, action, {                                                // 18\n        filter: false,                                                                          // 19\n        autoConvert: false,                                                                     // 20\n        removeEmptyStrings: false,                                                              // 21\n        validate: false                                                                         // 22\n      });                                                                                       // 23\n                                                                                                // 24\n    }                                                                                           // 25\n                                                                                                // 26\n    else {                                                                                      // 27\n                                                                                                // 28\n      updated = Collection.update(_id, action);                                                 // 29\n                                                                                                // 30\n    }                                                                                           // 31\n                                                                                                // 32\n  }                                                                                             // 33\n                                                                                                // 34\n  catch (err) {                                                                                 // 35\n    if (!(Meteor.isClient && action.$set && _.keys(action.$set)[0].indexOf('newField') > -1)) { // 36\n      throw new Meteor.Error(err);                                                              // 37\n    }                                                                                           // 38\n  }                                                                                             // 39\n                                                                                                // 40\n  return updated;                                                                               // 41\n}                                                                                               // 42\n                                                                                                // 43\nMeteor.methods({                                                                                // 44\n                                                                                                // 45\n  editableJSON_update: function (collectionName, _id, action) {                                 // 46\n                                                                                                // 47\n    check(collectionName, String);                                                              // 48\n    check(_id, String);                                                                         // 49\n    check(action, Object);                                                                      // 50\n                                                                                                // 51\n    return doUpdate(collectionName, _id, action);                                               // 52\n                                                                                                // 53\n  }                                                                                             // 54\n                                                                                                // 55\n});                                                                                             // 56\n//////////////////////////////////////////////////////////////////////////////////////////////////    // 65\n                                                                                                      // 66\n}).call(this);                                                                                        // 67\n                                                                                                      // 68\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['babrahams:editable-json'] = {\n  EditableJSON: EditableJSON\n};\n\n})();\n","servePath":"/packages/babrahams_editable-json.js","sourceMap":{"version":3,"sources":["/packages/babrahams_editable-json/packages/babrahams_editable-json.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2G","file":"/packages/babrahams_editable-json.js","sourcesContent":["(function () {\n\n//////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                              //\n// packages/babrahams:editable-json/editable-json-common.js                                     //\n//                                                                                              //\n//////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                //\nif (_.isUndefined(EditableJSON)) {                                                              // 1\n  EditableJSON = {};                                                                            // 2\n}                                                                                               // 3\n                                                                                                // 4\nEditableJSON.collection = function (collectionName) {                                           // 5\n  return EditableJSON.collection(collectionName);                                               // 6\n}                                                                                               // 7\n                                                                                                // 8\ndoUpdate = function (collectionName, _id, action) {                                             // 9\n                                                                                                // 10\n  var Collection = EditableJSON.collection(collectionName);                                     // 11\n  var updated = 0;                                                                              // 12\n                                                                                                // 13\n  try {                                                                                         // 14\n                                                                                                // 15\n    if (!!Package['aldeed:simple-schema'] && !!Package['aldeed:collection2'] && _.isFunction(Collection.simpleSchema) && Collection._c2) {\n                                                                                                // 17\n      updated = Collection.update(_id, action, {                                                // 18\n        filter: false,                                                                          // 19\n        autoConvert: false,                                                                     // 20\n        removeEmptyStrings: false,                                                              // 21\n        validate: false                                                                         // 22\n      });                                                                                       // 23\n                                                                                                // 24\n    }                                                                                           // 25\n                                                                                                // 26\n    else {                                                                                      // 27\n                                                                                                // 28\n      updated = Collection.update(_id, action);                                                 // 29\n                                                                                                // 30\n    }                                                                                           // 31\n                                                                                                // 32\n  }                                                                                             // 33\n                                                                                                // 34\n  catch (err) {                                                                                 // 35\n    if (!(Meteor.isClient && action.$set && _.keys(action.$set)[0].indexOf('newField') > -1)) { // 36\n      throw new Meteor.Error(err);                                                              // 37\n    }                                                                                           // 38\n  }                                                                                             // 39\n                                                                                                // 40\n  return updated;                                                                               // 41\n}                                                                                               // 42\n                                                                                                // 43\nMeteor.methods({                                                                                // 44\n                                                                                                // 45\n  editableJSON_update: function (collectionName, _id, action) {                                 // 46\n                                                                                                // 47\n    check(collectionName, String);                                                              // 48\n    check(_id, String);                                                                         // 49\n    check(action, Object);                                                                      // 50\n                                                                                                // 51\n    return doUpdate(collectionName, _id, action);                                               // 52\n                                                                                                // 53\n  }                                                                                             // 54\n                                                                                                // 55\n});                                                                                             // 56\n//////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n"]}}]